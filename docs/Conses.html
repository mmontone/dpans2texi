<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Conses (ANSI Common Lisp)</title>

<meta name="description" content="Conses (ANSI Common Lisp)">
<meta name="keywords" content="Conses (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Arrays.html#Arrays" rel="next" title="Arrays">
<link href="Characters.html#name_002dchar" rel="prev" title="name-char">
<style type="text/css">
<!--
/*
CSS for TexInfo/HTML files.

Copyright (C) 2015-2021 Assaf Gordon (assafgordon@gmail.com)

License:
GNU All Permissive License
https://www.gnu.org/prep/maintain/html_node/License-Notices-for-Other-Files.html

 Copying and distribution of this file, with or without modification,
 are permitted in any medium without royalty provided the copyright
 notice and this notice are preserved.  This file is offered as-is,
 without any warranty.


The used tags/classes were collected from a Texinfo-generated HTML using:

  cd coreutils
  makeinfo --html --no-split -o coreutils.html doc/coreutils.texi
  cat coreutils.html | sed 's/</\n</g' | sed 's;>.*;>;g' \
         | grep '^<' | grep 'class=' | sort -u \
         | perl -lane 'm/<(\w+) .*class="([-\w]+)"/ ; print $1, "\t", $2' \
         | sort -u

*/

a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {
  font-family: sans-serif;
  font-size: 16px;
  margin: 1em;

  overflow-x: hidden; /* Coupled with the div.header trick,
			 this will extend the header lines
			 access the entire page width without causing
			 a horizontal scroll bar to appear. */
}


a {
  text-decoration: none;
  outline-style: none;
  color: blue;
}
a:visited {
  color: rgb(16,0,112);
}
a:hover {
  text-decoration: underline;
}


/*****************************************************
   Titles / Headers
******************************************************/

/* @settitle:
   The title of the document at the top of the document/header */
h1.settitle {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* The title at the beginning of the document, before the @menu */
h1.top {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* @chapter */
h2.chapter {
}

h2.appendix { }
h2.unnumbered { }

/* @section */
h3.section {
}
/* @unnumberedsec */
h3.unnumberedsec {
}
/* @heading (seems to be only used in fdl.texi) */
h3.heading {
}

/* @subsection */
h4.subsection {
}


/**************************************************
  Short Contents (if @shortcontents command is used)
***************************************************/
h2.shortcontents-heading { }
div.shortcontents { }
div.shortcontents ul { }
div.shortcontents ul li { }


/**************************************************
  Contents (if @contents command is used)
***************************************************/
h2.contents-heading { }
div.contents { }
div.contents ul { }
div.contents ul li { }


/* The @menu table */
table.menu { }
pre.menu-comment {}



/************************************
  @example   and   @verbatim
************************************/
div.example {
  margin-left: 2em;
  margin-right: 2em;
}
div.example pre.example {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}

/* Note: @verbatim is also rendered inside a 'div.example' */
div.example pre.verbatim {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}



/************************************
  @smallexample
************************************/
div.smallexample {
}
div.smallexample pre.smallexample {
}

/***********************************
  @display
***********************************/
div.display {
}
div.display pre.display {
}



/**************************************
  @footnote
**************************************/
div.footnote { }
h4.footnotes-heading { }

/**************************************
The header at the top of each page / section
(the next/previous/top/up links)
**************************************/
div.header {
   padding-top: 0.5ex;
   padding-bottom: 0.5ex;
   background-color: #ddddff;

   /* This will extend the background color of the header
      bar to the entire width of the page (and beyond),
      requires 'overflow-x: hidden' in the 'body'. */
   padding-left: 3000px;
   margin-left: -3000px;
   padding-right: 3000px;
   margin-right: -3000px;
}

/* Disable any additional margins */
div.header p {
    margin: 0;
}
div.header p a {
    color: blue;
}


/**************************************
   @table is rendered as <dl> (defnition list),
   @item  is rendered as <dt> (definition term),
   text is rendered as <dd> (definition description)
**************************************/
dl {
   margin: 0 1em;
}
dl dt {
   margin: 1em 0;
}
dl dd {
   margin-left: 2em;
}

/*******************************************************
  Text Styles
*******************************************************/

/* @var{} */
var {
  color: #CC0000;
}

/* @samp{} */
samp {
  color: #6600CC;
}

/* @env{} will result in <p><code>X</code></p> */
p code {
  color: #532c14;
}

/* @option{} */
span.nocodebreak {
  color: #5D4C46;
}

-->
</style>


</head>

<body lang="en">
<span id="Conses"></span><div class="header">
<p>
Next: <a href="Arrays.html#Arrays" accesskey="n" rel="next">Arrays</a>, Previous: <a href="Characters.html#Characters" accesskey="p" rel="prev">Characters</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conses-1"></span><h2 class="chapter">14 Conses</h2>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Cons-Concepts" accesskey="1">Cons Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Dictionary

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#list-_0028System-Class_0029" accesskey="2">list (System Class)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#null-_0028System-Class_0029" accesskey="3">null (System Class)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cons-_0028System-Class_0029" accesskey="4">cons (System Class)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#atom-_0028Type_0029" accesskey="5">atom (Type)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cons-_0028Function_0029" accesskey="6">cons (Function)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#consp" accesskey="7">consp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#atom-_0028Function_0029" accesskey="8">atom (Function)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#rplaca_003b-rplacd" accesskey="9">rplaca; rplacd</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#car_003b-cdr_003b-caar_003b-cadr_003b-cdar_003b-cddr_003b-caaar_003b-caadr_003b-cadar_003b-caddr_003b-cdaar_003b-cd_002b">car; cdr; caar; cadr; cdar; cddr; caaar; caadr; cadar; caddr; cdaar; cd+</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#copy_002dtree">copy-tree</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#sublis_003b-nsublis">sublis; nsublis</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#subst_003b-subst_002dif_003b-subst_002dif_002dnot_003b-nsubst_003b-nsubst_002dif_003b-nsubst_002dif_002dnot">subst; subst-if; subst-if-not; nsubst; nsubst-if; nsubst-if-not</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#tree_002dequal">tree-equal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#copy_002dlist">copy-list</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#list_003b-list_002a">list; list*</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#list_002dlength">list-length</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#listp">listp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dlist">make-list</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#push">push</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#pop">pop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#first_003b-second_003b-third_003b-fourth_003b-fifth_003b-sixth_003b-seventh_003b-eighth_003b-ninth_003b-ten_002b">first; second; third; fourth; fifth; sixth; seventh; eighth; ninth; ten+</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#nth">nth</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#endp">endp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#null-_0028Function_0029">null (Function)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#nconc">nconc</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#append">append</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#revappend_003b-nreconc">revappend; nreconc</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#butlast_003b-nbutlast">butlast; nbutlast</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#last">last</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ldiff_003b-tailp">ldiff; tailp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#nthcdr">nthcdr</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#rest">rest</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#member_003b-member_002dif_003b-member_002dif_002dnot">member; member-if; member-if-not</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#mapc_003b-mapcar_003b-mapcan_003b-mapl_003b-maplist_003b-mapcon">mapc; mapcar; mapcan; mapl; maplist; mapcon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#acons">acons</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#assoc_003b-assoc_002dif_003b-assoc_002dif_002dnot">assoc; assoc-if; assoc-if-not</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#copy_002dalist">copy-alist</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#pairlis">pairlis</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#rassoc_003b-rassoc_002dif_003b-rassoc_002dif_002dnot">rassoc; rassoc-if; rassoc-if-not</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#get_002dproperties">get-properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#getf">getf</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#remf">remf</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#intersection_003b-nintersection">intersection; nintersection</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#adjoin">adjoin</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#pushnew">pushnew</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#set_002ddifference_003b-nset_002ddifference">set-difference; nset-difference</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#set_002dexclusive_002dor_003b-nset_002dexclusive_002dor">set-exclusive-or; nset-exclusive-or</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#subsetp">subsetp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#union_003b-nunion">union; nunion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Cons-Concepts"></span><div class="header">
<p>
Next: <a href="#list-_0028System-Class_0029" accesskey="n" rel="next">list (System Class)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Cons-Concepts-1"></span><h3 class="section">14.1 Cons Concepts</h3>

<p>A <span id="index-cons-2"></span>
<em>cons</em> is a compound data <i>object</i> 
having two components called the <i>car</i> and the <i>cdr</i>.
</p>

<div class="float"><span id="fig14_002e1"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>car</td><td>cons</td><td>rplacd</td></tr>
<tr><td>cdr</td><td>rplaca</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.1: </strong>Some defined names relating to conses.</p></div></div>

<p>Depending on context, a group of connected <i>conses</i> can be viewed
in a variety of different ways.  A variety of operations is provided to
support each of these various views.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Conses-as-Trees" accesskey="1">Conses as Trees</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Conses-as-Lists" accesskey="2">Conses as Lists</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>
<hr>
<span id="Conses-as-Trees"></span><div class="header">
<p>
Next: <a href="#Conses-as-Lists" accesskey="n" rel="next">Conses as Lists</a>, Up: <a href="#Cons-Concepts" accesskey="u" rel="up">Cons Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conses-as-Trees-1"></span><h4 class="subsection">14.1.1 Conses as Trees</h4>

<p>A <span id="index-tree"></span>
<em>tree</em> is a binary recursive data structure made up of
<i>conses</i> and <i>atoms</i>:
the <i>conses</i> are themselves also <i>trees</i>
(sometimes called &ldquo;subtrees&rdquo; or &ldquo;branches&rdquo;), and the <i>atoms</i>
are terminal nodes (sometimes called <span id="index-leaves"></span>
<em>leaves</em>). 
Typically, the <i>leaves</i> represent data while the branches 
establish some relationship among that data.
</p>

<div class="float"><span id="fig14_002e2"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>caaaar</td><td>caddar</td><td>cdar</td><td>nsubst</td></tr>
<tr><td>caaadr</td><td>cadddr</td><td>cddaar</td><td>nsubst-if</td></tr>
<tr><td>caaar</td><td>caddr</td><td>cddadr</td><td>nsubst-if-not</td></tr>
<tr><td>caadar</td><td>cadr</td><td>cddar</td><td>nthcdr</td></tr>
<tr><td>caaddr</td><td>cdaaar</td><td>cdddar</td><td>sublis</td></tr>
<tr><td>caadr</td><td>cdaadr</td><td>cddddr</td><td>subst</td></tr>
<tr><td>caar</td><td>cdaar</td><td>cdddr</td><td>subst-if</td></tr>
<tr><td>cadaar</td><td>cdadar</td><td>cddr</td><td>subst-if-not</td></tr>
<tr><td>cadadr</td><td>cdaddr</td><td>copy-tree</td><td>tree-equal</td></tr>
<tr><td>cadar</td><td>cdadr</td><td>nsublis</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.2: </strong>Some defined names relating to trees.</p></div></div>

<span id="General-Restrictions-on-Parameters-that-must-be-Trees"></span><h4 class="subsubsection">14.1.1.1 General Restrictions on Parameters that must be Trees</h4>

<p>Except as explicitly stated otherwise,
for any <i>standardized</i> <i>function</i> that takes a <i>parameter</i>
that is required to be a <i>tree</i>,
the consequences are undefined
if that <i>tree</i> is circular.
</p>


<hr>
<span id="Conses-as-Lists"></span><div class="header">
<p>
Previous: <a href="#Conses-as-Trees" accesskey="p" rel="prev">Conses as Trees</a>, Up: <a href="#Cons-Concepts" accesskey="u" rel="up">Cons Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conses-as-Lists-1"></span><h4 class="subsection">14.1.2 Conses as Lists</h4>

<p>A <span id="index-list-4"></span>
<em>list</em> is a chain of <i>conses</i> in which the <i>car</i> of each
<i>cons</i> is an <i>element</i> of the <i>list</i>, 
and the <i>cdr</i> of each <i>cons</i> is either the next
link in the chain or a terminating <i>atom</i>.  
</p>
<p>A <span id="index-proper-list"></span>
<em>proper list</em> is a <i>list</i> terminated by the <i>empty list</i>.
The <i>empty list</i> is a <i>proper list</i>, but is not a <i>cons</i>.
</p>
<p>An <span id="index-improper-list"></span>
<em>improper list</em> is a <i>list</i> that is not a <i>proper list</i>;
that is, it is a <i>circular list</i> or a <i>dotted list</i>.
</p>
<p>A <span id="index-dotted-list"></span>
<em>dotted list</em> is a <i>list</i> that has a terminating <i>atom</i>
that is not the <i>empty list</i>.  A <i>non-nil</i> <i>atom</i> by itself
is not considered to be a <i>list</i> of any kind&mdash;not even a <i>dotted list</i>.
</p>
<p>A <span id="index-circular-list"></span>
<em>circular list</em> is a chain of <i>conses</i> that has no termination 
because some <i>cons</i> in the chain is the <i>cdr</i> of a later <i>cons</i>.
</p>

<div class="float"><span id="fig14_002e3"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>append</td><td>last</td><td>nbutlast</td><td>rest</td></tr>
<tr><td>butlast</td><td>ldiff</td><td>nconc</td><td>revappend</td></tr>
<tr><td>copy-alist</td><td>list</td><td>ninth</td><td>second</td></tr>
<tr><td>copy-list</td><td>list*</td><td>nreconc</td><td>seventh</td></tr>
<tr><td>eighth</td><td>list-length</td><td>nth</td><td>sixth</td></tr>
<tr><td>endp</td><td>make-list</td><td>nthcdr</td><td>tailp</td></tr>
<tr><td>fifth</td><td>member</td><td>pop</td><td>tenth</td></tr>
<tr><td>first</td><td>member-if</td><td>push</td><td>third</td></tr>
<tr><td>fourth</td><td>member-if-not</td><td>pushnew</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.3: </strong>Some defined names relating to lists.</p></div></div>

<span id="Lists-as-Association-Lists"></span><h4 class="subsubsection">14.1.2.1 Lists as Association Lists</h4>

<p>An <span id="index-association-list"></span>
<em>association list</em> is a <i>list</i> of <i>conses</i> 
representing an association of <i>keys</i> with <i>values</i>, 
where the <i>car</i> of each <i>cons</i> is the <i>key</i> 
and the <i>cdr</i> is the <i>value</i> associated with that <i>key</i>.
</p>

<div class="float"><span id="fig14_002e4"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>acons</td><td>assoc-if</td><td>pairlis</td><td>rassoc-if</td></tr>
<tr><td>assoc</td><td>assoc-if-not</td><td>rassoc</td><td>rassoc-if-not</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.4: </strong>Some defined names related to assocation lists.</p></div></div>


<span id="Lists-as-Sets"></span><h4 class="subsubsection">14.1.2.2 Lists as Sets</h4>

<p><i>Lists</i> are sometimes viewed as sets by considering their elements
unordered and by assuming there is no duplication of elements.
</p>

<div class="float"><span id="fig14_002e5"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>adjoin</td><td>nset-difference</td><td>set-difference</td><td>union</td></tr>
<tr><td>intersection</td><td>nset-exclusive-or</td><td>set-exclusive-or</td><td></td></tr>
<tr><td>nintersection</td><td>nunion</td><td>subsetp</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.5: </strong>Some defined names related to sets.</p></div></div>


<span id="General-Restrictions-on-Parameters-that-must-be-Lists"></span><h4 class="subsubsection">14.1.2.3 General Restrictions on Parameters that must be Lists</h4>

<p>Except as explicitly specified otherwise,
any <i>standardized</i> <i>function</i> that takes a <i>parameter</i>
that is required to be a <i>list</i> should be prepared to signal 
an error of <i>type</i> <code>type-error</code> if the <i>value</i> received is a <i>dotted list</i>.
</p>
<p>Except as explicitly specified otherwise,
for any <i>standardized</i> <i>function</i> that takes a <i>parameter</i>
that is required to be a <i>list</i>, 
the consequences are undefined 
if that <i>list</i> is <i>circular</i>.
</p>


<hr>
<span id="list-_0028System-Class_0029"></span><div class="header">
<p>
Next: <a href="#null-_0028System-Class_0029" accesskey="n" rel="next">null (System Class)</a>, Previous: <a href="#Cons-Concepts" accesskey="p" rel="prev">Cons Concepts</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">list (System Class)</h4>
<span id="list-_0028System-Class_0029-1"></span><h3 class="heading">list (System Class)</h3>
<span id="index-list-9"></span>
<span id="index-list-5"></span>


<span id="Class-Precedence-List_003a-50"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>list</code>,
<code>sequence</code>,
<code>t</code>
</p>
<span id="Description_003a-371"></span><h4 class="subsubheading">Description:</h4>

<p>A <span id="index-list-6"></span>
<em>list</em> is a chain of <i>conses</i> in which the <i>car</i> of each
<i>cons</i> is an <i>element</i> of the <i>list</i>, and the <i>cdr</i> of
each <i>cons</i> is either the next link in the chain or a terminating
<i>atom</i>.
</p>
<p>A <span id="index-proper-list-1"></span>
<em>proper list</em> is a chain of <i>conses</i> terminated by 
the <span id="index-empty-list"></span>
<em>empty list</em>, (), which is  itself a <i>proper list</i>.
A <span id="index-dotted-list-1"></span>
<em>dotted list</em> is a <i>list</i> which has a terminating <i>atom</i> 
that is not the <i>empty list</i>.
A <span id="index-circular-list-1"></span>
<em>circular list</em> is a chain of <i>conses</i> that has no termination
because some <i>cons</i> in the chain is the <i>cdr</i> of a later <i>cons</i>.
</p>
<p><i>Dotted lists</i> and <i>circular lists</i> are also <i>lists</i>, but usually
the unqualified term &ldquo;list&rdquo; within this specification means <i>proper list</i>.
Nevertheless, the <i>type</i> <code>list</code> unambiguously includes <i>dotted lists</i> 
and <i>circular lists</i>.
</p>
<p>For each <i>element</i> of a <i>list</i> there is a <i>cons</i>.
The <i>empty list</i> has no <i>elements</i> and is not a <i>cons</i>.
</p>
<p>The <i>types</i> <code>cons</code> and <code>null</code> form an <i>exhaustive partition</i> 
of the <i>type</i> <code>list</code>.
</p>
<span id="See-Also_003a-300"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Syntax.html#Left_002dParenthesis">Section 2.4.1 (Left-Parenthesis)</a>,
<a href="Printer.html#PrintingListsAndConses">Section 22.1.3.5 (Printing Lists and Conses)</a>
</p>

<hr>
<span id="null-_0028System-Class_0029"></span><div class="header">
<p>
Next: <a href="#cons-_0028System-Class_0029" accesskey="n" rel="next">cons (System Class)</a>, Previous: <a href="#list-_0028System-Class_0029" accesskey="p" rel="prev">list (System Class)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">null (System Class)</h4>
<span id="null-_0028System-Class_0029-1"></span><h3 class="heading">null (System Class)</h3>
<span id="index-null-4"></span>
<span id="index-null-1"></span>


<span id="Class-Precedence-List_003a-51"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>null</code>,
<code>symbol</code>,
<code>list</code>,
<code>sequence</code>,
<code>t</code>
</p>
<span id="Description_003a-372"></span><h4 class="subsubheading">Description:</h4>

<p>The only <i>object</i> of <i>type</i> <code>null</code> is <code>nil</code>, 
which represents the <i>empty list</i> and can also be notated ().
</p>
<span id="See-Also_003a-301"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Syntax.html#Symbols-as-Tokens">Section 2.3.4 (Symbols as Tokens)</a>,
<a href="Syntax.html#Left_002dParenthesis">Section 2.4.1 (Left-Parenthesis)</a>,
<a href="Printer.html#PrintingSymbols">Section 22.1.3.3 (Printing Symbols)</a>
</p>
<hr>
<span id="cons-_0028System-Class_0029"></span><div class="header">
<p>
Next: <a href="#atom-_0028Type_0029" accesskey="n" rel="next">atom (Type)</a>, Previous: <a href="#null-_0028System-Class_0029" accesskey="p" rel="prev">null (System Class)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">cons (System Class)</h4>
<span id="cons-_0028System-Class_0029-1"></span><h3 class="heading">cons (System Class)</h3>
<span id="index-cons-6"></span>
<span id="index-cons-3"></span>


<span id="Class-Precedence-List_003a-52"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>cons</code>,
<code>list</code>,
<code>sequence</code>,
<code>t</code>
</p>
<span id="Description_003a-373"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>cons</i> is a compound <i>object</i> having two components,
called the <i>car</i> and <i>cdr</i>. These form a <i>dotted pair</i>.
Each component can be any <i>object</i>.
</p>

<span id="Compound-Type-Specifier-Kind_003a-17"></span><h4 class="subsubheading">Compound Type Specifier Kind:</h4>

<p>Specializing.
</p>
<span id="Compound-Type-Specifier-Syntax_003a-17"></span><h4 class="subsubheading">Compound Type Specifier Syntax:</h4>

<p>(cons <tt>[</tt>car-typespec <tt>[</tt>cdr-typespec<tt>]</tt><tt>]</tt>)
</p>
<span id="Compound-Type-Specifier-Arguments_003a-17"></span><h4 class="subsubheading">Compound Type Specifier Arguments:</h4>

<p><var>car-typespec</var>&mdash;a <i>type specifier</i>,
or the <i>symbol</i> <tt>*</tt>.
The default is the <i>symbol</i> <tt>*</tt>.
</p>
<p><var>cdr-typespec</var>&mdash;a <i>type specifier</i>,
or the <i>symbol</i> <tt>*</tt>.
The default is the <i>symbol</i> <tt>*</tt>.
</p>
<span id="Compound-Type-Specifier-Description_003a-17"></span><h4 class="subsubheading">Compound Type Specifier Description:</h4>

<p>This denotes the set of <i>conses</i> 
whose <i>car</i> is constrained to be of <i>type</i> <var>car-typespec</var> and
whose <i>cdr</i> is constrained to be of <i>type</i> <var>cdr-typespec</var>.
(If either <var>car-typespec</var> or <var>cdr-typespec</var> is <tt>*</tt>,
it is as if the <i>type</i> <code>t</code> had been denoted.)
</p>

<span id="See-Also_003a-302"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Syntax.html#Left_002dParenthesis">Section 2.4.1 (Left-Parenthesis)</a>,
<a href="Printer.html#PrintingListsAndConses">Section 22.1.3.5 (Printing Lists and Conses)</a>
</p>
<hr>
<span id="atom-_0028Type_0029"></span><div class="header">
<p>
Next: <a href="#cons-_0028Function_0029" accesskey="n" rel="next">cons (Function)</a>, Previous: <a href="#cons-_0028System-Class_0029" accesskey="p" rel="prev">cons (System Class)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">atom (Type)</h4>
<span id="atom-_0028Type_0029-1"></span><h3 class="heading">atom (Type)</h3>
<span id="index-atom-3"></span>
<span id="index-atom"></span>


<span id="Supertypes_003a-13"></span><h4 class="subsubheading">Supertypes:</h4>

<p><code>atom</code>,
<code>t</code>
</p>
<span id="Description_003a-374"></span><h4 class="subsubheading">Description:</h4>

<p>It is equivalent to <code>(not cons)</code>.  
</p>

<hr>
<span id="cons-_0028Function_0029"></span><div class="header">
<p>
Next: <a href="#consp" accesskey="n" rel="next">consp</a>, Previous: <a href="#atom-_0028Type_0029" accesskey="p" rel="prev">atom (Type)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">cons (Function)</h4>
<span id="cons-_0028Function_0029-1"></span><h3 class="heading">cons (Function)</h3>
<span id="index-cons-7"></span>
<span id="index-cons-4"></span>


<span id="Syntax_003a-285"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-cons-5">Function: <strong>cons</strong> <em>object-1 object-2 <span class="roman">→</span> cons</em></dt>
</dl>

<span id="Arguments-and-Values_003a-274"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object-1</var>&mdash;an <i>object</i>.
</p>
<p><var>object-2</var>&mdash;an <i>object</i>.
</p>
<p><var>cons</var>&mdash;a <i>cons</i>.
</p>
<span id="Description_003a-375"></span><h4 class="subsubheading">Description:</h4>

<p>Creates a <i>fresh</i> <i>cons</i>, the <i>car</i> of which is <var>object-1</var>
and the <i>cdr</i> of which is <var>object-2</var>.
</p>
<span id="Examples_003a-258"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (cons 1 2) <span class="roman">→</span> (1 . 2)
 (cons 1 nil) <span class="roman">→</span> (1)
 (cons nil 2) <span class="roman">→</span> (NIL . 2)
 (cons nil nil) <span class="roman">→</span> (NIL)
 (cons 1 (cons 2 (cons 3 (cons 4 nil)))) <span class="roman">→</span> (1 2 3 4)
 (cons 'a 'b) <span class="roman">→</span> (A . B)
 (cons 'a (cons 'b (cons 'c '()))) <span class="roman">→</span> (A B C)
 (cons 'a '(b c d)) <span class="roman">→</span> (A B C D)
</pre></div>


<span id="See-Also_003a-303"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#list">list</a>
</p>
<span id="Notes_003a-196"></span><h4 class="subsubheading">Notes:</h4>
<p>If <var>object-2</var> is a <i>list</i>, <code>cons</code> can be thought of as
producing a new <i>list</i> which is like it but has <var>object-1</var> prepended.
</p>
<hr>
<span id="consp"></span><div class="header">
<p>
Next: <a href="#atom-_0028Function_0029" accesskey="n" rel="next">atom (Function)</a>, Previous: <a href="#cons-_0028Function_0029" accesskey="p" rel="prev">cons (Function)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">consp</h4>
<span id="consp-_0028Function_0029"></span><h3 class="heading">consp (Function)</h3>
<span id="index-consp-2"></span>
<span id="index-consp"></span>


<span id="Syntax_003a-286"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-consp-1">Function: <strong>consp</strong> <em>object <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-275"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-376"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>object</var> is of <i>type</i> <code>cons</code>;
otherwise, returns <i>false</i>.
</p>
<span id="Examples_003a-259"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (consp nil) <span class="roman">→</span> <i>false</i>
 (consp (cons 1 2)) <span class="roman">→</span> <i>true</i>
</pre></div>


<p>The <i>empty list</i> is not a <i>cons</i>, so
</p>
<div class="lisp">
<pre class="lisp"> (consp '()) ≡ (consp 'nil) <span class="roman">→</span> <i>false</i>
</pre></div>


<span id="See-Also_003a-304"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#listp">listp</a>
</p>
<span id="Notes_003a-197"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (consp <var>object</var>) ≡ (typep <var>object</var> 'cons) ≡ (not (typep <var>object</var> 'atom)) ≡ (typep <var>object</var> '(not atom))
</pre></div>



<hr>
<span id="atom-_0028Function_0029"></span><div class="header">
<p>
Next: <a href="#rplaca_003b-rplacd" accesskey="n" rel="next">rplaca; rplacd</a>, Previous: <a href="#consp" accesskey="p" rel="prev">consp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">atom (Function)</h4>
<span id="atom-_0028Function_0029-1"></span><h3 class="heading">atom (Function)</h3>
<span id="index-atom-4"></span>
<span id="index-atom-1"></span>


<span id="Syntax_003a-287"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-atom-2">Function: <strong>atom</strong> <em>object <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-276"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-377"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>object</var> is of <i>type</i> <code>atom</code>;
otherwise, returns <i>false</i>.
</p>
<span id="Examples_003a-260"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (atom 'sss) <span class="roman">→</span> <i>true</i>
 (atom (cons 1 2)) <span class="roman">→</span> <i>false</i>
 (atom nil) <span class="roman">→</span> <i>true</i>
 (atom '()) <span class="roman">→</span> <i>true</i>
 (atom 3) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Notes_003a-198"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (atom <var>object</var>) ≡ (typep <var>object</var> 'atom) ≡ (not (consp <var>object</var>))
 ≡ (not (typep <var>object</var> 'cons)) ≡ (typep <var>object</var> '(not cons))
</pre></div>



<hr>
<span id="rplaca_003b-rplacd"></span><div class="header">
<p>
Next: <a href="#car_003b-cdr_003b-caar_003b-cadr_003b-cdar_003b-cddr_003b-caaar_003b-caadr_003b-cadar_003b-caddr_003b-cdaar_003b-cd_002b" accesskey="n" rel="next">car; cdr; caar; cadr; cdar; cddr; caaar; caadr; cadar; caddr; cdaar; cd+</a>, Previous: <a href="#atom-_0028Function_0029" accesskey="p" rel="prev">atom (Function)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">rplaca; rplacd</h4>
<span id="rplaca_002c-rplacd-_0028Function_0029"></span><h3 class="heading">rplaca, rplacd (Function)</h3>
<span id="index-rplaca-2"></span>
<span id="index-rplaca"></span>
<span id="index-rplacd-2"></span>
<span id="index-rplacd"></span>
<span id="rplaca"></span>

<span id="Syntax_003a-288"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-rplaca-1">Function: <strong>rplaca</strong> <em>cons object <span class="roman">→</span> cons</em></dt>
</dl>
<dl>
<dt id="index-rplacd-1">Function: <strong>rplacd</strong> <em>cons object <span class="roman">→</span> cons</em></dt>
</dl>


<span id="Pronunciation_003a-7"></span><h4 class="subsubheading">Pronunciation:</h4>

<p><code>rplaca</code>: [ˌrēˈplakə]
or [ˌrəˈplakə]
</p>
<p><code>rplacd</code>: [ˌrēˈplakdə]
or [ˌrəˈplakdə]
or [ˌrēˈplakdē]
or [ˌrəˈplakdē]
</p>
<span id="Arguments-and-Values_003a-277"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>cons</var>&mdash;a <i>cons</i>.
</p>
<p><var>object</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-378"></span><h4 class="subsubheading">Description:</h4>

<p><code>rplaca</code> replaces the <i>car</i> of the <var>cons</var> with <var>object</var>.
</p>
<p><code>rplacd</code> replaces the <i>cdr</i> of the <var>cons</var> with <var>object</var>.
</p>
<span id="Examples_003a-261"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (defparameter *some-list* (list* 'one 'two 'three 'four)) <span class="roman">→</span> *some-list*
 *some-list* <span class="roman">→</span> (ONE TWO THREE . FOUR)
 (rplaca *some-list* 'uno) <span class="roman">→</span> (UNO TWO THREE . FOUR)
 *some-list* <span class="roman">→</span> (UNO TWO THREE . FOUR)
 (rplacd (last *some-list*) (list 'IV)) <span class="roman">→</span> (THREE IV)
 *some-list* <span class="roman">→</span> (UNO TWO THREE IV)
</pre></div>


<span id="Side-Effects_003a-35"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>cons</var> is modified. 
</p>
<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>cons</var> is not a <i>cons</i>.
</p>

<hr>
<span id="car_003b-cdr_003b-caar_003b-cadr_003b-cdar_003b-cddr_003b-caaar_003b-caadr_003b-cadar_003b-caddr_003b-cdaar_003b-cd_002b"></span><div class="header">
<p>
Next: <a href="#copy_002dtree" accesskey="n" rel="next">copy-tree</a>, Previous: <a href="#rplaca_003b-rplacd" accesskey="p" rel="prev">rplaca; rplacd</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">car; cdr; caar; cadr; cdar; cddr; caaar; caadr; cadar; caddr; cdaar; cd+</h4>
<span id="car_002c-cdr_002c-caar_002c-cadr_002c-cdar_002c-cddr_002c-caaar_002c-caadr_002c-cadar_002c-caddr_002c-cdaar_002c-cdadr_002c-cddar_002c-cdddr_002c-caaaar_002c-caaadr_002c-caadar_002c-caaddr_002c-cadaar_002c-cadadr_002c-caddar_002c-cadddr_002c-cdaaar_002c-cdaadr_002c-cdadar_002c-cdaddr_002c-cddaar_002c-cddadr_002c-cdddar_002c-cddddr-_0028Accessor_0029"></span><h3 class="heading">car, cdr, caar, cadr, cdar, cddr, caaar, caadr, cadar, caddr, cdaar, cdadr, cddar, cdddr, caaaar, caaadr, caadar, caaddr, cadaar, cadadr, caddar, cadddr, cdaaar, cdaadr, cdadar, cdaddr, cddaar, cddadr, cdddar, cddddr (Accessor)</h3>
<span id="index-car-1"></span>
<span id="index-car"></span>
<span id="index-cdr-1"></span>
<span id="index-cdr"></span>
<span id="index-caar-1"></span>
<span id="index-caar"></span>
<span id="index-cadr-1"></span>
<span id="index-cadr"></span>
<span id="index-cdar-1"></span>
<span id="index-cdar"></span>
<span id="index-cddr-1"></span>
<span id="index-cddr"></span>
<span id="index-caaar-1"></span>
<span id="index-caaar"></span>
<span id="index-caadr-1"></span>
<span id="index-caadr"></span>
<span id="index-cadar-1"></span>
<span id="index-cadar"></span>
<span id="index-caddr-1"></span>
<span id="index-caddr"></span>
<span id="index-cdaar-1"></span>
<span id="index-cdaar"></span>
<span id="index-cdadr-1"></span>
<span id="index-cdadr"></span>
<span id="index-cddar-1"></span>
<span id="index-cddar"></span>
<span id="index-cdddr-1"></span>
<span id="index-cdddr"></span>
<span id="index-caaaar-1"></span>
<span id="index-caaaar"></span>
<span id="index-caaadr-1"></span>
<span id="index-caaadr"></span>
<span id="index-caadar-1"></span>
<span id="index-caadar"></span>
<span id="index-caaddr-1"></span>
<span id="index-caaddr"></span>
<span id="index-cadaar-1"></span>
<span id="index-cadaar"></span>
<span id="index-cadadr-1"></span>
<span id="index-cadadr"></span>
<span id="index-caddar-1"></span>
<span id="index-caddar"></span>
<span id="index-cadddr-1"></span>
<span id="index-cadddr"></span>
<span id="index-cdaaar-1"></span>
<span id="index-cdaaar"></span>
<span id="index-cdaadr-1"></span>
<span id="index-cdaadr"></span>
<span id="index-cdadar-1"></span>
<span id="index-cdadar"></span>
<span id="index-cdaddr-1"></span>
<span id="index-cdaddr"></span>
<span id="index-cddaar-1"></span>
<span id="index-cddaar"></span>
<span id="index-cddadr-1"></span>
<span id="index-cddadr"></span>
<span id="index-cdddar-1"></span>
<span id="index-cdddar"></span>
<span id="index-cddddr-1"></span>
<span id="index-cddddr"></span>
<span id="car"></span><span id="cdr"></span>

<span id="Syntax_003a-289"></span><h4 class="subsubheading">Syntax:</h4>

<p>car x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cadar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cddar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caaaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caaadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caadar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caaddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cadaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cadadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
caddar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cadddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdaaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdaadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdadar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdaddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cddaar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cddadr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cdddar x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
cddddr x <span class="roman">→</span> object  |  (setf (x object) new-object)<br>
<br>
</p>

<span id="Pronunciation_003a-8"></span><h4 class="subsubheading">Pronunciation:</h4>

<p><code>cadr</code>: [ˈkaˌdə r]
</p>
<p><code>caddr</code>: [ˈkadə ˌdə r]
or [ˈkaˌd\.udə r]
</p>
<p><code>cdr</code>: [ˈk\.uˌdə r]
</p>
<p><code>cddr</code>: [ˈk\.udə ˌdə r]
or [ˈkəˌd\.udə r]
</p>
<span id="Arguments-and-Values_003a-278"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>x</var>&mdash;a <i>list</i>.
</p>
<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>new-object</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-379"></span><h4 class="subsubheading">Description:</h4>

<p>If <var>x</var> is a <i>cons</i>, <code>car</code> returns the <i>car</i> 
of that <i>cons</i>.  If <var>x</var> is <code>nil</code>, <code>car</code> returns <code>nil</code>.
</p>
<p>If <var>x</var> is a <i>cons</i>, <code>cdr</code> returns the <i>cdr</i> 
of that <i>cons</i>.  If <var>x</var> is <code>nil</code>, <code>cdr</code> returns <code>nil</code>.
</p>
<p><i>Functions</i> are provided which perform compositions of up to four
<code>car</code> and <code>cdr</code> operations.  Their <i>names</i> consist of 
a <code>C</code>, followed by two, three, or four occurrences of <code>A</code> or <code>D</code>, 
and finally an <code>R</code>.  The series of <code>A</code>&rsquo;s and <code>D</code>&rsquo;s in each
<i>function</i>&rsquo;s <i>name</i> is chosen to identify the series of 
<code>car</code> and <code>cdr</code> operations that is performed by the function.
The order in which the <code>A</code>&rsquo;s and <code>D</code>&rsquo;s appear is the inverse of the
order in which the corresponding operations are performed.  The next figure&nbsp;<!-- /@w -->
defines the relationships precisely.
</p>

<div class="float"><span id="fig14_002e6"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<thead><tr><th>This <i>place</i> &hellip;</th><th>Is equivalent to this <i>place</i> &hellip;</th></tr></thead>
<tr><td><code>(caar <var>x</var>)</code></td><td><code>(car (car <var>x</var>))</code></td></tr>
<tr><td><code>(cadr <var>x</var>)</code></td><td><code>(car (cdr <var>x</var>))</code></td></tr>
<tr><td><code>(cdar <var>x</var>)</code></td><td><code>(cdr (car <var>x</var>))</code></td></tr>
<tr><td><code>(cddr <var>x</var>)</code></td><td><code>(cdr (cdr <var>x</var>))</code></td></tr>
<tr><td><code>(caaar <var>x</var>)</code></td><td><code>(car (car (car <var>x</var>)))</code></td></tr>
<tr><td><code>(caadr <var>x</var>)</code></td><td><code>(car (car (cdr <var>x</var>)))</code></td></tr>
<tr><td><code>(cadar <var>x</var>)</code></td><td><code>(car (cdr (car <var>x</var>)))</code></td></tr>
<tr><td><code>(caddr <var>x</var>)</code></td><td><code>(car (cdr (cdr <var>x</var>)))</code></td></tr>
<tr><td><code>(cdaar <var>x</var>)</code></td><td><code>(cdr (car (car <var>x</var>)))</code></td></tr>
<tr><td><code>(cdadr <var>x</var>)</code></td><td><code>(cdr (car (cdr <var>x</var>)))</code></td></tr>
<tr><td><code>(cddar <var>x</var>)</code></td><td><code>(cdr (cdr (car <var>x</var>)))</code></td></tr>
<tr><td><code>(cdddr <var>x</var>)</code></td><td><code>(cdr (cdr (cdr <var>x</var>)))</code></td></tr>
<tr><td><code>(caaaar <var>x</var>)</code></td><td><code>(car (car (car (car <var>x</var>))))</code></td></tr>
<tr><td><code>(caaadr <var>x</var>)</code></td><td><code>(car (car (car (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(caadar <var>x</var>)</code></td><td><code>(car (car (cdr (car <var>x</var>))))</code></td></tr>
<tr><td><code>(caaddr <var>x</var>)</code></td><td><code>(car (car (cdr (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(cadaar <var>x</var>)</code></td><td><code>(car (cdr (car (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cadadr <var>x</var>)</code></td><td><code>(car (cdr (car (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(caddar <var>x</var>)</code></td><td><code>(car (cdr (cdr (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cadddr <var>x</var>)</code></td><td><code>(car (cdr (cdr (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(cdaaar <var>x</var>)</code></td><td><code>(cdr (car (car (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cdaadr <var>x</var>)</code></td><td><code>(cdr (car (car (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(cdadar <var>x</var>)</code></td><td><code>(cdr (car (cdr (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cdaddr <var>x</var>)</code></td><td><code>(cdr (car (cdr (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(cddaar <var>x</var>)</code></td><td><code>(cdr (cdr (car (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cddadr <var>x</var>)</code></td><td><code>(cdr (cdr (car (cdr <var>x</var>))))</code></td></tr>
<tr><td><code>(cdddar <var>x</var>)</code></td><td><code>(cdr (cdr (cdr (car <var>x</var>))))</code></td></tr>
<tr><td><code>(cddddr <var>x</var>)</code></td><td><code>(cdr (cdr (cdr (cdr <var>x</var>))))</code></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 14.6: </strong>CAR and CDR variants</p></div></div>

<p><code>setf</code> can also be used with any of these functions to change an
existing component of <var>x</var>, but <code>setf</code> will not make new
components.  So, for example, the <i>car</i> of a <i>cons</i> 
can be assigned with <code>setf</code> of <code>car</code>,
but the <i>car</i> of <code>nil</code>&nbsp;<!-- /@w -->cannot be assigned with <code>setf</code> of <code>car</code>.
Similarly, the <i>car</i> of the <i>car</i> of a <i>cons</i> whose <i>car</i>
is a <i>cons</i> can be assigned with <code>setf</code> of <code>caar</code>,
but neither <code>nil</code> nor a <i>cons</i> whose car is <code>nil</code>&nbsp;<!-- /@w -->can be assigned
with <code>setf</code> of <code>caar</code>.
</p>
<p>The argument <var>x</var> is permitted to be a <i>dotted list</i> 
or a <i>circular list</i>.
</p>
<span id="Examples_003a-262"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (car nil) <span class="roman">→</span> NIL  
 (cdr '(1 . 2)) <span class="roman">→</span> 2
 (cdr '(1 2)) <span class="roman">→</span> (2)
 (cadr '(1 2)) <span class="roman">→</span> 2 
 (car '(a b c)) <span class="roman">→</span> A
 (cdr '(a b c)) <span class="roman">→</span> (B C)
</pre></div>


<span id="Exceptional-Situations_003a-118"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The functions <code>car</code> and <code>cdr</code> 
should signal <code>type-error</code> if they receive an argument which is not a
<i>list</i>.  The other functions (<code>caar</code>, <code>cadr</code>,
&hellip; <code>cddddr</code>) should behave for the purpose of
error checking as if defined by appropriate calls to <code>car</code> and
<code>cdr</code>.
</p>
<span id="See-Also_003a-305"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#rplaca">rplaca</a>, <a href="#first">first</a>, <a href="#rest">rest</a>
</p>
<span id="Notes_003a-199"></span><h4 class="subsubheading">Notes:</h4>

<p>The <i>car</i> of a <i>cons</i> can also be altered by using <code>rplaca</code>,
and the <i>cdr</i> of a <i>cons</i> can be altered by using <code>rplacd</code>.
</p>
<div class="lisp">
<pre class="lisp">(car <i>x</i>)    ≡ (first <i>x</i>)
(cadr <i>x</i>)   ≡ (second <i>x</i>) ≡ (car (cdr <i>x</i>))
(caddr <i>x</i>)  ≡ (third <i>x</i>)  ≡ (car (cdr (cdr <i>x</i>)))
(cadddr <i>x</i>) ≡ (fourth <i>x</i>) ≡ (car (cdr (cdr (cdr <i>x</i>))))
</pre></div>



<hr>
<span id="copy_002dtree"></span><div class="header">
<p>
Next: <a href="#sublis_003b-nsublis" accesskey="n" rel="next">sublis; nsublis</a>, Previous: <a href="#car_003b-cdr_003b-caar_003b-cadr_003b-cdar_003b-cddr_003b-caaar_003b-caadr_003b-cadar_003b-caddr_003b-cdaar_003b-cd_002b" accesskey="p" rel="prev">car; cdr; caar; cadr; cdar; cddr; caaar; caadr; cadar; caddr; cdaar; cd+</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">copy-tree</h4>
<span id="copy_002dtree-_0028Function_0029"></span><h3 class="heading">copy-tree (Function)</h3>
<span id="index-copy_002dtree-2"></span>
<span id="index-copy_002dtree"></span>



<span id="Syntax_003a-290"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-copy_002dtree-1">Function: <strong>copy-tree</strong> <em>tree <span class="roman">→</span> new-tree</em></dt>
</dl>

<span id="Arguments-and-Values_003a-279"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>tree</var>&mdash;a <i>tree</i>.
</p>
<p><var>new-tree</var>&mdash;a <i>tree</i>.
</p>
<span id="Description_003a-380"></span><h4 class="subsubheading">Description:</h4>

<p>Creates a <i>copy</i> of a <i>tree</i> of <i>conses</i>.
</p>
<p>If <var>tree</var> is not a <i>cons</i>, it is returned; 
otherwise, the result is a new <i>cons</i> of the results of calling <code>copy-tree</code> 
on the <i>car</i> and <i>cdr</i> of <var>tree</var>.
In other words, all <i>conses</i> in the <i>tree</i> represented by <var>tree</var>
are copied recursively, stopping only when non-<i>conses</i> are encountered.
</p>
<p><code>copy-tree</code> does not preserve circularities and the sharing of substructure.
</p>
<span id="Examples_003a-263"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq object (list (cons 1 &quot;one&quot;)
                    (cons 2 (list 'a 'b 'c))))
<span class="roman">→</span> ((1 . &quot;one&quot;) (2 A B C))
 (setq object-too object) <span class="roman">→</span> ((1 . &quot;one&quot;) (2 A B C))
 (setq copy-as-list (copy-list object))
 (setq copy-as-alist (copy-alist object))
 (setq copy-as-tree (copy-tree object))
 (eq object object-too) <span class="roman">→</span> <i>true</i>
 (eq copy-as-tree object) <span class="roman">→</span> <i>false</i>
 (eql copy-as-tree object) <span class="roman">→</span> <i>false</i>
 (equal copy-as-tree object) <span class="roman">→</span> <i>true</i>
 (setf (first (cdr (second object))) &quot;a&quot;
       (car (second object)) &quot;two&quot;
       (car object) '(one . 1)) <span class="roman">→</span> (ONE . 1)
 object <span class="roman">→</span> ((ONE . 1) (&quot;two&quot; &quot;a&quot; B C))
 object-too <span class="roman">→</span> ((ONE . 1) (&quot;two&quot; &quot;a&quot; B C))
 copy-as-list <span class="roman">→</span> ((1 . &quot;one&quot;) (&quot;two&quot; &quot;a&quot; B C))
 copy-as-alist <span class="roman">→</span> ((1 . &quot;one&quot;) (2 &quot;a&quot; B C))
 copy-as-tree <span class="roman">→</span> ((1 . &quot;one&quot;) (2 A B C)) 
</pre></div>


<span id="See-Also_003a-306"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#tree_002dequal">tree-equal</a>
</p>


<hr>
<span id="sublis_003b-nsublis"></span><div class="header">
<p>
Next: <a href="#subst_003b-subst_002dif_003b-subst_002dif_002dnot_003b-nsubst_003b-nsubst_002dif_003b-nsubst_002dif_002dnot" accesskey="n" rel="next">subst; subst-if; subst-if-not; nsubst; nsubst-if; nsubst-if-not</a>, Previous: <a href="#copy_002dtree" accesskey="p" rel="prev">copy-tree</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">sublis; nsublis</h4>
<span id="sublis_002c-nsublis-_0028Function_0029"></span><h3 class="heading">sublis, nsublis (Function)</h3>
<span id="index-sublis-2"></span>
<span id="index-sublis"></span>
<span id="index-nsublis-2"></span>
<span id="index-nsublis"></span>


<span id="Syntax_003a-291"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-sublis-1">Function: <strong>sublis</strong> <em>alist tree <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-tree</em></dt>
</dl>
<dl>
<dt id="index-nsublis-1">Function: <strong>nsublis</strong> <em>alist tree <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-tree</em></dt>
</dl>

<span id="Arguments-and-Values_003a-280"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>alist</var>&mdash;an <i>association list</i>.
</p>
<p><var>tree</var>&mdash;a <i>tree</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>new-tree</var>&mdash;a <i>tree</i>.
</p>
<span id="Description_003a-381"></span><h4 class="subsubheading">Description:</h4>

<p><code>sublis</code> makes substitutions for <i>objects</i> in <var>tree</var>
(a structure of <i>conses</i>).
<code>nsublis</code> is like <code>sublis</code> 
but destructively modifies the relevant
parts of the <var>tree</var>.
</p>
<p><code>sublis</code> looks at all subtrees and leaves of <var>tree</var>;
if a subtree or leaf appears as a key in <var>alist</var>
(that is, the key and the subtree or leaf <i>satisfy the test</i>),
it is replaced by the <i>object</i> with which that key is associated.
This operation is non-destructive.  In effect, <code>sublis</code> can
perform several <code>subst</code> operations simultaneously.
</p>
<p>If <code>sublis</code> succeeds, a new copy of <var>tree</var> is returned in
which each occurrence of such a subtree or leaf is replaced by the
<i>object</i> with which it is associated.   If no changes are made, the
original tree is returned.  The original <var>tree</var> is left unchanged,
but the result tree may share cells with it.
</p>
<p><code>nsublis</code> is permitted to modify <var>tree</var> 
but otherwise returns the same values as <code>sublis</code>.
</p>
<span id="Examples_003a-264"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (sublis '((x . 100) (z . zprime))
         '(plus x (minus g z x p) 4 . x))
<span class="roman">→</span> (PLUS 100 (MINUS G ZPRIME 100 P) 4 . 100)
 (sublis '(((+ x y) . (- x y)) ((- x y) . (+ x y)))
         '(* (/ (+ x y) (+ x p)) (- x y))
         :test #'equal)
<span class="roman">→</span> (* (/ (- X Y) (+ X P)) (+ X Y))
 (setq tree1 '(1 (1 2) ((1 2 3)) (((1 2 3 4)))))
<span class="roman">→</span> (1 (1 2) ((1 2 3)) (((1 2 3 4))))
 (sublis '((3 . &quot;three&quot;)) tree1) 
<span class="roman">→</span> (1 (1 2) ((1 2 &quot;three&quot;)) (((1 2 &quot;three&quot; 4))))
 (sublis '((t . &quot;string&quot;))
          (sublis '((1 . &quot;&quot;) (4 . 44)) tree1)
          :key #'stringp)
<span class="roman">→</span> (&quot;string&quot; (&quot;string&quot; 2) ((&quot;string&quot; 2 3)) (((&quot;string&quot; 2 3 44))))
 tree1 <span class="roman">→</span> (1 (1 2) ((1 2 3)) (((1 2 3 4))))
 (setq tree2 '(&quot;one&quot; (&quot;one&quot; &quot;two&quot;) ((&quot;one&quot; &quot;Two&quot; &quot;three&quot;))))
<span class="roman">→</span> (&quot;one&quot; (&quot;one&quot; &quot;two&quot;) ((&quot;one&quot; &quot;Two&quot; &quot;three&quot;))) 
 (sublis '((&quot;two&quot; . 2)) tree2) 
<span class="roman">→</span> (&quot;one&quot; (&quot;one&quot; &quot;two&quot;) ((&quot;one&quot; &quot;Two&quot; &quot;three&quot;))) 
 tree2 <span class="roman">→</span> (&quot;one&quot; (&quot;one&quot; &quot;two&quot;) ((&quot;one&quot; &quot;Two&quot; &quot;three&quot;))) 
 (sublis '((&quot;two&quot; . 2)) tree2 :test 'equal) 
<span class="roman">→</span> (&quot;one&quot; (&quot;one&quot; 2) ((&quot;one&quot; &quot;Two&quot; &quot;three&quot;))) 

 (nsublis '((t . 'temp))
           tree1
           :key #'(lambda (x) (or (atom x) (&lt; (list-length x) 3))))
<span class="roman">→</span> ((QUOTE TEMP) (QUOTE TEMP) QUOTE TEMP) 
</pre></div>


<span id="Side-Effects_003a-36"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nsublis</code> modifies <var>tree</var>.
</p>
<span id="See-Also_003a-307"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#subst">subst</a>,
<a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-200"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>Because the side-effecting variants (<i>e.g.</i>, <code>nsublis</code>) potentially
change the path that is being traversed, their effects in the presence
of shared or circular structure structure may vary in surprising ways
when compared to their non-side-effecting alternatives.  To see this,
consider the following side-effect behavior, which might be exhibited by
some implementations:
</p>
<div class="lisp">
<pre class="lisp"> (defun test-it (fn)
   (let* ((shared-piece (list 'a 'b))
          (data (list shared-piece shared-piece)))
     (funcall fn '((a . b) (b . a)) data)))
 (test-it #'sublis) <span class="roman">→</span> ((B A) (B A))
 (test-it #'nsublis) <span class="roman">→</span> ((A B) (A B))
</pre></div>



<hr>
<span id="subst_003b-subst_002dif_003b-subst_002dif_002dnot_003b-nsubst_003b-nsubst_002dif_003b-nsubst_002dif_002dnot"></span><div class="header">
<p>
Next: <a href="#tree_002dequal" accesskey="n" rel="next">tree-equal</a>, Previous: <a href="#sublis_003b-nsublis" accesskey="p" rel="prev">sublis; nsublis</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">subst; subst-if; subst-if-not; nsubst; nsubst-if; nsubst-if-not</h4>
<span id="subst_002c-subst_002dif_002c-subst_002dif_002dnot_002c-nsubst_002c-nsubst_002dif_002c-nsubst_002dif_002dnot-_0028Function_0029"></span><h3 class="heading">subst, subst-if, subst-if-not, nsubst, nsubst-if, nsubst-if-not (Function)</h3>
<span id="index-subst-2"></span>
<span id="index-subst"></span>
<span id="index-subst_002dif-2"></span>
<span id="index-subst_002dif"></span>
<span id="index-subst_002dif_002dnot-2"></span>
<span id="index-subst_002dif_002dnot"></span>
<span id="index-nsubst-2"></span>
<span id="index-nsubst"></span>
<span id="index-nsubst_002dif-2"></span>
<span id="index-nsubst_002dif"></span>
<span id="index-nsubst_002dif_002dnot-2"></span>
<span id="index-nsubst_002dif_002dnot"></span>
<span id="subst"></span><span id="nsubst"></span>

<span id="Syntax_003a-292"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-subst-1">Function: <strong>subst</strong> <em>new old  tree <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-tree</em></dt>
</dl>
<dl>
<dt id="index-subst_002dif-1">Function: <strong>subst-if</strong> <em>new predicate tree <tt>&amp;key</tt> key <span class="roman">→</span> new-tree</em></dt>
</dl>
<dl>
<dt id="index-subst_002dif_002dnot-1">Function: <strong>subst-if-not</strong> <em>new predicate tree <tt>&amp;key</tt> key <span class="roman">→</span> new-tree</em></dt>
</dl>

<dl>
<dt id="index-nsubst-1">Function: <strong>nsubst</strong> <em>new old  tree <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-tree</em></dt>
</dl>
<dl>
<dt id="index-nsubst_002dif-1">Function: <strong>nsubst-if</strong> <em>new predicate tree <tt>&amp;key</tt> key <span class="roman">→</span> new-tree</em></dt>
</dl>
<dl>
<dt id="index-nsubst_002dif_002dnot-1">Function: <strong>nsubst-if-not</strong> <em>new predicate tree <tt>&amp;key</tt> key <span class="roman">→</span> new-tree</em></dt>
</dl>

<span id="Arguments-and-Values_003a-281"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>new</var>&mdash;an <i>object</i>.
</p>
<p><var>old</var>&mdash;an <i>object</i>.
</p>
<p><var>predicate</var>&mdash;a <i>symbol</i> that names a <i>function</i>,
or a <i>function</i> of one argument 
that returns a <i>generalized boolean</i> value.
</p>
<p><var>tree</var>&mdash;a <i>tree</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>new-tree</var>&mdash;a <i>tree</i>.
</p>
<span id="Description_003a-382"></span><h4 class="subsubheading">Description:</h4>

<p><code>subst</code>, <code>subst-if</code>, and <code>subst-if-not</code> perform
substitution operations on <var>tree</var>.  
Each function searches <var>tree</var> for occurrences of a 
particular <var>old</var> item of an element or subexpression that 
<i>satisfies the test</i>.
</p>
<p><code>nsubst</code>, <code>nsubst-if</code>, and <code>nsubst-if-not</code> are 
like <code>subst</code>,
<code>subst-if</code>, and <code>subst-if-not</code> respectively, except that the 
original <var>tree</var> is  modified.
</p>
<p><code>subst</code> makes a copy of <var>tree</var>,
substituting <var>new</var> for every subtree or leaf of <var>tree</var>
(whether the subtree or leaf is a <i>car</i> or a <i>cdr</i> of its parent)
such that <var>old</var> and the subtree or leaf <i>satisfy the test</i>.  
</p>
<p><code>nsubst</code> is a destructive version of <code>subst</code>.  
The list structure of
<var>tree</var> is altered by destructively replacing with <var>new</var>
each leaf of the <var>tree</var> such that <var>old</var> and the leaf
<i>satisfy the test</i>.
</p>
<p>For <code>subst</code>, <code>subst-if</code>, 
and <code>subst-if-not</code>,
if the functions succeed, a new
copy of the tree is returned in which each  occurrence of such an
element is replaced by the
<var>new</var> element or subexpression.  If no changes are made, the original 
<var>tree</var> may be returned.
The original <var>tree</var> is left unchanged, but the result tree 
may share storage with it.           
</p>
<p>For <code>nsubst</code>, <code>nsubst-if</code>, 
and <code>nsubst-if-not</code>
the original <var>tree</var> is  modified and returned as the function result,
but the result may not be <code>eq</code> to <var>tree</var>.
</p>
<span id="Examples_003a-265"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq tree1 '(1 (1 2) (1 2 3) (1 2 3 4))) <span class="roman">→</span> (1 (1 2) (1 2 3) (1 2 3 4))
 (subst &quot;two&quot; 2 tree1) <span class="roman">→</span> (1 (1 &quot;two&quot;) (1 &quot;two&quot; 3) (1 &quot;two&quot; 3 4))
 (subst &quot;five&quot; 5 tree1) <span class="roman">→</span> (1 (1 2) (1 2 3) (1 2 3 4))
 (eq tree1 (subst &quot;five&quot; 5 tree1)) <span class="roman">→</span> <i>implementation-dependent</i>
 (subst 'tempest 'hurricane
        '(shakespeare wrote (the hurricane)))
<span class="roman">→</span> (SHAKESPEARE WROTE (THE TEMPEST))
 (subst 'foo 'nil '(shakespeare wrote (twelfth night)))
<span class="roman">→</span> (SHAKESPEARE WROTE (TWELFTH NIGHT . FOO) . FOO)
 (subst '(a . cons) '(old . pair)
        '((old . spice) ((old . shoes) old . pair) (old . pair))
        :test #'equal)
<span class="roman">→</span> ((OLD . SPICE) ((OLD . SHOES) A . CONS) (A . CONS))

 (subst-if 5 #'listp tree1) <span class="roman">→</span> 5
 (subst-if-not '(x) #'consp tree1) 
<span class="roman">→</span> (1 X)

 tree1 <span class="roman">→</span> (1 (1 2) (1 2 3) (1 2 3 4))
 (nsubst 'x 3 tree1 :key #'(lambda (y) (and (listp y) (third y)))) 
<span class="roman">→</span> (1 (1 2) X X)
 tree1 <span class="roman">→</span> (1 (1 2) X X)
</pre></div>


<span id="Side-Effects_003a-37"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nsubst</code>, <code>nsubst-if</code>, and <code>nsubst-if-not</code> 
might alter the <i>tree structure</i> of <var>tree</var>.
</p>
<span id="See-Also_003a-308"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Sequences.html#substitute">substitute</a>,
<a href="Sequences.html#nsubstitute">nsubstitute</a>,
<a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-201"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>The functions <code>subst-if-not</code> and <code>nsubst-if-not</code> are deprecated.
</p>
<p>One possible definition of <code>subst</code>:
</p>
<div class="lisp">
<pre class="lisp"> (defun subst (old new tree &amp;rest x &amp;key test test-not key)
   (cond ((satisfies-the-test old tree :test test
                              :test-not test-not :key key)
          new)
         ((atom tree) tree)
         (t (let ((a (apply #'subst old new (car tree) x))
                  (d (apply #'subst old new (cdr tree) x)))
              (if (and (eql a (car tree))
                       (eql d (cdr tree)))
                  tree
                  (cons a d))))))
</pre></div>


<hr>
<span id="tree_002dequal"></span><div class="header">
<p>
Next: <a href="#copy_002dlist" accesskey="n" rel="next">copy-list</a>, Previous: <a href="#subst_003b-subst_002dif_003b-subst_002dif_002dnot_003b-nsubst_003b-nsubst_002dif_003b-nsubst_002dif_002dnot" accesskey="p" rel="prev">subst; subst-if; subst-if-not; nsubst; nsubst-if; nsubst-if-not</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">tree-equal</h4>
<span id="tree_002dequal-_0028Function_0029"></span><h3 class="heading">tree-equal (Function)</h3>
<span id="index-tree_002dequal-2"></span>
<span id="index-tree_002dequal"></span>



<span id="Syntax_003a-293"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-tree_002dequal-1">Function: <strong>tree-equal</strong> <em>tree-1 tree-2 <tt>&amp;key</tt> test test-not <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-282"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>tree-1</var>&mdash;a <i>tree</i>.
</p>
<p><var>tree-2</var>&mdash;a <i>tree</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-383"></span><h4 class="subsubheading">Description:</h4>

<p><code>tree-equal</code> tests whether two trees are of the same shape
and have the same leaves.  
<code>tree-equal</code> returns <i>true</i> if <var>tree-1</var> and <var>tree-2</var>  are 
both <i>atoms</i> and <i>satisfy the test</i>,
or if they are both <i>conses</i> and
the <i>car</i> of <var>tree-1</var> is <code>tree-equal</code> to
the <i>car</i> of <var>tree-2</var> and
the <i>cdr</i> of <var>tree-1</var> is <code>tree-equal</code> to
the <i>cdr</i> of <var>tree-2</var>.  
Otherwise, <code>tree-equal</code> returns <i>false</i>.
</p>
<p><code>tree-equal</code> recursively compares <i>conses</i> but not any 
other <i>objects</i> that have components.  
</p>
<p>The first argument to the <tt>:test</tt> or <tt>:test-not</tt> 
function is <var>tree-1</var> or a <i>car</i> or <i>cdr</i> of <var>tree-1</var>;
the second argument is <var>tree-2</var> or a <i>car</i> 
or <i>cdr</i> of <var>tree-2</var>.
</p>
<span id="Examples_003a-266"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq tree1 '(1 (1 2))
       tree2 '(1 (1 2))) <span class="roman">→</span> (1 (1 2))
 (tree-equal tree1 tree2) <span class="roman">→</span> <i>true</i>
 (eql tree1 tree2) <span class="roman">→</span> <i>false</i>
 (setq tree1 '('a ('b 'c))
       tree2 '('a ('b 'c))) <span class="roman">→</span> ('a ('b 'c)) 
<span class="roman">→</span> ((QUOTE A) ((QUOTE B) (QUOTE C)))
 (tree-equal tree1 tree2 :test 'eq) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Exceptional-Situations_003a-119"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The consequences are undefined 
if both <var>tree-1</var> and <var>tree-2</var> are circular.
</p>
<span id="See-Also_003a-309"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Data-and-Control-Flow.html#equal">equal</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-202"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>


<hr>
<span id="copy_002dlist"></span><div class="header">
<p>
Next: <a href="#list_003b-list_002a" accesskey="n" rel="next">list; list*</a>, Previous: <a href="#tree_002dequal" accesskey="p" rel="prev">tree-equal</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">copy-list</h4>
<span id="copy_002dlist-_0028Function_0029"></span><h3 class="heading">copy-list (Function)</h3>
<span id="index-copy_002dlist-2"></span>
<span id="index-copy_002dlist"></span>


<span id="Syntax_003a-294"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-copy_002dlist-1">Function: <strong>copy-list</strong> <em>list <span class="roman">→</span> copy</em></dt>
</dl>

<span id="Arguments-and-Values_003a-283"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>proper list</i> or a <i>dotted list</i>.
</p>
<p><var>copy</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-384"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>copy</i> of <var>list</var>.
If <var>list</var> is a <i>dotted list</i>,
the resulting <i>list</i> will also be a <i>dotted list</i>.
</p>
<p>Only the <i>list structure</i> of <var>list</var> is copied; 
the <i>elements</i> of the resulting list are 
the <i>same</i> as the corresponding <i>elements</i> of the given <var>list</var>.
</p>
<span id="Examples_003a-267"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq lst (list 1 (list 2 3))) <span class="roman">→</span> (1 (2 3))
 (setq slst lst) <span class="roman">→</span> (1 (2 3))
 (setq clst (copy-list lst)) <span class="roman">→</span> (1 (2 3))
 (eq slst lst) <span class="roman">→</span> <i>true</i>
 (eq clst lst) <span class="roman">→</span> <i>false</i>
 (equal clst lst) <span class="roman">→</span> <i>true</i>
 (rplaca lst &quot;one&quot;) <span class="roman">→</span> (&quot;one&quot; (2 3))
 slst <span class="roman">→</span> (&quot;one&quot; (2 3))
 clst <span class="roman">→</span> (1 (2 3))
 (setf (caadr lst) &quot;two&quot;) <span class="roman">→</span> &quot;two&quot;
 lst <span class="roman">→</span> (&quot;one&quot; (&quot;two&quot; 3))
 slst <span class="roman">→</span> (&quot;one&quot; (&quot;two&quot; 3))
 clst <span class="roman">→</span> (1 (&quot;two&quot; 3))
</pre></div>


<span id="Exceptional-Situations_003a-120"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The consequences are undefined if <var>list</var> is a <i>circular list</i>.
</p>
<span id="See-Also_003a-310"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#copy_002dalist">copy-alist</a>,
<a href="Sequences.html#copy_002dseq">copy-seq</a>,
<a href="#copy_002dtree">copy-tree</a>
</p>
<span id="Notes_003a-203"></span><h4 class="subsubheading">Notes:</h4>

<p>The copy created is <code>equal</code> to <var>list</var>, but not <code>eq</code>.
</p>

<hr>
<span id="list_003b-list_002a"></span><div class="header">
<p>
Next: <a href="#list_002dlength" accesskey="n" rel="next">list-length</a>, Previous: <a href="#copy_002dlist" accesskey="p" rel="prev">copy-list</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">list; list*</h4>
<span id="list_002c-list_002a-_0028Function_0029"></span><h3 class="heading">list, list* (Function)</h3>
<span id="index-list-10"></span>
<span id="index-list-7"></span>
<span id="index-list_002a-2"></span>
<span id="index-list_002a"></span>
<span id="list"></span>

<span id="Syntax_003a-295"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-list-8">Function: <strong>list</strong> <em><tt>&amp;rest</tt> objects <span class="roman">→</span> list</em></dt>
</dl>
<dl>
<dt id="index-list_002a-1">Function: <strong>list*</strong> <em><tt>&amp;rest</tt> objects+ <span class="roman">→</span> result</em></dt>
</dl>

<span id="Arguments-and-Values_003a-284"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>list</var>&mdash;a <i>list</i>.
</p>
<p><var>result</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-385"></span><h4 class="subsubheading">Description:</h4>

<p><code>list</code> returns a <i>list</i> containing the supplied <var>objects</var>.  
</p>
<p><code>list*</code> is like <code>list</code> except that 
the last <i>argument</i> to <code>list</code> becomes 
the <i>car</i> of the last <i>cons</i> constructed, while
the last <i>argument</i> to <code>list*</code> becomes 
the <i>cdr</i> of the last <i>cons</i> constructed.
Hence, any given call to <code>list*</code> always produces one fewer <i>conses</i>
than a call to <code>list</code> with the same number of arguments.
</p>
<p>If the last <i>argument</i> to <code>list*</code> is a <i>list</i>, 
the effect is to construct a new <i>list</i> which is similar, but
which has additional elements added to the front corresponding to
the preceding <i>arguments</i> of <code>list*</code>.
</p>
<p>If <code>list*</code> receives only one <var>object</var>,
that <var>object</var> is returned, regardless of whether or not it is a <i>list</i>.
</p>
<span id="Examples_003a-268"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (list 1) <span class="roman">→</span> (1)
 (list* 1) <span class="roman">→</span> 1
 (setq a 1) <span class="roman">→</span> 1
 (list a 2) <span class="roman">→</span> (1 2)
 '(a 2) <span class="roman">→</span> (A 2)
 (list 'a 2) <span class="roman">→</span> (A 2)
 (list* a 2) <span class="roman">→</span> (1 . 2)
 (list) <span class="roman">→</span> NIL ;<i>i.e.</i>, ()
 (setq a '(1 2)) <span class="roman">→</span> (1 2)
 (eq a (list* a)) <span class="roman">→</span> <i>true</i>
 (list 3 4 'a (car '(b . c)) (+ 6 -2)) <span class="roman">→</span> (3 4 A B 4)
 (list* 'a 'b 'c 'd) ≡ (cons 'a (cons 'b (cons 'c 'd))) <span class="roman">→</span> (A B C . D)
 (list* 'a 'b 'c '(d e f)) <span class="roman">→</span> (A B C D E F)
</pre></div>


<span id="See-Also_003a-311"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cons-_0028Function_0029">cons (Function)</a>
</p>
<span id="Notes_003a-204"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (list* <var>x</var>) ≡ <var>x</var>
</pre></div>



<hr>
<span id="list_002dlength"></span><div class="header">
<p>
Next: <a href="#listp" accesskey="n" rel="next">listp</a>, Previous: <a href="#list_003b-list_002a" accesskey="p" rel="prev">list; list*</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">list-length</h4>
<span id="list_002dlength-_0028Function_0029"></span><h3 class="heading">list-length (Function)</h3>
<span id="index-list_002dlength-2"></span>
<span id="index-list_002dlength"></span>


<span id="Syntax_003a-296"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-list_002dlength-1">Function: <strong>list-length</strong> <em>list <span class="roman">→</span> length</em></dt>
</dl>

<span id="Arguments-and-Values_003a-285"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>proper list</i> or a <i>circular list</i>.
</p>
<p><var>length</var>&mdash;a non-negative <i>integer</i>, or <code>nil</code>.
</p>
<span id="Description_003a-386"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the <i>length</i> of <var>list</var> if <var>list</var> is a <i>proper list</i>.
Returns <code>nil</code>&nbsp;<!-- /@w -->if <var>list</var> is a <i>circular list</i>.
</p>
<span id="Examples_003a-269"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (list-length '(a b c d)) <span class="roman">→</span> 4
 (list-length '(a (b c) d)) <span class="roman">→</span> 3
 (list-length '()) <span class="roman">→</span> 0
 (list-length nil) <span class="roman">→</span> 0
 (defun circular-list (&amp;rest elements)
   (let ((cycle (copy-list elements))) 
     (nconc cycle cycle)))
 (list-length (circular-list 'a 'b)) <span class="roman">→</span> NIL
 (list-length (circular-list 'a)) <span class="roman">→</span> NIL
 (list-length (circular-list)) <span class="roman">→</span> 0
</pre></div>


<span id="Exceptional-Situations_003a-121"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>list</var> is not a <i>proper list</i> or a <i>circular list</i>.
</p>
<span id="See-Also_003a-312"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Sequences.html#length">length</a>
</p>
<span id="Notes_003a-205"></span><h4 class="subsubheading">Notes:</h4>

<p><code>list-length</code> could be implemented as follows:
</p>
<div class="lisp">
<pre class="lisp"> (defun list-length (x)  
   (do ((n 0 (+ n 2))           ;Counter.
        (fast x (cddr fast))    ;Fast pointer: leaps by 2.
        (slow x (cdr slow)))    ;Slow pointer: leaps by 1.
       (nil)
     ;; If fast pointer hits the end, return the count.
     (when (endp fast) (return n))
     (when (endp (cdr fast)) (return (+ n 1)))
     ;; If fast pointer eventually equals slow pointer,
     ;;  then we must be stuck in a circular list.
     ;; (A deeper property is the converse: if we are
     ;;  stuck in a circular list, then eventually the
     ;;  fast pointer will equal the slow pointer.
     ;;  That fact justifies this implementation.)
     (when (and (eq fast slow) (&gt; n 0)) (return nil))))
 
</pre></div>



<hr>
<span id="listp"></span><div class="header">
<p>
Next: <a href="#make_002dlist" accesskey="n" rel="next">make-list</a>, Previous: <a href="#list_002dlength" accesskey="p" rel="prev">list-length</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">listp</h4>
<span id="listp-_0028Function_0029"></span><h3 class="heading">listp (Function)</h3>
<span id="index-listp-2"></span>
<span id="index-listp"></span>


<span id="Syntax_003a-297"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-listp-1">Function: <strong>listp</strong> <em>object <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-286"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-387"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>object</var> is of <i>type</i> <code>list</code>;
otherwise, returns <i>false</i>.
</p>
<span id="Examples_003a-270"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (listp nil) <span class="roman">→</span> <i>true</i>
 (listp (cons 1 2)) <span class="roman">→</span> <i>true</i>
 (listp (make-array 6)) <span class="roman">→</span> <i>false</i>
 (listp t) <span class="roman">→</span> <i>false</i>
</pre></div>


<span id="See-Also_003a-313"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#consp">consp</a>
</p>
<span id="Notes_003a-206"></span><h4 class="subsubheading">Notes:</h4>

<p>If <var>object</var> is a <i>cons</i>,
<code>listp</code> does not check whether <var>object</var> is a <i>proper list</i>;
it returns <i>true</i> for any kind of <i>list</i>.
</p>
<div class="lisp">
<pre class="lisp"> (listp <var>object</var>) ≡ (typep <var>object</var> 'list) ≡ (typep <var>object</var> '(or cons null))
</pre></div>



<hr>
<span id="make_002dlist"></span><div class="header">
<p>
Next: <a href="#push" accesskey="n" rel="next">push</a>, Previous: <a href="#listp" accesskey="p" rel="prev">listp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-list</h4>
<span id="make_002dlist-_0028Function_0029"></span><h3 class="heading">make-list (Function)</h3>
<span id="index-make_002dlist-2"></span>
<span id="index-make_002dlist"></span>


<span id="Syntax_003a-298"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dlist-1">Function: <strong>make-list</strong> <em>size <tt>&amp;key</tt> initial-element <span class="roman">→</span> list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-287"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>size</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>initial-element</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-388"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>list</i> of <var>length</var> given by <i>size</i>,
each of the <i>elements</i> of which is <var>initial-element</var>.
</p>
<span id="Examples_003a-271"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (make-list 5) <span class="roman">→</span> (NIL NIL NIL NIL NIL)
 (make-list 3 :initial-element 'rah) <span class="roman">→</span> (RAH RAH RAH)
 (make-list 2 :initial-element '(1 2 3)) <span class="roman">→</span> ((1 2 3) (1 2 3))
 (make-list 0) <span class="roman">→</span> NIL ;<i>i.e.</i>, ()
 (make-list 0 :initial-element 'new-element) <span class="roman">→</span> NIL 
</pre></div>


<span id="Exceptional-Situations_003a-122"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>size</var> is not a non-negative <i>integer</i>.
</p>
<span id="See-Also_003a-314"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cons-_0028Function_0029">cons (Function)</a>,
<a href="#list">list</a>
</p>

<hr>
<span id="push"></span><div class="header">
<p>
Next: <a href="#pop" accesskey="n" rel="next">pop</a>, Previous: <a href="#make_002dlist" accesskey="p" rel="prev">make-list</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">push</h4>
<span id="push-_0028Macro_0029"></span><h3 class="heading">push (Macro)</h3>
<span id="index-push-2"></span>
<span id="index-push"></span>


<span id="Syntax_003a-299"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-push-1">Macro: <strong>push</strong> <em>item place <span class="roman">→</span> new-place-value</em></dt>
</dl>

<span id="Arguments-and-Values_003a-288"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>. 
</p>
<p><var>place</var>&mdash;a <i>place</i>, the <i>value</i> of which may be any <i>object</i>.  
</p>
<p><var>new-place-value</var>&mdash;a <i>list</i> (the new <i>value</i> of <var>place</var>).
</p>
<span id="Description_003a-389"></span><h4 class="subsubheading">Description:</h4>

<p><code>push</code> prepends <var>item</var> to the <i>list</i> that is stored
in <var>place</var>, stores the resulting <i>list</i> in <var>place</var>, 
and returns the <i>list</i>.
</p>
<p>For information about the <i>evaluation</i> of <i>subforms</i> of <var>place</var>,
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
</p>
<span id="Examples_003a-272"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq llst '(nil)) <span class="roman">→</span> (NIL)
 (push 1 (car llst)) <span class="roman">→</span> (1)
 llst <span class="roman">→</span> ((1))
 (push 1 (car llst)) <span class="roman">→</span> (1 1)
 llst <span class="roman">→</span> ((1 1))
 (setq x '(a (b c) d)) <span class="roman">→</span> (A (B C) D)
 (push 5 (cadr x)) <span class="roman">→</span> (5 B C)  
 x <span class="roman">→</span> (A (5 B C) D)
</pre></div>


<span id="Side-Effects_003a-38"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The contents of <var>place</var> are modified.
</p>
<span id="See-Also_003a-315"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#pop">pop</a>,
<a href="#pushnew">pushnew</a>,
<a href="Data-and-Control-Flow.html#Generalized-Reference">Section 5.1 (Generalized Reference)</a>
</p>
<span id="Notes_003a-207"></span><h4 class="subsubheading">Notes:</h4>
<p>The effect of <code>(push <i>item</i> <i>place</i>)</code>
is equivalent to
</p>
<div class="lisp">
<pre class="lisp"> (setf place (cons <i>item</i> <i>place</i>))
</pre></div>

<p>except that the <i>subforms</i> of <var>place</var> 
are evaluated only once, and <var>item</var> is evaluated
before <var>place</var>.
</p>

<hr>
<span id="pop"></span><div class="header">
<p>
Next: <a href="#first_003b-second_003b-third_003b-fourth_003b-fifth_003b-sixth_003b-seventh_003b-eighth_003b-ninth_003b-ten_002b" accesskey="n" rel="next">first; second; third; fourth; fifth; sixth; seventh; eighth; ninth; ten+</a>, Previous: <a href="#push" accesskey="p" rel="prev">push</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">pop</h4>
<span id="pop-_0028Macro_0029"></span><h3 class="heading">pop (Macro)</h3>
<span id="index-pop-2"></span>
<span id="index-pop"></span>


<span id="Syntax_003a-300"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-pop-1">Macro: <strong>pop</strong> <em>place <span class="roman">→</span> element</em></dt>
</dl>

<span id="Arguments-and-Values_003a-289"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>place</var>&mdash;a <i>place</i>, the <i>value</i> of which is a <i>list</i>
(possibly, but necessarily, a <i>dotted list</i> or <i>circular list</i>).
</p>
<p><var>element</var>&mdash;an <i>object</i> (the <i>car</i> of the contents of <var>place</var>).
</p>
<span id="Description_003a-390"></span><h4 class="subsubheading">Description:</h4>

<p><code>pop</code> <i>reads</i> the <i>value</i> of <var>place</var>,
remembers the <i>car</i> of the <i>list</i> which was retrieved,
<i>writes</i> the <i>cdr</i> of the <i>list</i> back into the <var>place</var>,
and finally <i>yields</i> the <i>car</i> of the originally retrieved <i>list</i>.
</p>
<p>For information about the <i>evaluation</i> of <i>subforms</i> of <var>place</var>,
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
</p>
<span id="Examples_003a-273"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq stack '(a b c)) <span class="roman">→</span> (A B C)
 (pop stack) <span class="roman">→</span> A  
 stack <span class="roman">→</span> (B C)
 (setq llst '((1 2 3 4))) <span class="roman">→</span> ((1 2 3 4))
 (pop (car llst)) <span class="roman">→</span> 1
 llst <span class="roman">→</span> ((2 3 4))
</pre></div>


<span id="Side-Effects_003a-39"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The contents of <var>place</var> are modified.
</p>
<span id="See-Also_003a-316"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#push">push</a>,
<a href="#pushnew">pushnew</a>,
<a href="Data-and-Control-Flow.html#Generalized-Reference">Section 5.1 (Generalized Reference)</a>
</p>
<span id="Notes_003a-208"></span><h4 class="subsubheading">Notes:</h4>

<p>The effect of <code>(pop <var>place</var>)</code> is roughly equivalent to
</p>
<div class="lisp">
<pre class="lisp"> (prog1 (car <var>place</var>) (setf <var>place</var> (cdr <var>place</var>)))
</pre></div>

<p>except that the latter would evaluate any <i>subforms</i> of <var>place</var>
three times, while <code>pop</code> evaluates them only once.
</p>

<hr>
<span id="first_003b-second_003b-third_003b-fourth_003b-fifth_003b-sixth_003b-seventh_003b-eighth_003b-ninth_003b-ten_002b"></span><div class="header">
<p>
Next: <a href="#nth" accesskey="n" rel="next">nth</a>, Previous: <a href="#pop" accesskey="p" rel="prev">pop</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">first; second; third; fourth; fifth; sixth; seventh; eighth; ninth; ten+</h4>
<span id="first_002c-second_002c-third_002c-fourth_002c-fifth_002c-sixth_002c-seventh_002c-eighth_002c-ninth_002c-tenth-_0028Accessor_0029"></span><h3 class="heading">first, second, third, fourth, fifth, sixth, seventh, eighth, ninth, tenth (Accessor)</h3>
<span id="index-first-1"></span>
<span id="index-first"></span>
<span id="index-second-1"></span>
<span id="index-second"></span>
<span id="index-third-1"></span>
<span id="index-third"></span>
<span id="index-fourth-1"></span>
<span id="index-fourth"></span>
<span id="index-fifth-1"></span>
<span id="index-fifth"></span>
<span id="index-sixth-1"></span>
<span id="index-sixth"></span>
<span id="index-seventh-1"></span>
<span id="index-seventh"></span>
<span id="index-eighth-1"></span>
<span id="index-eighth"></span>
<span id="index-ninth-1"></span>
<span id="index-ninth"></span>
<span id="index-tenth-1"></span>
<span id="index-tenth"></span>
<span id="first"></span>

<span id="Syntax_003a-301"></span><h4 class="subsubheading">Syntax:</h4>

<p>first list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
second list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
third list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
fourth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
fifth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
sixth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
seventh list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
eighth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
ninth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
tenth list <span class="roman">→</span> object  |  (setf (list object) new-object)<br>
<br>
</p>

<span id="Arguments-and-Values_003a-290"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>, 
which might be a <i>dotted list</i> or a <i>circular list</i>.
</p>
<p><var>object</var>, <var>new-object</var>&mdash;an <var>object</var>.
</p>
<span id="Description_003a-391"></span><h4 class="subsubheading">Description:</h4>

<p>The functions
<code>first</code>,
<code>second</code>,
<code>third</code>, 
<code>fourth</code>, 
<code>fifth</code>,
<code>sixth</code>,
<code>seventh</code>,
<code>eighth</code>, 
<code>ninth</code>,
and
<code>tenth</code>
<var>access</var> the first, second, third, fourth, fifth, sixth, seventh, eighth,
ninth, and tenth <i>elements</i> of <var>list</var>, respectively.
Specifically,
</p>
<div class="lisp">
<pre class="lisp"> (first <var>list</var>)    ≡  (car <var>list</var>)
 (second <var>list</var>)   ≡  (car (cdr <var>list</var>))
 (third <var>list</var>)    ≡  (car (cddr <var>list</var>))
 (fourth <var>list</var>)   ≡  (car (cdddr <var>list</var>))
 (fifth <var>list</var>)    ≡  (car (cddddr <var>list</var>))
 (sixth <var>list</var>)    ≡  (car (cdr (cddddr <var>list</var>)))
 (seventh <var>list</var>)  ≡  (car (cddr (cddddr <var>list</var>)))
 (eighth <var>list</var>)   ≡  (car (cdddr (cddddr <var>list</var>)))
 (ninth <var>list</var>)    ≡  (car (cddddr (cddddr <var>list</var>)))
 (tenth <var>list</var>)    ≡  (car (cdr (cddddr (cddddr <var>list</var>))))
</pre></div>


<p><code>setf</code> can also be used with any of these functions to change an
existing component.  The same equivalences apply.  For example:
</p>
<div class="lisp">
<pre class="lisp"> (setf (fifth <var>list</var>) <var>new-object</var>) ≡ (setf (car (cddddr <var>list</var>)) <var>new-object</var>)
</pre></div>


<span id="Examples_003a-274"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq lst '(1 2 3 (4 5 6) ((V)) vi 7 8 9 10)) 
<span class="roman">→</span> (1 2 3 (4 5 6) ((V)) VI 7 8 9 10)
 (first lst) <span class="roman">→</span> 1
 (tenth lst) <span class="roman">→</span> 10
 (fifth lst) <span class="roman">→</span> ((V))
 (second (fourth lst)) <span class="roman">→</span> 5
 (sixth '(1 2 3)) <span class="roman">→</span> NIL
 (setf (fourth lst) &quot;four&quot;) <span class="roman">→</span> &quot;four&quot;
 lst <span class="roman">→</span> (1 2 3 &quot;four&quot; ((V)) VI 7 8 9 10)
</pre></div>


<span id="See-Also_003a-317"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#car">car</a>, <a href="#nth">nth</a>
</p>
<span id="Notes_003a-209"></span><h4 class="subsubheading">Notes:</h4>

<p><code>first</code>  is functionally equivalent to <code>car</code>,
<code>second</code> is functionally equivalent to <code>cadr</code>,
<code>third</code>  is functionally equivalent to <code>caddr</code>, and 
<code>fourth</code> is functionally equivalent to <code>cadddr</code>.
</p>
<p>The ordinal numbering used here is one-origin,
as opposed to the zero-origin numbering used by <code>nth</code>:
</p>
<div class="lisp">
<pre class="lisp"> (fifth x) ≡ (nth 4 x)
</pre></div>



<hr>
<span id="nth"></span><div class="header">
<p>
Next: <a href="#endp" accesskey="n" rel="next">endp</a>, Previous: <a href="#first_003b-second_003b-third_003b-fourth_003b-fifth_003b-sixth_003b-seventh_003b-eighth_003b-ninth_003b-ten_002b" accesskey="p" rel="prev">first; second; third; fourth; fifth; sixth; seventh; eighth; ninth; ten+</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">nth</h4>
<span id="nth-_0028Accessor_0029"></span><h3 class="heading">nth (Accessor)</h3>
<span id="index-nth-2"></span>
<span id="index-nth"></span>


<span id="Syntax_003a-302"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-nth-1">Function: <strong>nth</strong> <em>n list <span class="roman">→</span> object</em></dt>
</dl>
<p><tt>(setf (nth n list) new-object)</tt>
</p>
<span id="Arguments-and-Values_003a-291"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>n</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i> or a <i>circular list</i>.
</p>
<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>new-object</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-392"></span><h4 class="subsubheading">Description:</h4>

<p><code>nth</code> locates the <var>n</var>th element of <var>list</var>,
where the <i>car</i> of the <var>list</var> is the &ldquo;zeroth&rdquo; element.
Specifically,
</p>
<div class="lisp">
<pre class="lisp"> (nth <var>n</var> <var>list</var>) ≡ (car (nthcdr <var>n</var> <var>list</var>))
</pre></div>


<p><code>nth</code> may be used to specify a <var>place</var> to <code>setf</code>.
Specifically,
</p>
<div class="lisp">
<pre class="lisp"> (setf (nth <var>n</var> <var>list</var>) <var>new-object</var>) ≡ (setf (car (nthcdr <var>n</var> <var>list</var>)) <var>new-object</var>)
</pre></div>


<span id="Examples_003a-275"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (nth 0 '(foo bar baz)) <span class="roman">→</span> FOO
 (nth 1 '(foo bar baz)) <span class="roman">→</span> BAR
 (nth 3 '(foo bar baz)) <span class="roman">→</span> NIL
 (setq 0-to-3 (list 0 1 2 3)) <span class="roman">→</span> (0 1 2 3)
 (setf (nth 2 0-to-3) &quot;two&quot;) <span class="roman">→</span> &quot;two&quot;
 0-to-3 <span class="roman">→</span> (0 1 &quot;two&quot; 3)
</pre></div>


<span id="See-Also_003a-318"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Sequences.html#elt">elt</a>,
<a href="#first">first</a>,
<a href="#nthcdr">nthcdr</a>
</p>

<hr>
<span id="endp"></span><div class="header">
<p>
Next: <a href="#null-_0028Function_0029" accesskey="n" rel="next">null (Function)</a>, Previous: <a href="#nth" accesskey="p" rel="prev">nth</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">endp</h4>
<span id="endp-_0028Function_0029"></span><h3 class="heading">endp (Function)</h3>
<span id="index-endp-2"></span>
<span id="index-endp"></span>


<span id="Syntax_003a-303"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-endp-1">Function: <strong>endp</strong> <em>list <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-292"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i> or a <i>circular list</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-393"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i>  if <var>list</var> is the <i>empty list</i>.
Returns <i>false</i> if <var>list</var> is a <i>cons</i>.
</p>
<span id="Examples_003a-276"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (endp nil) <span class="roman">→</span> <i>true</i>
 (endp '(1 2)) <span class="roman">→</span> <i>false</i>
 (endp (cddr '(1 2))) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Exceptional-Situations_003a-123"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>list</var> is not a <i>list</i>.
</p>
<span id="Notes_003a-210"></span><h4 class="subsubheading">Notes:</h4>

<p>The purpose of <code>endp</code> is to test for the end of <var>proper list</var>.
Since <code>endp</code> does not descend into a <i>cons</i>, 
it is well-defined to pass it a <i>dotted list</i>.
However, if shorter &ldquo;lists&rdquo; are iteratively produced 
by calling <code>cdr</code> on such a <i>dotted list</i> 
and those &ldquo;lists&rdquo; are tested with <code>endp</code>,
a situation that has undefined consequences will eventually result 
when the <i>non-nil</i> <i>atom</i> (which is not in fact a <i>list</i>)
finally becomes the argument to <code>endp</code>.
Since this is the usual way in which <code>endp</code> is used,
it is conservative programming style 
and consistent with the intent of <code>endp</code>
to treat <code>endp</code> as simply a function on <i>proper lists</i> 
which happens not to enforce an argument type of <i>proper list</i> except
when the argument is <i>atomic</i>.
</p>

<hr>
<span id="null-_0028Function_0029"></span><div class="header">
<p>
Next: <a href="#nconc" accesskey="n" rel="next">nconc</a>, Previous: <a href="#endp" accesskey="p" rel="prev">endp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">null (Function)</h4>
<span id="null-_0028Function_0029-1"></span><h3 class="heading">null (Function)</h3>
<span id="index-null-5"></span>
<span id="index-null-2"></span>



<span id="Syntax_003a-304"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-null-3">Function: <strong>null</strong> <em>object <span class="roman">→</span> boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-293"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>boolean</var>&mdash;a <i>boolean</i>.
</p>
<span id="Description_003a-394"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <code>t</code> if <var>object</var> is the <i>empty list</i>; otherwise, returns <code>nil</code>.
</p>
<span id="Examples_003a-277"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (null '()) <span class="roman">→</span> T
 (null nil) <span class="roman">→</span> T
 (null t) <span class="roman">→</span> NIL
 (null 1) <span class="roman">→</span> NIL
</pre></div>



<span id="See-Also_003a-319"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Data-and-Control-Flow.html#not-_0028Function_0029">not (Function)</a>
</p>
<span id="Notes_003a-211"></span><h4 class="subsubheading">Notes:</h4>

<p><code>null</code> is intended to be used to test for the <i>empty list</i>
whereas <code>not</code> is intended to be used to invert a <i>boolean</i>
(or <i>generalized boolean</i>).
Operationally, <code>null</code> and <code>not</code> compute the same result;
which to use is a matter of style.
</p>
<div class="lisp">
<pre class="lisp"> (null <var>object</var>) ≡ (typep <var>object</var> 'null) ≡ (eq <var>object</var> '())
</pre></div>



<hr>
<span id="nconc"></span><div class="header">
<p>
Next: <a href="#append" accesskey="n" rel="next">append</a>, Previous: <a href="#null-_0028Function_0029" accesskey="p" rel="prev">null (Function)</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">nconc</h4>
<span id="nconc-_0028Function_0029"></span><h3 class="heading">nconc (Function)</h3>
<span id="index-nconc-3"></span>
<span id="index-nconc-1"></span>


<span id="Syntax_003a-305"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-nconc-2">Function: <strong>nconc</strong> <em><tt>&amp;rest</tt> lists <span class="roman">→</span> concatenated-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-294"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;each but the last must be a <i>list</i> 
(which might be a <var>dotted list</var> but must not be a <i>circular list</i>);
the last <var>list</var> may be any <i>object</i>.
</p>
<p><var>concatenated-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-395"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>list</i> that is the concatenation of <var>lists</var>.
If no <var>lists</var> are supplied, <code>(nconc)</code> returns <code>nil</code>.
<code>nconc</code> is defined using the following recursive relationship:
</p>
<div class="lisp">
<pre class="lisp"> (nconc) <span class="roman">→</span> ()
 (nconc nil . <var>lists</var>) ≡ (nconc . <var>lists</var>)
 (nconc <var>list</var>) <span class="roman">→</span> <var>list</var>
 (nconc <var>list-1</var> <var>list-2</var>) ≡ (progn (rplacd (last <var>list-1</var>) <var>list-2</var>) <var>list-1</var>)
 (nconc <var>list-1</var> <var>list-2</var> . <var>lists</var>) ≡ (nconc (nconc <var>list-1</var> <var>list-2</var>) . <var>lists</var>)
</pre></div>


<span id="Examples_003a-278"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (nconc) <span class="roman">→</span> NIL
 (setq x '(a b c)) <span class="roman">→</span> (A B C)
 (setq y '(d e f)) <span class="roman">→</span> (D E F)
 (nconc x y) <span class="roman">→</span> (A B C D E F)
 x <span class="roman">→</span> (A B C D E F)
</pre></div>

<p>Note, in the example, that the value of <code>x</code> is now different,
since its last <i>cons</i> 
has been <code>rplacd</code>&rsquo;d to the value of <code>y</code>.
If <code>(nconc x y)</code> were evaluated again,
it would yield a piece of a <i>circular list</i>,
whose printed representation would be
<code>(A B C D E F D E F D E F ...)</code>, repeating forever;
if the <code>*print-circle*</code> switch were <i>non-nil</i>,
it would be printed as <code>(A B C . #1=(D E F . #1#))</code>.
</p>
<div class="lisp">
<pre class="lisp"> (setq foo (list 'a 'b 'c 'd 'e)
       bar (list 'f 'g 'h 'i 'j)
       baz (list 'k 'l 'm)) <span class="roman">→</span> (K L M)
 (setq foo (nconc foo bar baz)) <span class="roman">→</span> (A B C D E F G H I J K L M)
 foo <span class="roman">→</span> (A B C D E F G H I J K L M)
 bar <span class="roman">→</span> (F G H I J K L M)
 baz <span class="roman">→</span> (K L M)

 (setq foo (list 'a 'b 'c 'd 'e)
       bar (list 'f 'g 'h 'i 'j)
       baz (list 'k 'l 'm)) <span class="roman">→</span> (K L M)
 (setq foo (nconc nil foo bar nil baz)) <span class="roman">→</span> (A B C D E F G H I J K L M) 
 foo <span class="roman">→</span> (A B C D E F G H I J K L M)
 bar <span class="roman">→</span> (F G H I J K L M)
 baz <span class="roman">→</span> (K L M)
</pre></div>



<span id="Side-Effects_003a-40"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>lists</var> are modified rather than copied.
</p>
<span id="See-Also_003a-320"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#append">append</a>, <a href="Sequences.html#concatenate">concatenate</a>
</p>

<hr>
<span id="append"></span><div class="header">
<p>
Next: <a href="#revappend_003b-nreconc" accesskey="n" rel="next">revappend; nreconc</a>, Previous: <a href="#nconc" accesskey="p" rel="prev">nconc</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">append</h4>
<span id="append-_0028Function_0029"></span><h3 class="heading">append (Function)</h3>
<span id="index-append-3"></span>
<span id="index-append-1"></span>


<span id="Syntax_003a-306"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-append-2">Function: <strong>append</strong> <em><tt>&amp;rest</tt> lists <span class="roman">→</span> result</em></dt>
</dl>

<span id="Arguments-and-Values_003a-295"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;each must be a <i>proper list</i> except the last,
which may be any <i>object</i>.
</p>
<p><var>result</var>&mdash;an <i>object</i>.  This will be a <i>list</i>
unless the last <var>list</var> was not a <i>list</i>
and all preceding <var>lists</var> were <i>null</i>.
</p>
<span id="Description_003a-396"></span><h4 class="subsubheading">Description:</h4>

<p><code>append</code> returns a new <var>list</var> that is the concatenation of
the copies.  <var>lists</var> are left unchanged; the <i>list structure</i> 
of each of <var>lists</var> except the last is copied.
The last argument is not copied; it becomes the <i>cdr</i> of the 
final <i>dotted pair</i> of the concatenation of the preceding <var>lists</var>,
or is returned directly if there are no preceding
<i>non-empty</i> 
<var>lists</var>.
</p>
<span id="Examples_003a-279"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (append '(a b c) '(d e f) '() '(g)) <span class="roman">→</span> (A B C D E F G)
 (append '(a b c) 'd) <span class="roman">→</span> (A B C . D)
 (setq lst '(a b c)) <span class="roman">→</span> (A B C)
 (append lst '(d)) <span class="roman">→</span> (A B C D)
 lst <span class="roman">→</span> (A B C)
 (append) <span class="roman">→</span> NIL
 (append 'a) <span class="roman">→</span> A
</pre></div>


<span id="See-Also_003a-321"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#nconc">nconc</a>, <a href="Sequences.html#concatenate">concatenate</a>
</p>

<hr>
<span id="revappend_003b-nreconc"></span><div class="header">
<p>
Next: <a href="#butlast_003b-nbutlast" accesskey="n" rel="next">butlast; nbutlast</a>, Previous: <a href="#append" accesskey="p" rel="prev">append</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">revappend; nreconc</h4>
<span id="revappend_002c-nreconc-_0028Function_0029"></span><h3 class="heading">revappend, nreconc (Function)</h3>
<span id="index-revappend-2"></span>
<span id="index-revappend"></span>
<span id="index-nreconc-2"></span>
<span id="index-nreconc"></span>



<span id="Syntax_003a-307"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-revappend-1">Function: <strong>revappend</strong> <em>list tail <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nreconc-1">Function: <strong>nreconc</strong> <em>list tail <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-296"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>proper list</i>.
</p>
<p><var>tail</var>&mdash;an <i>object</i>. 
</p>
<p><var>result-list</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-397"></span><h4 class="subsubheading">Description:</h4>

<p><code>revappend</code> constructs a <i>copy</i><sub>2</sub>
but with the <i>elements</i> in reverse order.  It then appends (as if
by <code>nconc</code>) the <var>tail</var> to that reversed list and returns the result.
</p>
<p><code>nreconc</code> reverses the order of <i>elements</i> in <var>list</var>
(as if by <code>nreverse</code>).  It then appends (as if by <code>nconc</code>)
the <var>tail</var> to that reversed list and returns the result.
</p>
<p>The resulting <i>list</i> shares <i>list structure</i> with <var>tail</var>.
</p>
<span id="Examples_003a-280"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (let ((list-1 (list 1 2 3))
       (list-2 (list 'a 'b 'c)))
   (print (revappend list-1 list-2))
   (print (equal list-1 '(1 2 3)))
   (print (equal list-2 '(a b c))))
▷ (3 2 1 A B C) 
▷ T
▷ T
<span class="roman">→</span> T

 (revappend '(1 2 3) '()) <span class="roman">→</span> (3 2 1)
 (revappend '(1 2 3) '(a . b)) <span class="roman">→</span> (3 2 1 A . B)
 (revappend '() '(a b c)) <span class="roman">→</span> (A B C)
 (revappend '(1 2 3) 'a) <span class="roman">→</span> (3 2 1 . A)
 (revappend '() 'a) <span class="roman">→</span> A   ;degenerate case

 (let ((list-1 '(1 2 3))
       (list-2 '(a b c)))
   (print (nreconc list-1 list-2))
   (print (equal list-1 '(1 2 3)))
   (print (equal list-2 '(a b c))))
▷ (3 2 1 A B C) 
▷ NIL
▷ T
<span class="roman">→</span> T

</pre></div>


<span id="Side-Effects_003a-41"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>revappend</code> does not modify either of its <i>arguments</i>.
<code>nreconc</code> is permitted to modify <var>list</var> but not <var>tail</var>.
</p>
<p>Although it might be implemented differently,
<code>nreconc</code> is constrained to have side-effect behavior equivalent to:
</p>
<div class="lisp">
<pre class="lisp"> (nconc (nreverse <var>list</var>) <var>tail</var>)
</pre></div>


<span id="See-Also_003a-322"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Sequences.html#reverse">reverse</a>,
<a href="Sequences.html#nreverse">nreverse</a>,
<a href="#nconc">nconc</a>
</p>
<span id="Notes_003a-212"></span><h4 class="subsubheading">Notes:</h4>

<p>The following functional equivalences are true, 
although good <i>implementations</i> will typically use a faster algorithm for
achieving the same effect:
</p>
<div class="lisp">
<pre class="lisp"> (revappend <var>list</var> <var>tail</var>) ≡ (nconc (reverse <var>list</var>) <var>tail</var>)
 (nreconc <var>list</var> <var>tail</var>) ≡ (nconc (nreverse <var>list</var>) <var>tail</var>)
</pre></div>




<hr>
<span id="butlast_003b-nbutlast"></span><div class="header">
<p>
Next: <a href="#last" accesskey="n" rel="next">last</a>, Previous: <a href="#revappend_003b-nreconc" accesskey="p" rel="prev">revappend; nreconc</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">butlast; nbutlast</h4>
<span id="butlast_002c-nbutlast-_0028Function_0029"></span><h3 class="heading">butlast, nbutlast (Function)</h3>
<span id="index-butlast-2"></span>
<span id="index-butlast"></span>
<span id="index-nbutlast-2"></span>
<span id="index-nbutlast"></span>
<span id="butlast"></span>

<span id="Syntax_003a-308"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-butlast-1">Function: <strong>butlast</strong> <em>list <tt>&amp;optional</tt> n <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nbutlast-1">Function: <strong>nbutlast</strong> <em>list <tt>&amp;optional</tt> n <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-297"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>, 
which might be a <i>dotted list</i> but must not be a <i>circular list</i>.
</p>
<p><var>n</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-398"></span><h4 class="subsubheading">Description:</h4>

<p><code>butlast</code> returns a copy of <var>list</var> from which the last
<var>n</var>
conses
have been omitted.
If <var>n</var> is not supplied, its value is 1.  
If there are fewer than <var>n</var> 
conses
in <var>list</var>,
<code>nil</code>&nbsp;<!-- /@w -->is returned and, in the case of <code>nbutlast</code>,
<var>list</var> is not modified.  
</p>
<p><code>nbutlast</code> is like <code>butlast</code>, but <code>nbutlast</code> 
may modify <var>list</var>.
It changes the <i>cdr</i> of
the <i>cons</i> <var>n</var>+1 from the end of the <var>list</var> to <code>nil</code>.  
</p>
<span id="Examples_003a-281"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq lst '(1 2 3 4 5 6 7 8 9)) <span class="roman">→</span> (1 2 3 4 5 6 7 8 9)
 (butlast lst) <span class="roman">→</span> (1 2 3 4 5 6 7 8)
 (butlast lst 5) <span class="roman">→</span> (1 2 3 4)
 (butlast lst (+ 5 5)) <span class="roman">→</span> NIL
 lst <span class="roman">→</span> (1 2 3 4 5 6 7 8 9)
 (nbutlast lst 3) <span class="roman">→</span> (1 2 3 4 5 6)
 lst <span class="roman">→</span> (1 2 3 4 5 6)
 (nbutlast lst 99) <span class="roman">→</span> NIL
 lst <span class="roman">→</span> (1 2 3 4 5 6)
 (butlast '(a b c d)) <span class="roman">→</span> (A B C)
 (butlast '((a b) (c d))) <span class="roman">→</span> ((A B))
 (butlast '(a)) <span class="roman">→</span> NIL
 (butlast nil) <span class="roman">→</span> NIL
 (setq foo (list 'a 'b 'c 'd)) <span class="roman">→</span> (A B C D)
 (nbutlast foo) <span class="roman">→</span> (A B C)
 foo <span class="roman">→</span> (A B C)
 (nbutlast (list 'a)) <span class="roman">→</span> NIL
 (nbutlast '()) <span class="roman">→</span> NIL
</pre></div>


<span id="Exceptional-Situations_003a-124"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>list</var> is not a <i>proper list</i> or a <i>dotted list</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>n</var> is not a non-negative <i>integer</i>.
</p>
<span id="Notes_003a-213"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (butlast <var>list</var> <var>n</var>) ≡ (ldiff <var>list</var> (last <var>list</var> <var>n</var>))
</pre></div>



<hr>
<span id="last"></span><div class="header">
<p>
Next: <a href="#ldiff_003b-tailp" accesskey="n" rel="next">ldiff; tailp</a>, Previous: <a href="#butlast_003b-nbutlast" accesskey="p" rel="prev">butlast; nbutlast</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">last</h4>
<span id="last-_0028Function_0029"></span><h3 class="heading">last (Function)</h3>
<span id="index-last-2"></span>
<span id="index-last"></span>
      

<span id="Syntax_003a-309"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-last-1">Function: <strong>last</strong> <em>list <tt>&amp;optional</tt> n <span class="roman">→</span> tail</em></dt>
</dl>

<span id="Arguments-and-Values_003a-298"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i> but must not be a <i>circular list</i>.
</p>
<p><var>n</var>&mdash;a non-negative <i>integer</i>.
The default is <code>1</code>.
</p>
<p><var>tail</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-399"></span><h4 class="subsubheading">Description:</h4>

<p><code>last</code> returns the last <var>n</var> <i>conses</i> 
(not the last <var>n</var> elements) of <var>list</var>).
If <var>list</var> is (), <code>last</code> returns ().
</p>
<p>If <var>n</var> is zero,
the atom that terminates <var>list</var> is returned.
If <var>n</var> is greater than or equal to the number of <i>cons</i> cells in <var>list</var>,
the result is <var>list</var>.
</p>
<span id="Examples_003a-282"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (last nil) <span class="roman">→</span> NIL
 (last '(1 2 3)) <span class="roman">→</span> (3)
 (last '(1 2 . 3)) <span class="roman">→</span> (2 . 3)
 (setq x (list 'a 'b 'c 'd)) <span class="roman">→</span> (A B C D)
 (last x) <span class="roman">→</span> (D)
 (rplacd (last x) (list 'e 'f)) x <span class="roman">→</span> (A B C D E F)
 (last x) <span class="roman">→</span> (F)

 (last '(a b c))   <span class="roman">→</span> (C)

 (last '(a b c) 0) <span class="roman">→</span> ()
 (last '(a b c) 1) <span class="roman">→</span> (C)
 (last '(a b c) 2) <span class="roman">→</span> (B C)
 (last '(a b c) 3) <span class="roman">→</span> (A B C)
 (last '(a b c) 4) <span class="roman">→</span> (A B C)

 (last '(a . b) 0) <span class="roman">→</span> B
 (last '(a . b) 1) <span class="roman">→</span> (A . B)
 (last '(a . b) 2) <span class="roman">→</span> (A . B)
</pre></div>


<span id="Exceptional-Situations_003a-125"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The consequences are undefined if <var>list</var> is a <i>circular list</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>n</var> is not a non-negative <i>integer</i>.
</p>
<span id="See-Also_003a-323"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#butlast">butlast</a>,
<a href="#nth">nth</a>
</p>
<span id="Notes_003a-214"></span><h4 class="subsubheading">Notes:</h4>

<p>The following code could be used to define <code>last</code>.
</p>
<div class="lisp">
<pre class="lisp"> (defun last (list &amp;optional (n 1))
   (check-type n (integer 0))
   (do ((l list (cdr l))
        (r list)
        (i 0 (+ i 1)))
       ((atom l) r)
     (if (&gt;= i n) (pop r))))
</pre></div>


<hr>
<span id="ldiff_003b-tailp"></span><div class="header">
<p>
Next: <a href="#nthcdr" accesskey="n" rel="next">nthcdr</a>, Previous: <a href="#last" accesskey="p" rel="prev">last</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">ldiff; tailp</h4>
<span id="ldiff_002c-tailp-_0028Function_0029"></span><h3 class="heading">ldiff, tailp (Function)</h3>
<span id="index-ldiff-2"></span>
<span id="index-ldiff"></span>
<span id="index-tailp-2"></span>
<span id="index-tailp"></span>


<span id="Syntax_003a-310"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-ldiff-1">Function: <strong>ldiff</strong> <em>list object <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-tailp-1">Function: <strong>tailp</strong> <em>object list <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-299"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i>.
</p>
<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-400"></span><h4 class="subsubheading">Description:</h4>

<p>If <var>object</var> is the <i>same</i> as some <i>tail</i> of <var>list</var>,
<code>tailp</code> returns <i>true</i>;
otherwise, it returns <i>false</i>.
</p>
<p>If <var>object</var> is the <i>same</i> as some <i>tail</i> of <var>list</var>,
<code>ldiff</code> returns a <i>fresh</i> <i>list</i> 
of the <i>elements</i> of <i>list</i> 
that precede <code>object</code> in the <i>list structure</i> of <var>list</var>;
otherwise, it returns a <i>copy</i><sub>2</sub>
</p>
<span id="Examples_003a-283"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (let ((lists '#((a b c) (a b c . d))))
   (dotimes (i (length lists)) ()
     (let ((list (aref lists i)))
       (format t &quot;~2&amp;list=~S ~21T(tailp object list)~
                  ~44T(ldiff list object)~%&quot; list)
         (let ((objects (vector list (cddr list) (copy-list (cddr list))
                                '(f g h) '() 'd 'x)))
           (dotimes (j (length objects)) ()
             (let ((object (aref objects j)))
               (format t &quot;~&amp; object=~S ~21T~S ~44T~S&quot;
                       object (tailp object list) (ldiff list object))))))))
▷ 
▷ list=(A B C)         (tailp object list)    (ldiff list object)
▷  object=(A B C)      T                      NIL
▷  object=(C)          T                      (A B)
▷  object=(C)          NIL                    (A B C)
▷  object=(F G H)      NIL                    (A B C)
▷  object=NIL          T                      (A B C)
▷  object=D            NIL                    (A B C)
▷  object=X            NIL                    (A B C)
▷ 
▷ list=(A B C . D)     (tailp object list)    (ldiff list object)
▷  object=(A B C . D)  T                      NIL
▷  object=(C . D)      T                      (A B)
▷  object=(C . D)      NIL                    (A B C . D)
▷  object=(F G H)      NIL                    (A B C . D)
▷  object=NIL          NIL                    (A B C . D)
▷  object=D            T                      (A B C)
▷  object=X            NIL                    (A B C . D)
<span class="roman">→</span> NIL
</pre></div>


<span id="Side-Effects_003a-42"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Neither <code>ldiff</code> nor <code>tailp</code> modifies either of its <i>arguments</i>.
</p>
<span id="Exceptional-Situations_003a-126"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>list</var> is not a <i>proper list</i> or a <i>dotted list</i>.
</p>
<span id="See-Also_003a-324"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#set_002ddifference">set-difference</a>
</p>
<span id="Notes_003a-215"></span><h4 class="subsubheading">Notes:</h4>

<p>If the <var>list</var> is a <i>circular list</i>,
<code>tailp</code> will reliably <i>yield</i> a <i>value</i> 
only if the given <var>object</var> is in fact a <i>tail</i> of <var>list</var>.
Otherwise, the consequences are unspecified:
a given <i>implementation</i> which detects the circularity must return <i>false</i>,
but since an <i>implementation</i> is not obliged to detect such a <i>situation</i>,
<code>tailp</code> might just loop indefinitely without returning in that case.
</p>

<p><code>tailp</code> could be defined as follows:
</p>
<div class="lisp">
<pre class="lisp"> (defun tailp (object list)
   (do ((list list (cdr list)))
       ((atom list) (eql list object))
      (if (eql object list)
          (return t))))
</pre></div>


<p>and <code>ldiff</code> could be defined by:
</p>
<div class="lisp">
<pre class="lisp">(defun ldiff (list object)
  (do ((list list (cdr list))
       (r '() (cons (car list) r)))
      ((atom list)
       (if (eql list object) (nreverse r) (nreconc r list)))
    (when (eql object list)
      (return (nreverse r)))))
</pre></div>





<hr>
<span id="nthcdr"></span><div class="header">
<p>
Next: <a href="#rest" accesskey="n" rel="next">rest</a>, Previous: <a href="#ldiff_003b-tailp" accesskey="p" rel="prev">ldiff; tailp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">nthcdr</h4>
<span id="nthcdr-_0028Function_0029"></span><h3 class="heading">nthcdr (Function)</h3>
<span id="index-nthcdr-2"></span>
<span id="index-nthcdr"></span>


<span id="Syntax_003a-311"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-nthcdr-1">Function: <strong>nthcdr</strong> <em>n list <span class="roman">→</span> tail</em></dt>
</dl>

<span id="Arguments-and-Values_003a-300"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>n</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i> or a <i>circular list</i>.
</p>
<p><var>tail</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-401"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the <i>tail</i> of <var>list</var> that would be obtained by calling <code>cdr</code>
<var>n</var> times in succession.
</p>
<span id="Examples_003a-284"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (nthcdr 0 '()) <span class="roman">→</span> NIL
 (nthcdr 3 '()) <span class="roman">→</span> NIL
 (nthcdr 0 '(a b c)) <span class="roman">→</span> (A B C)
 (nthcdr 2 '(a b c)) <span class="roman">→</span> (C)
 (nthcdr 4 '(a b c)) <span class="roman">→</span> ()
 (nthcdr 1 '(0 . 1)) <span class="roman">→</span> 1

 (locally (declare (optimize (safety 3)))
   (nthcdr 3 '(0 . 1)))
 Error: Attempted to take CDR of 1.
</pre></div>


<span id="Exceptional-Situations_003a-127"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>n</var> is not a non-negative <i>integer</i>.
</p>
<p>For <var>n</var> being an integer greater than <code>1</code>,
the error checking done by <code>(nthcdr <var>n</var> <var>list</var>)</code>
is the same as for <code>(nthcdr (- <var>n</var> 1) (cdr <var>list</var>))</code>;
see the <i>function</i> <a href="#cdr">cdr</a>.
</p>
<span id="See-Also_003a-325"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cdr">cdr</a>,
<a href="#nth">nth</a>,
<a href="#rest">rest</a>
</p>

<hr>
<span id="rest"></span><div class="header">
<p>
Next: <a href="#member_003b-member_002dif_003b-member_002dif_002dnot" accesskey="n" rel="next">member; member-if; member-if-not</a>, Previous: <a href="#nthcdr" accesskey="p" rel="prev">nthcdr</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">rest</h4>
<span id="rest-_0028Accessor_0029"></span><h3 class="heading">rest (Accessor)</h3>
<span id="index-rest-2"></span>
<span id="index-rest"></span>


<span id="Syntax_003a-312"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-rest-1">Function: <strong>rest</strong> <em>list <span class="roman">→</span> tail</em></dt>
</dl>
<p><tt>(setf (rest list) new-tail)</tt>
</p>
<span id="Arguments-and-Values_003a-301"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list</var>&mdash;a <i>list</i>,
which might be a <i>dotted list</i> or a <i>circular list</i>.
</p>
<p><var>tail</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-402"></span><h4 class="subsubheading">Description:</h4>

<p><code>rest</code> performs the same operation as <code>cdr</code>,
but mnemonically complements <code>first</code>.
Specifically,
</p>
<div class="lisp">
<pre class="lisp"> (rest <var>list</var>) ≡ (cdr <var>list</var>)
 (setf (rest <var>list</var>) <var>new-tail</var>) ≡ (setf (cdr <var>list</var>) <var>new-tail</var>)
</pre></div>


<span id="Examples_003a-285"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (rest '(1 2)) <span class="roman">→</span> (2)
 (rest '(1 . 2)) <span class="roman">→</span> 2
 (rest '(1)) <span class="roman">→</span> NIL
 (setq *cons* '(1 . 2)) <span class="roman">→</span> (1 . 2)
 (setf (rest *cons*) &quot;two&quot;) <span class="roman">→</span> &quot;two&quot;
 *cons* <span class="roman">→</span> (1 . &quot;two&quot;)
</pre></div>


<span id="See-Also_003a-326"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cdr">cdr</a>,
<a href="#nthcdr">nthcdr</a>
</p>
<span id="Notes_003a-216"></span><h4 class="subsubheading">Notes:</h4>

<p><code>rest</code> is often preferred stylistically over <code>cdr</code>
when the argument is to being subjectively viewed as a <i>list</i> 
rather than as a <i>cons</i>.
</p>

<hr>
<span id="member_003b-member_002dif_003b-member_002dif_002dnot"></span><div class="header">
<p>
Next: <a href="#mapc_003b-mapcar_003b-mapcan_003b-mapl_003b-maplist_003b-mapcon" accesskey="n" rel="next">mapc; mapcar; mapcan; mapl; maplist; mapcon</a>, Previous: <a href="#rest" accesskey="p" rel="prev">rest</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">member; member-if; member-if-not</h4>
<span id="member_002c-member_002dif_002c-member_002dif_002dnot-_0028Function_0029"></span><h3 class="heading">member, member-if, member-if-not (Function)</h3>
<span id="index-member-4"></span>
<span id="index-member-1"></span>
<span id="index-member_002dif-2"></span>
<span id="index-member_002dif"></span>
<span id="index-member_002dif_002dnot-2"></span>
<span id="index-member_002dif_002dnot"></span>
<span id="member"></span>

<span id="Syntax_003a-313"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-member-2">Function: <strong>member</strong> <em>item      list <tt>&amp;key</tt> key test test-not <span class="roman">→</span> tail</em></dt>
</dl>
<dl>
<dt id="index-member_002dif-1">Function: <strong>member-if</strong> <em>predicate list <tt>&amp;key</tt> key <span class="roman">→</span> tail</em></dt>
</dl>
<dl>
<dt id="index-member_002dif_002dnot-1">Function: <strong>member-if-not</strong> <em>predicate list <tt>&amp;key</tt> key <span class="roman">→</span> tail</em></dt>
</dl>

<span id="Arguments-and-Values_003a-302"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>.
</p>
<p><var>list</var>&mdash;a <i>proper list</i>.
</p>
<p><var>predicate</var>&mdash;a <i>designator</i> for 
a <i>function</i> of one <i>argument</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>tail</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-403"></span><h4 class="subsubheading">Description:</h4>

<p><code>member</code>, <code>member-if</code>, and <code>member-if-not</code> each
search <var>list</var> for <var>item</var> or for a top-level element that 
<i>satisfies the test</i>.  The argument to the <var>predicate</var> function 
is an element of <var>list</var>.
</p>
<p>If some element <i>satisfies the test</i>,
the tail of <var>list</var> beginning
with this element is returned; otherwise <code>nil</code>&nbsp;<!-- /@w -->is returned.
</p>
<p><var>list</var> is searched on the top level only. 
</p>
<span id="Examples_003a-286"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (member 2 '(1 2 3)) <span class="roman">→</span> (2 3)                                 
 (member 2 '((1 . 2) (3 . 4)) :test-not #'= :key #'cdr) <span class="roman">→</span> ((3 . 4))
 (member 'e '(a b c d)) <span class="roman">→</span> NIL
</pre></div>


<div class="lisp">
<pre class="lisp"> (member-if #'listp '(a b nil c d)) <span class="roman">→</span> (NIL C D)
 (member-if #'numberp '(a #\Space 5/3 foo)) <span class="roman">→</span> (5/3 FOO)
 (member-if-not #'zerop 
                 '(3 6 9 11 . 12)
                 :key #'(lambda (x) (mod x 3))) <span class="roman">→</span> (11 . 12)
</pre></div>


<span id="Exceptional-Situations_003a-128"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>list</var> is not a <i>proper list</i>.
</p>
<span id="See-Also_003a-327"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Sequences.html#find">find</a>,
<a href="Sequences.html#position">position</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-217"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>The <i>function</i> <code>member-if-not</code> is deprecated.
</p>
<p>In the following
</p>
<div class="lisp">
<pre class="lisp"> (member 'a '(g (a y) c a d e a f)) <span class="roman">→</span> (A D E A F)
</pre></div>


<p>the value returned by <code>member</code> is <i>identical</i> to the portion
of the <i>list</i> beginning with <code>a</code>.  Thus <code>rplaca</code> on the
result of <code>member</code> can be used to alter the part of the <i>list</i>
where <code>a</code> was found (assuming a check has been made that <code>member</code>
did not return <code>nil</code>).
</p>

<hr>
<span id="mapc_003b-mapcar_003b-mapcan_003b-mapl_003b-maplist_003b-mapcon"></span><div class="header">
<p>
Next: <a href="#acons" accesskey="n" rel="next">acons</a>, Previous: <a href="#member_003b-member_002dif_003b-member_002dif_002dnot" accesskey="p" rel="prev">member; member-if; member-if-not</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">mapc; mapcar; mapcan; mapl; maplist; mapcon</h4>
<span id="mapc_002c-mapcar_002c-mapcan_002c-mapl_002c-maplist_002c-mapcon-_0028Function_0029"></span><h3 class="heading">mapc, mapcar, mapcan, mapl, maplist, mapcon (Function)</h3>
<span id="index-mapc-2"></span>
<span id="index-mapc"></span>
<span id="index-mapcar-2"></span>
<span id="index-mapcar"></span>
<span id="index-mapcan-2"></span>
<span id="index-mapcan"></span>
<span id="index-mapl-2"></span>
<span id="index-mapl"></span>
<span id="index-maplist-2"></span>
<span id="index-maplist"></span>
<span id="index-mapcon-2"></span>
<span id="index-mapcon"></span>


<span id="Syntax_003a-314"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-mapc-1">Function: <strong>mapc</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> list-1</em></dt>
</dl>
<dl>
<dt id="index-mapcar-1">Function: <strong>mapcar</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-mapcan-1">Function: <strong>mapcan</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> concatenated-results</em></dt>
</dl>
<dl>
<dt id="index-mapl-1">Function: <strong>mapl</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> list-1</em></dt>
</dl>
<dl>
<dt id="index-maplist-1">Function: <strong>maplist</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-mapcon-1">Function: <strong>mapcon</strong> <em>function <tt>&amp;rest</tt> lists+ <span class="roman">→</span> concatenated-results</em></dt>
</dl>

<span id="Arguments-and-Values_003a-303"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>function</var>&mdash;a <i>designator</i> for a <i>function</i> 
that must take as many <i>arguments</i> as there are <var>lists</var>.
</p>
<p><var>list</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-1</var>&mdash;the first <var>list</var> (which must be a <i>proper list</i>).
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<p><var>concatenated-results</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-404"></span><h4 class="subsubheading">Description:</h4>

<p>The mapping operation involves applying <var>function</var> to
successive sets of arguments in which
one argument is obtained from each <i>sequence</i>.
Except for <code>mapc</code> and <code>mapl</code>,
the result contains the results returned by <var>function</var>.
In the cases of <code>mapc</code> and <code>mapl</code>,
the resulting <i>sequence</i> is <var>list</var>.
</p>
<p><var>function</var> is called
first on all the elements with index <code>0</code>, then on all those
with index <code>1</code>, and so on.
<var>result-type</var> specifies the <i>type</i> of
the 
resulting <i>sequence</i>.
If <var>function</var> is a <i>symbol</i>, it is <code>coerce</code>d
to a <i>function</i> as if by <code>symbol-function</code>.
</p>
<p><code>mapcar</code> operates on successive <i>elements</i> of the <var>lists</var>.
<var>function</var> is applied to the first <i>element</i> of each <var>list</var>,
then to the second <i>element</i> of each <var>list</var>, and so on.
The iteration terminates when the shortest <var>list</var> runs out,
and excess elements in other lists are ignored.
The value returned by <code>mapcar</code> is a <i>list</i>
of the results of successive calls to <var>function</var>.
</p>
<p><code>mapc</code> is like <code>mapcar</code> except that the results of 
applying <var>function</var> are not accumulated.
The <var>list</var> argument is returned.
</p>
<p><code>maplist</code> is like <code>mapcar</code> except that
<var>function</var> is applied to successive sublists of the <var>lists</var>.
<var>function</var> 
is first applied to the <var>lists</var> themselves, 
and then to the <i>cdr</i> of each
<var>list</var>, and then to the <i>cdr</i> of the <i>cdr</i>
of each <var>list</var>, and so on.  
</p>
<p><code>mapl</code> is like <code>maplist</code> except that the results of 
applying <var>function</var> are not accumulated;
<var>list-1</var> is returned.
</p>
<p><code>mapcan</code> and <code>mapcon</code> are like <code>mapcar</code> and
<code>maplist</code> respectively, except that the results of
applying <var>function</var> are combined 
into a <i>list</i> by the use of <code>nconc</code>
rather than <code>list</code>.
That is,
</p>
<div class="lisp">
<pre class="lisp"> (mapcon f x1 ... xn)
   ≡ (apply #'nconc (maplist f x1 ... xn))
</pre></div>

<p>and similarly for the relationship between <code>mapcan</code> 
and <code>mapcar</code>.
</p>
<span id="Examples_003a-287"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (mapcar #'car '((1 a) (2 b) (3 c))) <span class="roman">→</span> (1 2 3) 
 (mapcar #'abs '(3 -4 2 -5 -6)) <span class="roman">→</span> (3 4 2 5 6)
 (mapcar #'cons '(a b c) '(1 2 3)) <span class="roman">→</span> ((A . 1) (B . 2) (C . 3))

 (maplist #'append '(1 2 3 4) '(1 2) '(1 2 3)) 
<span class="roman">→</span> ((1 2 3 4 1 2 1 2 3) (2 3 4 2 2 3)) 
 (maplist #'(lambda (x) (cons 'foo x)) '(a b c d))
<span class="roman">→</span> ((FOO A B C D) (FOO B C D) (FOO C D) (FOO D))
 (maplist #'(lambda (x) (if (member (car x) (cdr x)) 0 1)) '(a b a c d b c))
<span class="roman">→</span> (0 0 1 0 1 1 1)
;An entry is 1 if the corresponding element of the input
;  list was the last instance of that element in the input list.

 (setq dummy nil) <span class="roman">→</span> NIL 
 (mapc #'(lambda (&amp;rest x) (setq dummy (append dummy x)))
        '(1 2 3 4)
        '(a b c d e)
        '(x y z)) <span class="roman">→</span> (1 2 3 4) 
 dummy <span class="roman">→</span> (1 A X 2 B Y 3 C Z)                   

 (setq dummy nil) <span class="roman">→</span> NIL 
 (mapl #'(lambda (x) (push x dummy)) '(1 2 3 4)) <span class="roman">→</span> (1 2 3 4) 
 dummy <span class="roman">→</span> ((4) (3 4) (2 3 4) (1 2 3 4)) 

 (mapcan #'(lambda (x y) (if (null x) nil (list x y)))
          '(nil nil nil d e)
          '(1 2 3 4 5 6)) <span class="roman">→</span> (D 4 E 5) 
 (mapcan #'(lambda (x) (and (numberp x) (list x)))
          '(a 1 b c 3 4 d 5))
<span class="roman">→</span> (1 3 4 5)
</pre></div>

<p>In this case the function serves as a filter; 
this is a standard <span class="roman">Lisp</span>&nbsp;<!-- /@w -->idiom using <code>mapcan</code>.
</p>
<div class="lisp">
<pre class="lisp"> (mapcon #'list '(1 2 3 4)) <span class="roman">→</span> ((1 2 3 4) (2 3 4) (3 4) (4)) 
</pre></div>


<span id="Exceptional-Situations_003a-129"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
any <var>list</var> is not a <i>proper list</i>.
</p>
<span id="See-Also_003a-328"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Iteration.html#dolist">dolist</a>,
<a href="Sequences.html#map">map</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>

<hr>
<span id="acons"></span><div class="header">
<p>
Next: <a href="#assoc_003b-assoc_002dif_003b-assoc_002dif_002dnot" accesskey="n" rel="next">assoc; assoc-if; assoc-if-not</a>, Previous: <a href="#mapc_003b-mapcar_003b-mapcan_003b-mapl_003b-maplist_003b-mapcon" accesskey="p" rel="prev">mapc; mapcar; mapcan; mapl; maplist; mapcon</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">acons</h4>
<span id="acons-_0028Function_0029"></span><h3 class="heading">acons (Function)</h3>
<span id="index-acons-2"></span>
<span id="index-acons"></span>


<span id="Syntax_003a-315"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-acons-1">Function: <strong>acons</strong> <em>key datum alist <span class="roman">→</span> new-alist</em></dt>
</dl>

<span id="Arguments-and-Values_003a-304"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>key</var>&mdash;an <i>object</i>.
</p>
<p><var>datum</var>&mdash;an <i>object</i>.
</p>
<p><var>alist</var>&mdash;an <i>association list</i>.
</p>
<p><var>new-alist</var>&mdash;an <i>association list</i>.
</p>
<span id="Description_003a-405"></span><h4 class="subsubheading">Description:</h4>

<p>Creates a <i>fresh</i> <i>cons</i>,
the <i>cdr</i> of which is <var>alist</var> and
the <i>car</i> of which is another <i>fresh</i> <i>cons</i>,
the <i>car</i> of which is <var>key</var> and
the <i>cdr</i> of which is <var>datum</var>.
</p>
<span id="Examples_003a-288"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq alist '()) <span class="roman">→</span> NIL
 (acons 1 &quot;one&quot; alist) <span class="roman">→</span> ((1 . &quot;one&quot;))
 alist <span class="roman">→</span> NIL
 (setq alist (acons 1 &quot;one&quot; (acons 2 &quot;two&quot; alist))) <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;))
 (assoc 1 alist) <span class="roman">→</span> (1 . &quot;one&quot;)
 (setq alist (acons 1 &quot;uno&quot; alist)) <span class="roman">→</span> ((1 . &quot;uno&quot;) (1 . &quot;one&quot;) (2 . &quot;two&quot;))
 (assoc 1 alist) <span class="roman">→</span> (1 . &quot;uno&quot;)
</pre></div>


<span id="See-Also_003a-329"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#assoc">assoc</a>, <a href="#pairlis">pairlis</a>
</p>
<span id="Notes_003a-218"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp">(acons <var>key</var> <var>datum</var> <var>alist</var>) ≡ (cons (cons <var>key</var> <var>datum</var>) <var>alist</var>)
</pre></div>



<hr>
<span id="assoc_003b-assoc_002dif_003b-assoc_002dif_002dnot"></span><div class="header">
<p>
Next: <a href="#copy_002dalist" accesskey="n" rel="next">copy-alist</a>, Previous: <a href="#acons" accesskey="p" rel="prev">acons</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">assoc; assoc-if; assoc-if-not</h4>
<span id="assoc_002c-assoc_002dif_002c-assoc_002dif_002dnot-_0028Function_0029"></span><h3 class="heading">assoc, assoc-if, assoc-if-not (Function)</h3>
<span id="index-assoc-2"></span>
<span id="index-assoc"></span>
<span id="index-assoc_002dif-2"></span>
<span id="index-assoc_002dif"></span>
<span id="index-assoc_002dif_002dnot-2"></span>
<span id="index-assoc_002dif_002dnot"></span>
<span id="assoc"></span>

<span id="Syntax_003a-316"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-assoc-1">Function: <strong>assoc</strong> <em>item      alist <tt>&amp;key</tt> key test test-not <span class="roman">→</span> entry</em></dt>
</dl>


<dl>
<dt id="index-assoc_002dif-1">Function: <strong>assoc-if</strong> <em>predicate alist <tt>&amp;key</tt> key <span class="roman">→</span> entry</em></dt>
</dl>
<dl>
<dt id="index-assoc_002dif_002dnot-1">Function: <strong>assoc-if-not</strong> <em>predicate alist <tt>&amp;key</tt> key <span class="roman">→</span> entry</em></dt>
</dl>


<span id="Arguments-and-Values_003a-305"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>.
</p>
<p><var>alist</var>&mdash;an <i>association list</i>.
</p>
<p><var>predicate</var>&mdash;a <i>designator</i> for 
a <i>function</i> of one <i>argument</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>entry</var>&mdash;a <i>cons</i> that is an <i>element</i> of <var>alist</var>,
or <code>nil</code>.
</p>
<span id="Description_003a-406"></span><h4 class="subsubheading">Description:</h4>

<p><code>assoc</code>, <code>assoc-if</code>, and <code>assoc-if-not</code>
return the first <i>cons</i> in <var>alist</var> whose <i>car</i> <i>satisfies the test</i>,
or <code>nil</code>&nbsp;<!-- /@w -->if no such <i>cons</i> is found.
</p>
<p>For <code>assoc</code>, <code>assoc-if</code>, and <code>assoc-if-not</code>, if <code>nil</code>&nbsp;<!-- /@w -->appears
in <var>alist</var> in place of a pair, it is ignored.
</p>
<span id="Examples_003a-289"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq values '((x . 100) (y . 200) (z . 50))) <span class="roman">→</span> ((X . 100) (Y . 200) (Z . 50))
 (assoc 'y values) <span class="roman">→</span> (Y . 200)
 (rplacd (assoc 'y values) 201) <span class="roman">→</span> (Y . 201)
 (assoc 'y values) <span class="roman">→</span> (Y . 201)
 (setq alist '((1 . &quot;one&quot;)(2 . &quot;two&quot;)(3 . &quot;three&quot;))) 
<span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;) (3 . &quot;three&quot;))
 (assoc 2 alist) <span class="roman">→</span> (2 . &quot;two&quot;)
 (assoc-if #'evenp alist) <span class="roman">→</span> (2 . &quot;two&quot;)
 (assoc-if-not #'(lambda(x) (&lt; x 3)) alist) <span class="roman">→</span> (3 . &quot;three&quot;)
 (setq alist '((&quot;one&quot; . 1)(&quot;two&quot; . 2))) <span class="roman">→</span> ((&quot;one&quot; . 1) (&quot;two&quot; . 2))
 (assoc &quot;one&quot; alist) <span class="roman">→</span> NIL
 (assoc &quot;one&quot; alist :test #'equalp) <span class="roman">→</span> (&quot;one&quot; . 1)
 (assoc &quot;two&quot; alist :key #'(lambda(x) (char x 2))) <span class="roman">→</span> NIL 
 (assoc #\o alist :key #'(lambda(x) (char x 2))) <span class="roman">→</span> (&quot;two&quot; . 2)
 (assoc 'r '((a . b) (c . d) (r . x) (s . y) (r . z))) <span class="roman">→</span>  (R . X)
 (assoc 'goo '((foo . bar) (zoo . goo))) <span class="roman">→</span> NIL
 (assoc '2 '((1 a b c) (2 b c d) (-7 x y z))) <span class="roman">→</span> (2 B C D)
 (setq alist '((&quot;one&quot; . 1) (&quot;2&quot; . 2) (&quot;three&quot; . 3)))
<span class="roman">→</span> ((&quot;one&quot; . 1) (&quot;2&quot; . 2) (&quot;three&quot; . 3))
 (assoc-if-not #'alpha-char-p alist
               :key #'(lambda (x) (char x 0))) <span class="roman">→</span> (&quot;2&quot; . 2)
</pre></div>


<span id="Exceptional-Situations_003a-130"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>alist</var> is not an <i>association list</i>.
</p>
<span id="See-Also_003a-330"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#rassoc">rassoc</a>,
<a href="Sequences.html#find">find</a>,
<a href="#member">member</a>,
<a href="Sequences.html#position">position</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-219"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>The <i>function</i> <code>assoc-if-not</code> is deprecated.
</p>
<p>It is possible to <code>rplacd</code> the result of <code>assoc</code>, provided
that it is not <code>nil</code>,
in order to &ldquo;update&rdquo; <var>alist</var>. 
</p>
<p>The two expressions
</p>
<div class="lisp">
<pre class="lisp"> (assoc item list :test fn)
</pre></div>

<p>and
</p>
<div class="lisp">
<pre class="lisp"> (find item list :test fn :key #'car)
</pre></div>

<p>are equivalent in meaning with one exception:
if <code>nil</code>&nbsp;<!-- /@w -->appears in <var>alist</var> in place of a pair,
and <var>item</var> is <code>nil</code>,
<code>find</code> will compute the <i>car</i> of the <code>nil</code>&nbsp;<!-- /@w -->in <var>alist</var>,
find that it is equal to <var>item</var>, and return <code>nil</code>,
whereas <code>assoc</code> will ignore the <code>nil</code>&nbsp;<!-- /@w -->in <var>alist</var> and continue
to search for an actual <i>cons</i> whose <i>car</i> is <code>nil</code>.
</p>

<hr>
<span id="copy_002dalist"></span><div class="header">
<p>
Next: <a href="#pairlis" accesskey="n" rel="next">pairlis</a>, Previous: <a href="#assoc_003b-assoc_002dif_003b-assoc_002dif_002dnot" accesskey="p" rel="prev">assoc; assoc-if; assoc-if-not</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">copy-alist</h4>
<span id="copy_002dalist-_0028Function_0029"></span><h3 class="heading">copy-alist (Function)</h3>
<span id="index-copy_002dalist-2"></span>
<span id="index-copy_002dalist"></span>


<span id="Syntax_003a-317"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-copy_002dalist-1">Function: <strong>copy-alist</strong> <em>alist <span class="roman">→</span> new-alist</em></dt>
</dl>

<span id="Arguments-and-Values_003a-306"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>alist</var>&mdash;an <i>association list</i>.
</p>
<p><var>new-alist</var>&mdash;an <i>association list</i>.
</p>
<span id="Description_003a-407"></span><h4 class="subsubheading">Description:</h4>

<p><code>copy-alist</code> returns a <i>copy</i> of <var>alist</var>.
</p>
<p>The <i>list structure</i> of <var>alist</var> is copied,
and the <i>elements</i> of <var>alist</var> which are <i>conses</i> are
also copied (as <i>conses</i> only). 
Any other <i>objects</i> which are referred to, 
whether directly or indirectly,
by the <var>alist</var> continue to be shared.
</p>
<span id="Examples_003a-290"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp">(defparameter *alist* (acons 1 &quot;one&quot; (acons 2 &quot;two&quot; '())))
*alist* <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;))
(defparameter *list-copy* (copy-list *alist*))
*list-copy* <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;))
(defparameter *alist-copy* (copy-alist *alist*))
*alist-copy* <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;))
(setf (cdr (assoc 2 *alist-copy*)) &quot;deux&quot;) <span class="roman">→</span> &quot;deux&quot;
*alist-copy* <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;deux&quot;))
*alist* <span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;))
(setf (cdr (assoc 1 *list-copy*)) &quot;uno&quot;) <span class="roman">→</span> &quot;uno&quot;
*list-copy* <span class="roman">→</span> ((1 . &quot;uno&quot;) (2 . &quot;two&quot;))
*alist* <span class="roman">→</span> ((1 . &quot;uno&quot;) (2 . &quot;two&quot;))
</pre></div>


<span id="See-Also_003a-331"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#copy_002dlist">copy-list</a>
</p>

<hr>
<span id="pairlis"></span><div class="header">
<p>
Next: <a href="#rassoc_003b-rassoc_002dif_003b-rassoc_002dif_002dnot" accesskey="n" rel="next">rassoc; rassoc-if; rassoc-if-not</a>, Previous: <a href="#copy_002dalist" accesskey="p" rel="prev">copy-alist</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">pairlis</h4>
<span id="pairlis-_0028Function_0029"></span><h3 class="heading">pairlis (Function)</h3>
<span id="index-pairlis-2"></span>
<span id="index-pairlis"></span>


<span id="Syntax_003a-318"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-pairlis-1">Function: <strong>pairlis</strong> <em>keys data <tt>&amp;optional</tt> alist <span class="roman">→</span> new-alist</em></dt>
</dl>

<span id="Arguments-and-Values_003a-307"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>keys</var>&mdash;a <i>proper list</i>.
</p>
<p><var>data</var>&mdash;a <i>proper list</i>.
</p>
<p><var>alist</var>&mdash;an <i>association list</i>.
The default is the <i>empty list</i>.
</p>
<p><var>new-alist</var>&mdash;an <i>association list</i>.
</p>
<span id="Description_003a-408"></span><h4 class="subsubheading">Description:</h4>

<p>Returns an <i>association list</i> that associates
elements of <var>keys</var> to corresponding elements of <var>data</var>.
The consequences are undefined if <var>keys</var> and <var>data</var> are 
not of the same <i>length</i>.  
</p>
<p>If <var>alist</var> is supplied, <code>pairlis</code> returns
a modified <var>alist</var> with the
new pairs prepended to it.
The new pairs may appear in the resulting <i>association list</i> in 
either forward or backward order.
The result of 
</p>
<div class="lisp">
<pre class="lisp"> (pairlis '(one two) '(1 2) '((three . 3) (four . 19)))
</pre></div>

<p>might be
</p>
<div class="lisp">
<pre class="lisp"> ((one . 1) (two . 2) (three . 3) (four . 19))
</pre></div>

<p>or
</p>
<div class="lisp">
<pre class="lisp"> ((two . 2) (one . 1) (three . 3) (four . 19))
</pre></div>


<span id="Examples_003a-291"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq keys '(1 2 3)
        data '(&quot;one&quot; &quot;two&quot; &quot;three&quot;)
        alist '((4 . &quot;four&quot;))) <span class="roman">→</span> ((4 . &quot;four&quot;))
 (pairlis keys data) <span class="roman">→</span> ((3 . &quot;three&quot;) (2 . &quot;two&quot;) (1 . &quot;one&quot;))
 (pairlis keys data alist)
<span class="roman">→</span> ((3 . &quot;three&quot;) (2 . &quot;two&quot;) (1 . &quot;one&quot;) (4 . &quot;four&quot;))
 alist <span class="roman">→</span> ((4 . &quot;four&quot;))
</pre></div>


<span id="Exceptional-Situations_003a-131"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>keys</var> and <var>data</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-332"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#acons">acons</a>
</p>

<hr>
<span id="rassoc_003b-rassoc_002dif_003b-rassoc_002dif_002dnot"></span><div class="header">
<p>
Next: <a href="#get_002dproperties" accesskey="n" rel="next">get-properties</a>, Previous: <a href="#pairlis" accesskey="p" rel="prev">pairlis</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">rassoc; rassoc-if; rassoc-if-not</h4>
<span id="rassoc_002c-rassoc_002dif_002c-rassoc_002dif_002dnot-_0028Function_0029"></span><h3 class="heading">rassoc, rassoc-if, rassoc-if-not (Function)</h3>
<span id="index-rassoc-2"></span>
<span id="index-rassoc"></span>
<span id="index-rassoc_002dif-2"></span>
<span id="index-rassoc_002dif"></span>
<span id="index-rassoc_002dif_002dnot-2"></span>
<span id="index-rassoc_002dif_002dnot"></span>
<span id="rassoc"></span>

<span id="Syntax_003a-319"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-rassoc-1">Function: <strong>rassoc</strong> <em>item      alist  <tt>&amp;key</tt> key test test-not <span class="roman">→</span> entry</em></dt>
</dl>


<dl>
<dt id="index-rassoc_002dif-1">Function: <strong>rassoc-if</strong> <em>predicate alist <tt>&amp;key</tt> key <span class="roman">→</span> entry</em></dt>
</dl>
<dl>
<dt id="index-rassoc_002dif_002dnot-1">Function: <strong>rassoc-if-not</strong> <em>predicate alist <tt>&amp;key</tt> key <span class="roman">→</span> entry</em></dt>
</dl>


<span id="Arguments-and-Values_003a-308"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>.
</p>
<p><var>alist</var>&mdash;an <i>association list</i>.
</p>
<p><var>predicate</var>&mdash;a <i>designator</i> for
a <i>function</i> of one <i>argument</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>entry</var>&mdash;a <i>cons</i> that is an <i>element</i> of the <var>alist</var>,
or <code>nil</code>.
</p>
<span id="Description_003a-409"></span><h4 class="subsubheading">Description:</h4>

<p><code>rassoc</code>, <code>rassoc-if</code>, and <code>rassoc-if-not</code>
return the first <i>cons</i> whose <i>cdr</i> 
<i>satisfies the test</i>.
If no such <i>cons</i> is found, <code>nil</code>
is returned.
</p>

<p>If <code>nil</code>&nbsp;<!-- /@w -->appears in <var>alist</var> in place of a pair, it is  ignored.
</p>
<span id="Examples_003a-292"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq alist '((1 . &quot;one&quot;) (2 . &quot;two&quot;) (3 . 3))) 
<span class="roman">→</span> ((1 . &quot;one&quot;) (2 . &quot;two&quot;) (3 . 3))
 (rassoc 3 alist) <span class="roman">→</span> (3 . 3)
 (rassoc &quot;two&quot; alist) <span class="roman">→</span> NIL
 (rassoc &quot;two&quot; alist :test 'equal) <span class="roman">→</span> (2 . &quot;two&quot;)
 (rassoc 1 alist :key #'(lambda (x) (if (numberp x) (/ x 3)))) <span class="roman">→</span> (3 . 3)
 (rassoc 'a '((a . b) (b . c) (c . a) (z . a))) <span class="roman">→</span> (C . A)
 (rassoc-if #'stringp alist) <span class="roman">→</span> (1 . &quot;one&quot;)
 (rassoc-if-not #'vectorp alist) <span class="roman">→</span> (3 . 3)
</pre></div>


<span id="See-Also_003a-333"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#assoc">assoc</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-220"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>The <i>function</i> <code>rassoc-if-not</code> is deprecated.
</p>
<p>It is possible to <code>rplaca</code> the result of <code>rassoc</code>, 
provided that it is not <code>nil</code>, in order to &ldquo;update&rdquo; <var>alist</var>. 
</p>
<p>The expressions
</p>
<div class="lisp">
<pre class="lisp"> (rassoc item list :test fn)
</pre></div>

<p>and
</p>
<div class="lisp">
<pre class="lisp"> (find item list :test fn :key #'cdr)
</pre></div>

<p>are equivalent in meaning, except when the <code>item</code> is <code>nil</code>
and <code>nil</code>&nbsp;<!-- /@w -->appears in place of a pair in the <var>alist</var>.
See the <i>function</i> <a href="#assoc">assoc</a>. 
</p>

<hr>
<span id="get_002dproperties"></span><div class="header">
<p>
Next: <a href="#getf" accesskey="n" rel="next">getf</a>, Previous: <a href="#rassoc_003b-rassoc_002dif_003b-rassoc_002dif_002dnot" accesskey="p" rel="prev">rassoc; rassoc-if; rassoc-if-not</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">get-properties</h4>
<span id="get_002dproperties-_0028Function_0029"></span><h3 class="heading">get-properties (Function)</h3>
<span id="index-get_002dproperties-2"></span>
<span id="index-get_002dproperties"></span>


<span id="Syntax_003a-320"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-get_002dproperties-1">Function: <strong>get-properties</strong> <em>plist indicator-list <span class="roman">→</span> indicator, value, tail</em></dt>
</dl>

<span id="Arguments-and-Values_003a-309"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>plist</var>&mdash;a <i>property list</i>.
</p>
<p><var>indicator-list</var>&mdash;a <i>proper list</i> (of <i>indicators</i>).
</p>
<p><var>indicator</var>&mdash;an <i>object</i> that is an <i>element</i> of <var>indicator-list</var>.
</p>
<p><var>value</var>&mdash;an <i>object</i>.
</p>
<p><var>tail</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-410"></span><h4 class="subsubheading">Description:</h4>

<p><code>get-properties</code> is used to look up any of several
<i>property list</i> entries all at once.
</p>
<p>It searches the <var>plist</var> for the first entry whose <i>indicator</i> 
is <i>identical</i> to one of the <i>objects</i> in <var>indicator-list</var>.
If such an entry is found, the <var>indicator</var> and <var>value</var> returned
are the <i>property indicator</i> and its associated <i>property value</i>,
and the <var>tail</var> returned is the <i>tail</i> of the <var>plist</var>
that begins with the found entry (<i>i.e.</i>, whose <i>car</i> is the <var>indicator</var>).
If no such entry is found, the <var>indicator</var>, <var>value</var>, and <var>tail</var> 
are all <code>nil</code>.
</p>
<span id="Examples_003a-293"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq x '()) <span class="roman">→</span> NIL
 (setq *indicator-list* '(prop1 prop2)) <span class="roman">→</span> (PROP1 PROP2)
 (getf x 'prop1) <span class="roman">→</span> NIL
 (setf (getf x 'prop1) 'val1) <span class="roman">→</span> VAL1
 (eq (getf x 'prop1) 'val1) <span class="roman">→</span> <i>true</i>
 (get-properties x *indicator-list*) <span class="roman">→</span> PROP1, VAL1, (PROP1 VAL1)
 x <span class="roman">→</span> (PROP1 VAL1)
</pre></div>


<span id="See-Also_003a-334"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Symbols.html#get">get</a>, <a href="#getf">getf</a>
</p>

<hr>
<span id="getf"></span><div class="header">
<p>
Next: <a href="#remf" accesskey="n" rel="next">remf</a>, Previous: <a href="#get_002dproperties" accesskey="p" rel="prev">get-properties</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">getf</h4>
<span id="getf-_0028Accessor_0029"></span><h3 class="heading">getf (Accessor)</h3>
<span id="index-getf-2"></span>
<span id="index-getf"></span>


<span id="Syntax_003a-321"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-getf-1">Function: <strong>getf</strong> <em>plist indicator <tt>&amp;optional</tt> default <span class="roman">→</span> value</em></dt>
</dl>
<p><tt>(setf (getf place indicator <tt>&amp;optional</tt> default) new-value)</tt>
</p>
<span id="Arguments-and-Values_003a-310"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>plist</var>&mdash;a <i>property list</i>.
</p>
<p><var>place</var>&mdash;a <i>place</i>, the <i>value</i> of which is a <i>property list</i>.
</p>
<p><var>indicator</var>&mdash;an <i>object</i>.
</p>
<p><var>default</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>value</var>&mdash;an <i>object</i>.
</p>
<p><var>new-value</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-411"></span><h4 class="subsubheading">Description:</h4>

<p><code>getf</code> finds a <i>property</i> on the <var>plist</var>
whose <i>property indicator</i> is <i>identical</i> to <var>indicator</var>,
and returns its corresponding <i>property value</i>.
If there are multiple <i>properties</i><sub>1</sub>
<code>getf</code> uses the first such <i>property</i>.
If there is no <i>property</i> with that <i>property indicator</i>,
<var>default</var> is returned.
</p>
<p><code>setf</code> of <code>getf</code> may be used to associate a new <i>object</i>
with an existing indicator in the <i>property list</i> held by <var>place</var>,
or to create a new assocation if none exists.
If there are multiple <i>properties</i><sub>1</sub>
<code>setf</code> of <code>getf</code> associates the <var>new-value</var> 
with the first such <i>property</i>.
When a <code>getf</code> <i>form</i> is used as a <code>setf</code> <var>place</var>,
any <var>default</var> which is supplied is evaluated according to normal
left-to-right evaluation rules, but its <i>value</i> is ignored.
</p>
<p><code>setf</code> of <code>getf</code> is permitted to either
<i>write</i> the <i>value</i> of <var>place</var> itself,
or modify of any part, <i>car</i> or <i>cdr</i>, 
of the <i>list structure</i> held by <var>place</var>.
</p>
<span id="Examples_003a-294"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq x '()) <span class="roman">→</span> NIL
 (getf x 'prop1) <span class="roman">→</span> NIL
 (getf x 'prop1 7) <span class="roman">→</span> 7
 (getf x 'prop1) <span class="roman">→</span> NIL
 (setf (getf x 'prop1) 'val1) <span class="roman">→</span> VAL1
 (eq (getf x 'prop1) 'val1) <span class="roman">→</span> <i>true</i>
 (getf x 'prop1) <span class="roman">→</span> VAL1
 (getf x 'prop1 7) <span class="roman">→</span> VAL1
 x <span class="roman">→</span> (PROP1 VAL1)

;; Examples of implementation variation permitted.
 (setq foo (list 'a 'b 'c 'd 'e 'f)) <span class="roman">→</span> (A B C D E F)
 (setq bar (cddr foo)) <span class="roman">→</span> (C D E F)
 (remf foo 'c) <span class="roman">→</span> <i>true</i>
 foo <span class="roman">→</span> (A B E F)
 bar
<span class="roman">→</span> (C D E F)
or<span class="roman">→</span> (C)
or<span class="roman">→</span> (NIL)
or<span class="roman">→</span> (C NIL)
or<span class="roman">→</span> (C D)
</pre></div>


<span id="See-Also_003a-335"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Symbols.html#get">get</a>,
<a href="#get_002dproperties">get-properties</a>,
<a href="Data-and-Control-Flow.html#setf">setf</a>,
<a href="Data-and-Control-Flow.html#FnFormsAsGenRefs">Section 5.1.2.2 (Function Call Forms as Places)</a>
</p>
<span id="Notes_003a-221"></span><h4 class="subsubheading">Notes:</h4>

<p>There is no way (using <code>getf</code>) to distinguish an absent property
from one whose value is <var>default</var>; but see <code>get-properties</code>.
</p>
<p>Note that while supplying a <i>default</i> argument to <code>getf</code>
in a <code>setf</code> situation is sometimes not very interesting,
it is still important because some macros, such as <code>push</code> and
<code>incf</code>, require a <var>place</var> argument which data is both <i>read</i>
from and <i>written</i> to.  In such a context, if a <i>default</i> 
argument is to be supplied for the <i>read</i> situation, it must be
syntactically valid for the <i>write</i> situation as well. For example,
</p>
<div class="lisp">
<pre class="lisp"> (let ((plist '()))
   (incf (getf plist 'count 0))
   plist) <span class="roman">→</span> (COUNT 1)
</pre></div>



<hr>
<span id="remf"></span><div class="header">
<p>
Next: <a href="#intersection_003b-nintersection" accesskey="n" rel="next">intersection; nintersection</a>, Previous: <a href="#getf" accesskey="p" rel="prev">getf</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">remf</h4>
<span id="remf-_0028Macro_0029"></span><h3 class="heading">remf (Macro)</h3>
<span id="index-remf-2"></span>
<span id="index-remf"></span>


<span id="Syntax_003a-322"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-remf-1">Macro: <strong>remf</strong> <em>place indicator <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-311"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>place</var>&mdash;a <i>place</i>.
</p>
<p><var>indicator</var>&mdash;an <i>object</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-412"></span><h4 class="subsubheading">Description:</h4>

<p><code>remf</code> removes from the <i>property list</i> stored in <var>place</var>
a <i>property</i><sub>1</sub>
<i>identical</i> to <var>indicator</var>.
If there are multiple <i>properties</i><sub>1</sub>
<code>remf</code> only removes the first such <i>property</i>.
<code>remf</code> returns <i>false</i> if no such <i>property</i> was found,
or <i>true</i> if a property was found.
</p>
<p>The <i>property indicator</i> 
and the corresponding <i>property value</i> 
are removed in an undefined order
by destructively splicing the property list.  
<code>remf</code> is permitted to either <code>setf</code> <var>place</var> or to 
<code>setf</code> any part, <code>car</code> or <code>cdr</code>, 
of the <i>list structure</i> held by that <var>place</var>.
</p>
<p>For information about the <i>evaluation</i> of <i>subforms</i> of <var>place</var>,
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
</p>
<span id="Examples_003a-295"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq x (cons () ())) <span class="roman">→</span> (NIL)
 (setf (getf (car x) 'prop1) 'val1) <span class="roman">→</span> VAL1
 (remf (car x) 'prop1) <span class="roman">→</span> <i>true</i>
 (remf (car x) 'prop1) <span class="roman">→</span> <i>false</i>
</pre></div>


<span id="Side-Effects_003a-43"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The property list stored in <var>place</var> is modified.
</p>
<span id="See-Also_003a-336"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Symbols.html#remprop">remprop</a>, <a href="#getf">getf</a>
</p>

<hr>
<span id="intersection_003b-nintersection"></span><div class="header">
<p>
Next: <a href="#adjoin" accesskey="n" rel="next">adjoin</a>, Previous: <a href="#remf" accesskey="p" rel="prev">remf</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">intersection; nintersection</h4>
<span id="intersection_002c-nintersection-_0028Function_0029"></span><h3 class="heading">intersection, nintersection (Function)</h3>
<span id="index-intersection-2"></span>
<span id="index-intersection"></span>
<span id="index-nintersection-2"></span>
<span id="index-nintersection"></span>
<span id="intersection"></span>

<span id="Syntax_003a-323"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-intersection-1">Function: <strong>intersection</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nintersection-1">Function: <strong>nintersection</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-312"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list-1</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-2</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-413"></span><h4 class="subsubheading">Description:</h4>

<p><code>intersection</code> and <code>nintersection</code> return a <i>list</i>
that contains every element that occurs in both <var>list-1</var> and <var>list-2</var>.
</p>
<p><code>nintersection</code> is the destructive version of <code>intersection</code>.
It performs the same operation,
but may destroy <var>list-1</var> using its cells to construct the result.
<var>list-2</var> is not destroyed.
</p>
<p>The intersection operation is described as follows.
For all possible ordered pairs consisting of 
one <i>element</i> from <var>list-1</var> 
and one <i>element</i> from <var>list-2</var>,
<tt>:test</tt> or <tt>:test-not</tt> are used 
to determine whether they <i>satisfy the test</i>.  
The first argument to the <tt>:test</tt> or <tt>:test-not</tt>
function is an element of <var>list-1</var>; the second argument is an
element of <var>list-2</var>.
If <tt>:test</tt> or <tt>:test-not</tt> is not supplied, <code>eql</code>
is used.
It is an error if <tt>:test</tt> and <tt>:test-not</tt> are supplied in
the same function call.
</p>
<p>If <tt>:key</tt> is supplied (and not <code>nil</code>), it is used to
extract the part to be tested from the <var>list</var> element. 
The argument to the <tt>:key</tt> function
is an element of either <var>list-1</var> or <var>list-2</var>;
the <tt>:key</tt> function typically returns part of the supplied element.
If <tt>:key</tt> is not supplied or <code>nil</code>, the <var>list-1</var> and
<var>list-2</var> elements are used.
</p>
<p>For every pair that <i>satifies the test</i>,
exactly one of the two elements of the pair will be put in the result.
No element from either <i>list</i> appears in the result that does not 
<i>satisfy the test</i> for
an element from the other <i>list</i>.
If one of the <i>lists</i> contains duplicate
elements, there may be duplication in the result.
</p>
<p>There is no guarantee that the order of elements in the result will
reflect the ordering of the arguments in any particular way.
The result <i>list</i> may share cells with, 
or be <code>eq</code> to, either <var>list-1</var> or <var>list-2</var>
if appropriate.
</p>
<span id="Examples_003a-296"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq list1 (list 1 1 2 3 4 a b c &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;d&quot;)
       list2 (list 1 4 5 b c d &quot;a&quot; &quot;B&quot; &quot;c&quot; &quot;D&quot;)) 
  <span class="roman">→</span> (1 4 5 B C D &quot;a&quot; &quot;B&quot; &quot;c&quot; &quot;D&quot;)
 (intersection list1 list2) <span class="roman">→</span> (C B 4 1 1)
 (intersection list1 list2 :test 'equal) <span class="roman">→</span> (&quot;B&quot; C B 4 1 1)
 (intersection list1 list2 :test #'equalp) <span class="roman">→</span> (&quot;d&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; C B 4 1 1) 
 (nintersection list1 list2) <span class="roman">→</span> (1 1 4 B C)
 list1 <span class="roman">→</span> <i>implementation-dependent</i> ;<i>e.g.</i>, (1 1 4 B C)
 list2 <span class="roman">→</span> <i>implementation-dependent</i> ;<i>e.g.</i>, (1 4 5 B C D &quot;a&quot; &quot;B&quot; &quot;c&quot; &quot;D&quot;)
 (setq list1 (copy-list '((1 . 2) (2 . 3) (3 . 4) (4 . 5))))
<span class="roman">→</span> ((1 . 2) (2 . 3) (3 . 4) (4 . 5)) 
 (setq list2 (copy-list '((1 . 3) (2 . 4) (3 . 6) (4 . 8))))
<span class="roman">→</span> ((1 . 3) (2 . 4) (3 . 6) (4 . 8)) 
 (nintersection list1 list2 :key #'cdr) <span class="roman">→</span> ((2 . 3) (3 . 4)) 
 list1 <span class="roman">→</span> <i>implementation-dependent</i> ;<i>e.g.</i>, ((1 . 2) (2 . 3) (3 . 4)) 
 list2 <span class="roman">→</span> <i>implementation-dependent</i> ;<i>e.g.</i>, ((1 . 3) (2 . 4) (3 . 6) (4 . 8)) 
</pre></div>


<span id="Side-Effects_003a-44"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nintersection</code> can modify <var>list-1</var>, 
but not <var>list-2</var>.
</p>
<span id="Exceptional-Situations_003a-132"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>list-1</var> and <var>list-2</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-337"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#union">union</a>,
<a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-222"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>Since the <code>nintersection</code> side effect is not required,
it should not be used in for-effect-only
positions in portable code.
</p>
<hr>
<span id="adjoin"></span><div class="header">
<p>
Next: <a href="#pushnew" accesskey="n" rel="next">pushnew</a>, Previous: <a href="#intersection_003b-nintersection" accesskey="p" rel="prev">intersection; nintersection</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">adjoin</h4>
<span id="adjoin-_0028Function_0029"></span><h3 class="heading">adjoin (Function)</h3>
<span id="index-adjoin-2"></span>
<span id="index-adjoin"></span>


<span id="Syntax_003a-324"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-adjoin-1">Function: <strong>adjoin</strong> <em>item list <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-313"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>.
</p>
<p><var>list</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>new-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-414"></span><h4 class="subsubheading">Description:</h4>

<p>Tests whether <var>item</var> is the same as an existing element of <var>list</var>.
If the <var>item</var> is not an existing element,
<code>adjoin</code> adds it to <var>list</var> (as if by <code>cons</code>)
and returns the resulting <i>list</i>; 
otherwise, nothing is added and the original <var>list</var> is returned.
</p>
<p>The <var>test</var>, <var>test-not</var>, and <var>key</var> 
affect how it is determined whether <var>item</var> is the same as an <i>element</i> of <var>list</var>.
For details, <a href="Sequences.html#SatisfyingTheTwoArgTest">Satisfying a Two-Argument Test</a>
</p>
<span id="Examples_003a-297"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq slist '()) <span class="roman">→</span> NIL 
 (adjoin 'a slist) <span class="roman">→</span> (A) 
 slist <span class="roman">→</span> NIL 
 (setq slist (adjoin '(test-item 1) slist)) <span class="roman">→</span> ((TEST-ITEM 1)) 
 (adjoin '(test-item 1) slist) <span class="roman">→</span> ((TEST-ITEM 1) (TEST-ITEM 1)) 
 (adjoin '(test-item 1) slist :test 'equal) <span class="roman">→</span> ((TEST-ITEM 1)) 
 (adjoin '(new-test-item 1) slist :key #'cadr) <span class="roman">→</span> ((TEST-ITEM 1)) 
 (adjoin '(new-test-item 1) slist) <span class="roman">→</span> ((NEW-TEST-ITEM 1) (TEST-ITEM 1)) 
</pre></div>


<span id="Exceptional-Situations_003a-133"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>list</var> is not a <i>proper list</i>.
</p>
<span id="See-Also_003a-338"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#pushnew">pushnew</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-223"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<div class="lisp">
<pre class="lisp"> (adjoin item list :key fn)
   ≡ (if (member (fn item) list :key fn) list (cons item list))
</pre></div>



<hr>
<span id="pushnew"></span><div class="header">
<p>
Next: <a href="#set_002ddifference_003b-nset_002ddifference" accesskey="n" rel="next">set-difference; nset-difference</a>, Previous: <a href="#adjoin" accesskey="p" rel="prev">adjoin</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">pushnew</h4>
<span id="pushnew-_0028Macro_0029"></span><h3 class="heading">pushnew (Macro)</h3>
<span id="index-pushnew-2"></span>
<span id="index-pushnew"></span>


<span id="Syntax_003a-325"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-pushnew-1">Macro: <strong>pushnew</strong> <em>item place <tt>&amp;key</tt> key test test-not <span class="roman">→</span> new-place-value</em></dt>
</dl>

<span id="Arguments-and-Values_003a-314"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>item</var>&mdash;an <i>object</i>.  
</p>
<p><var>place</var>&mdash;a <i>place</i>, the <i>value</i> of which is a <i>proper list</i>. 
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>new-place-value</var>&mdash;a <i>list</i> (the new <i>value</i> of <var>place</var>).
</p>
<span id="Description_003a-415"></span><h4 class="subsubheading">Description:</h4>

<p><code>pushnew</code> tests whether  <var>item</var> is the same as any existing
element of the <i>list</i> stored in <var>place</var>.  If <var>item</var> is not,
it is prepended to the <i>list</i>, and the new <i>list</i> is stored in
<var>place</var>.
</p>
<p><code>pushnew</code> returns the new <i>list</i> that is stored in <var>place</var>.
</p>
<p>Whether or not <var>item</var> is already a member of the <i>list</i> that is
in <var>place</var> is determined by comparisons using <tt>:test</tt> or <tt>:test-not</tt>.
The first argument to the <tt>:test</tt> or <tt>:test-not</tt>
function is <var>item</var>; the second argument is
an element of the <i>list</i> in <var>place</var> as returned by
the <tt>:key</tt> function (if supplied).
</p>
<p>If <tt>:key</tt> is supplied, it is used to extract the part to be tested from
both <var>item</var> and the <i>list</i> element,
as for <code>adjoin</code>.
</p>
<p>The argument to the <tt>:key</tt> function 
is an element of the <i>list</i> stored in 
<var>place</var>. The <tt>:key</tt> function typically returns part
part of the element of the <i>list</i>.
If <tt>:key</tt> is not supplied or <code>nil</code>, the <i>list</i> 
element is used.
</p>
<p>For information about the <i>evaluation</i> of <i>subforms</i> of <var>place</var>,
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
</p>
<p>It is <i>implementation-dependent</i> whether or not <code>pushnew</code> 
actually executes the storing form for its <var>place</var> in the
situation where the <var>item</var> is already a member of the <i>list</i>
held by <var>place</var>.
</p>
<span id="Examples_003a-298"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq x '(a (b c) d)) <span class="roman">→</span> (A (B C) D)
 (pushnew 5 (cadr x)) <span class="roman">→</span> (5 B C)   
 x <span class="roman">→</span> (A (5 B C) D)
 (pushnew 'b (cadr x)) <span class="roman">→</span> (5 B C)  
 x <span class="roman">→</span> (A (5 B C) D)
 (setq lst '((1) (1 2) (1 2 3))) <span class="roman">→</span> ((1) (1 2) (1 2 3))
 (pushnew '(2) lst) <span class="roman">→</span> ((2) (1) (1 2) (1 2 3))
 (pushnew '(1) lst) <span class="roman">→</span> ((1) (2) (1) (1 2) (1 2 3))
 (pushnew '(1) lst :test 'equal) <span class="roman">→</span> ((1) (2) (1) (1 2) (1 2 3))
 (pushnew '(1) lst :key #'car) <span class="roman">→</span> ((1) (2) (1) (1 2) (1 2 3)) 
</pre></div>


<span id="Side-Effects_003a-45"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The contents of <var>place</var> may be modified.
</p>
<span id="See-Also_003a-339"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#push">push</a>,
<a href="#adjoin">adjoin</a>,
<a href="Data-and-Control-Flow.html#Generalized-Reference">Section 5.1 (Generalized Reference)</a>
</p>
<span id="Notes_003a-224"></span><h4 class="subsubheading">Notes:</h4>

<p>The effect of
</p><div class="lisp">
<pre class="lisp"> (pushnew item place :test p)
</pre></div>

<p>is roughly equivalent to
</p><div class="lisp">
<pre class="lisp"> (setf place (adjoin item place :test p))
</pre></div>

<p>except that the <i>subforms</i> of <code>place</code> are evaluated only once, 
and <code>item</code> is evaluated before <code>place</code>.
</p>

<hr>
<span id="set_002ddifference_003b-nset_002ddifference"></span><div class="header">
<p>
Next: <a href="#set_002dexclusive_002dor_003b-nset_002dexclusive_002dor" accesskey="n" rel="next">set-exclusive-or; nset-exclusive-or</a>, Previous: <a href="#pushnew" accesskey="p" rel="prev">pushnew</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">set-difference; nset-difference</h4>
<span id="set_002ddifference_002c-nset_002ddifference-_0028Function_0029"></span><h3 class="heading">set-difference, nset-difference (Function)</h3>
<span id="index-set_002ddifference-2"></span>
<span id="index-set_002ddifference"></span>
<span id="index-nset_002ddifference-2"></span>
<span id="index-nset_002ddifference"></span>
<span id="set_002ddifference"></span>

<span id="Syntax_003a-326"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-set_002ddifference-1">Function: <strong>set-difference</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nset_002ddifference-1">Function: <strong>nset-difference</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-315"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list-1</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-2</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-416"></span><h4 class="subsubheading">Description:</h4>
<p><code>set-difference</code> returns a <i>list</i> 
of elements of <var>list-1</var>
that do not appear in <var>list-2</var>.  
</p>
<p><code>nset-difference</code> is the destructive 
version of <code>set-difference</code>.
It may destroy <var>list-1</var>.
</p>
<p>For all possible ordered pairs consisting of
one element from <var>list-1</var> and one element from <var>list-2</var>, the 
<tt>:test</tt> or <tt>:test-not</tt> function is
used to determine whether they <i>satisfy the test</i>.  
The first argument to the <tt>:test</tt> or <tt>:test-not</tt> function 
is the part of an element of <var>list-1</var> that is returned by 
the <tt>:key</tt> function (if supplied); the second argument is the part of 
an element of <var>list-2</var> that is 
returned by the <tt>:key</tt> function (if supplied).
</p>
<p>If <tt>:key</tt> is supplied, its argument is a <var>list-1</var> or
<var>list-2</var> element. The <tt>:key</tt> function 
typically returns part of 
the supplied element.
If <tt>:key</tt> is not supplied, the <var>list-1</var> or <var>list-2</var>
element is used.
</p>
<p>An element of <var>list-1</var>
appears in the result if and only if it does not match any element
of <var>list-2</var>.  
</p>
<p>There is no guarantee that the order of elements in the result will
reflect the ordering of the arguments in any particular way.
The result <i>list</i> 
may share cells with, or be <code>eq</code> to, either of <var>list-1</var>
or <var>list-2</var>,
if appropriate.
</p>
<span id="Examples_003a-299"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq lst1 (list &quot;A&quot; &quot;b&quot; &quot;C&quot; &quot;d&quot;)
       lst2 (list &quot;a&quot; &quot;B&quot; &quot;C&quot; &quot;d&quot;)) <span class="roman">→</span> (&quot;a&quot; &quot;B&quot; &quot;C&quot; &quot;d&quot;)
 (set-difference lst1 lst2) <span class="roman">→</span> (&quot;d&quot; &quot;C&quot; &quot;b&quot; &quot;A&quot;)
 (set-difference lst1 lst2 :test 'equal) <span class="roman">→</span> (&quot;b&quot; &quot;A&quot;)
 (set-difference lst1 lst2 :test #'equalp) <span class="roman">→</span> NIL 
 (nset-difference lst1 lst2 :test #'string=) <span class="roman">→</span> (&quot;A&quot; &quot;b&quot;)
 (setq lst1 '((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;)))
<span class="roman">→</span> ((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;)) 
 (setq lst2 '((&quot;c&quot; . &quot;a&quot;) (&quot;e&quot; . &quot;b&quot;) (&quot;d&quot; . &quot;a&quot;)))
<span class="roman">→</span> ((&quot;c&quot; . &quot;a&quot;) (&quot;e&quot; . &quot;b&quot;) (&quot;d&quot; . &quot;a&quot;)) 
 (nset-difference lst1 lst2 :test #'string= :key #'cdr)
<span class="roman">→</span> ((&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;)) 
 lst1 <span class="roman">→</span> ((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;)) 
 lst2 <span class="roman">→</span> ((&quot;c&quot; . &quot;a&quot;) (&quot;e&quot; . &quot;b&quot;) (&quot;d&quot; . &quot;a&quot;)) 
</pre></div>

<div class="lisp">
<pre class="lisp">;; Remove all flavor names that contain &quot;c&quot; or &quot;w&quot;.
 (set-difference '(&quot;strawberry&quot; &quot;chocolate&quot; &quot;banana&quot;
                  &quot;lemon&quot; &quot;pistachio&quot; &quot;rhubarb&quot;)
          '(#\c #\w)
          :test #'(lambda (s c) (find c s)))
<span class="roman">→</span> (&quot;banana&quot; &quot;rhubarb&quot; &quot;lemon&quot;)    ;One possible ordering.
</pre></div>


<span id="Side-Effects_003a-46"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nset-difference</code> may destroy <var>list-1</var>.
</p>
<span id="Exceptional-Situations_003a-134"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>list-1</var> and <var>list-2</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-340"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-225"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>

<hr>
<span id="set_002dexclusive_002dor_003b-nset_002dexclusive_002dor"></span><div class="header">
<p>
Next: <a href="#subsetp" accesskey="n" rel="next">subsetp</a>, Previous: <a href="#set_002ddifference_003b-nset_002ddifference" accesskey="p" rel="prev">set-difference; nset-difference</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">set-exclusive-or; nset-exclusive-or</h4>
<span id="set_002dexclusive_002dor_002c-nset_002dexclusive_002dor-_0028Function_0029"></span><h3 class="heading">set-exclusive-or, nset-exclusive-or (Function)</h3>
<span id="index-set_002dexclusive_002dor-2"></span>
<span id="index-set_002dexclusive_002dor"></span>
<span id="index-nset_002dexclusive_002dor-2"></span>
<span id="index-nset_002dexclusive_002dor"></span>


<span id="Syntax_003a-327"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-set_002dexclusive_002dor-1">Function: <strong>set-exclusive-or</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nset_002dexclusive_002dor-1">Function: <strong>nset-exclusive-or</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-316"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list-1</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-2</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-417"></span><h4 class="subsubheading">Description:</h4>
<p><code>set-exclusive-or</code> returns a <i>list</i> of elements that appear
in exactly one of <var>list-1</var> and <var>list-2</var>.
</p>
<p><code>nset-exclusive-or</code> 
is the <i>destructive</i> version of <code>set-exclusive-or</code>.
</p>
<p>For all possible ordered pairs consisting of
one element from <var>list-1</var> and one element from <var>list-2</var>, the 
<tt>:test</tt> or <tt>:test-not</tt> function is
used to determine whether they <i>satisfy the test</i>.  
</p>
<p>If <tt>:key</tt> is supplied, it is used to
extract the part to be tested from the <var>list-1</var> or <var>list-2</var> element. 
The first argument to the <tt>:test</tt> or <tt>:test-not</tt> function 
is the part of an element of <var>list-1</var> extracted by the <tt>:key</tt>
function (if supplied); the second argument  is the part of an 
element of <var>list-2</var> extracted by the <tt>:key</tt> function (if supplied).
If <tt>:key</tt> is not supplied or <code>nil</code>, the <var>list-1</var> or
<var>list-2</var> element is used.
</p>
<p>The result contains precisely
those elements of <var>list-1</var> and <var>list-2</var> 
that appear in no matching pair.
</p>
<p>The result <i>list</i> of <code>set-exclusive-or</code> 
might share storage with one of <var>list-1</var> or <var>list-2</var>.
</p>
<span id="Examples_003a-300"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq lst1 (list 1 &quot;a&quot; &quot;b&quot;)
       lst2 (list 1 &quot;A&quot; &quot;b&quot;)) <span class="roman">→</span> (1 &quot;A&quot; &quot;b&quot;)
 (set-exclusive-or lst1 lst2) <span class="roman">→</span> (&quot;b&quot; &quot;A&quot; &quot;b&quot; &quot;a&quot;)
 (set-exclusive-or lst1 lst2 :test #'equal) <span class="roman">→</span> (&quot;A&quot; &quot;a&quot;)
 (set-exclusive-or lst1 lst2 :test 'equalp) <span class="roman">→</span> NIL 
 (nset-exclusive-or lst1 lst2) <span class="roman">→</span> (&quot;a&quot; &quot;b&quot; &quot;A&quot; &quot;b&quot;) 
 (setq lst1 (list ((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;))))
<span class="roman">→</span> ((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;))
 (setq lst2 (list ((&quot;c&quot; . &quot;a&quot;) (&quot;e&quot; . &quot;b&quot;) (&quot;d&quot; . &quot;a&quot;))))
<span class="roman">→</span> ((&quot;c&quot; . &quot;a&quot;) (&quot;e&quot; . &quot;b&quot;) (&quot;d&quot; . &quot;a&quot;)) 
 (nset-exclusive-or lst1 lst2 :test #'string= :key #'cdr)
<span class="roman">→</span> ((&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;) (&quot;c&quot; . &quot;a&quot;) (&quot;d&quot; . &quot;a&quot;)) 
 lst1 <span class="roman">→</span> ((&quot;a&quot; . &quot;b&quot;) (&quot;c&quot; . &quot;d&quot;) (&quot;e&quot; . &quot;f&quot;))
 lst2 <span class="roman">→</span> ((&quot;c&quot; . &quot;a&quot;) (&quot;d&quot; . &quot;a&quot;)) 
</pre></div>


<span id="Side-Effects_003a-47"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nset-exclusive-or</code> is permitted to modify any part,
<i>car</i> or <i>cdr</i>, of the <i>list structure</i> of <var>list-1</var> or <var>list-2</var>.
</p>
<span id="Exceptional-Situations_003a-135"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>list-1</var> and <var>list-2</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-341"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-226"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>Since the <code>nset-exclusive-or</code> side effect is not required,
it should not be used in for-effect-only
positions in portable code.
</p>


<hr>
<span id="subsetp"></span><div class="header">
<p>
Next: <a href="#union_003b-nunion" accesskey="n" rel="next">union; nunion</a>, Previous: <a href="#set_002dexclusive_002dor_003b-nset_002dexclusive_002dor" accesskey="p" rel="prev">set-exclusive-or; nset-exclusive-or</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">subsetp</h4>
<span id="subsetp-_0028Function_0029"></span><h3 class="heading">subsetp (Function)</h3>
<span id="index-subsetp-2"></span>
<span id="index-subsetp"></span>


<span id="Syntax_003a-328"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-subsetp-1">Function: <strong>subsetp</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-317"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list-1</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-2</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-418"></span><h4 class="subsubheading">Description:</h4>

<p><code>subsetp</code> returns <i>true</i> if every element of <var>list-1</var>
matches some element of <var>list-2</var>,
and <i>false</i> otherwise.
</p>
<p>Whether a list element is the same as another list element is
determined by the functions specified by the keyword arguments.  
The first argument to the <tt>:test</tt> or <tt>:test-not</tt> 
function is 
typically
part of an element of <var>list-1</var> extracted by
the <tt>:key</tt> function; the second argument is  typically part of 
an element of <var>list-2</var> extracted by
the <tt>:key</tt> function.
</p>
<p>The argument to the <tt>:key</tt> function is an element of either
<var>list-1</var> or <var>list-2</var>; the return value is part of the element
of the supplied list element.
If <tt>:key</tt> is not supplied or <code>nil</code>, 
the <var>list-1</var> or <var>list-2</var>
element itself is supplied to the <tt>:test</tt> or <tt>:test-not</tt> 
function.
</p>
<span id="Examples_003a-301"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq cosmos '(1 &quot;a&quot; (1 2))) <span class="roman">→</span> (1 &quot;a&quot; (1 2))
 (subsetp '(1) cosmos) <span class="roman">→</span> <i>true</i>
 (subsetp '((1 2)) cosmos) <span class="roman">→</span> <i>false</i>
 (subsetp '((1 2)) cosmos :test 'equal) <span class="roman">→</span> <i>true</i>
 (subsetp '(1 &quot;A&quot;) cosmos :test #'equalp) <span class="roman">→</span> <i>true</i>
 (subsetp '((1) (2)) '((1) (2))) <span class="roman">→</span> <i>false</i>
 (subsetp '((1) (2)) '((1) (2)) :key #'car) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Exceptional-Situations_003a-136"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>list-1</var> and <var>list-2</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-342"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-227"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>

<hr>
<span id="union_003b-nunion"></span><div class="header">
<p>
Previous: <a href="#subsetp" accesskey="p" rel="prev">subsetp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">union; nunion</h4>
<span id="union_002c-nunion-_0028Function_0029"></span><h3 class="heading">union, nunion (Function)</h3>
<span id="index-union-2"></span>
<span id="index-union"></span>
<span id="index-nunion-2"></span>
<span id="index-nunion"></span>
<span id="union"></span>

<span id="Syntax_003a-329"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-union-1">Function: <strong>union</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>
<dl>
<dt id="index-nunion-1">Function: <strong>nunion</strong> <em>list-1 list-2 <tt>&amp;key</tt> key test test-not <span class="roman">→</span> result-list</em></dt>
</dl>

<span id="Arguments-and-Values_003a-318"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>list-1</var>&mdash;a <i>proper list</i>.
</p>
<p><var>list-2</var>&mdash;a <i>proper list</i>.
</p>
<p><var>test</var>&mdash;a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>test-not</var>&mdash;a <i>designator</i> for 
a <i>function</i> of two <i>arguments</i>
that returns a <i>generalized boolean</i>.
</p>
<p><var>key</var>&mdash;a <i>designator</i> for a <i>function</i> of one argument,
or <code>nil</code>.
</p>
<p><var>result-list</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-419"></span><h4 class="subsubheading">Description:</h4>

<p><code>union</code> and <code>nunion</code> return a <i>list</i>
that contains every element that occurs in either <var>list-1</var> 
or <var>list-2</var>.                                 
</p>
<p>For all possible ordered pairs consisting of one
element from <var>list-1</var> 
and one element from <var>list-2</var>, <tt>:test</tt> or  <tt>:test-not</tt> is used
to determine whether they <i>satisfy the test</i>. 
The first argument to the <tt>:test</tt> or <tt>:test-not</tt> 
function is the part of the element of <var>list-1</var> extracted by the
<tt>:key</tt> function (if supplied); the second argument  
is the part of the element of <var>list-2</var> extracted by the
<tt>:key</tt> function (if supplied).
</p>
<p>The argument to the <tt>:key</tt> function is an element of
<var>list-1</var> or <var>list-2</var>; the return value is part of the supplied
element.  
If <tt>:key</tt> is not supplied or <code>nil</code>, 
the element of <var>list-1</var> or <var>list-2</var>
itself is supplied to the <tt>:test</tt> or <tt>:test-not</tt> function. 
</p>
<p>For every matching pair, 
one of the two elements of the pair will be in the result.  Any
element from either <var>list-1</var> or <var>list-2</var>
that matches no element of the other will appear
in the result.  
</p>
<p>If there is a duplication between <var>list-1</var> 
and <var>list-2</var>,
only one of the duplicate instances will be in the result.
If either <var>list-1</var> 
or <var>list-2</var> has duplicate entries within it,
the redundant entries
might or might not appear in the result.
</p>
<p>The order of elements in the result do not have to
reflect the ordering of <var>list-1</var> or <var>list-2</var> in any way.
The result <i>list</i> may be <code>eq</code> to either
<var>list-1</var> or <var>list-2</var> if appropriate.
</p>
<span id="Examples_003a-302"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (union '(a b c) '(f a d))
<span class="roman">→</span> (A B C F D)
or<span class="roman">→</span> (B C F A D)
or<span class="roman">→</span> (D F A B C)
 (union '((x 5) (y 6)) '((z 2) (x 4)) :key #'car)
<span class="roman">→</span> ((X 5) (Y 6) (Z 2))
or<span class="roman">→</span> ((X 4) (Y 6) (Z 2))

 (setq lst1 (list 1 2 '(1 2) &quot;a&quot; &quot;b&quot;)
       lst2 (list 2 3 '(2 3) &quot;B&quot; &quot;C&quot;))
<span class="roman">→</span> (2 3 (2 3) &quot;B&quot; &quot;C&quot;)
 (nunion lst1 lst2)
<span class="roman">→</span> (1 (1 2) &quot;a&quot; &quot;b&quot; 2 3 (2 3) &quot;B&quot; &quot;C&quot;) 
or<span class="roman">→</span> (1 2 (1 2) &quot;a&quot; &quot;b&quot; &quot;C&quot; &quot;B&quot; (2 3) 3)
</pre></div>


<span id="Side-Effects_003a-48"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>nunion</code> is permitted to modify any part, <i>car</i> or <i>cdr</i>, 
of the <i>list structure</i> of <var>list-1</var> or <var>list-2</var>.
</p>
<span id="Exceptional-Situations_003a-137"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var><var>list-1</var> and <var>list-2</var></var> are not <i>proper lists</i>.
</p>
<span id="See-Also_003a-343"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#intersection">intersection</a>,
<a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>
<span id="Notes_003a-228"></span><h4 class="subsubheading">Notes:</h4>

<p>The <tt>:test-not</tt> parameter is deprecated.
</p>
<p>Since the <code>nunion</code> side effect is not required,
it should not be used in for-effect-only positions in portable code.
</p>



<hr>
<div class="header">
<p>
Previous: <a href="#subsetp" accesskey="p" rel="prev">subsetp</a>, Up: <a href="#Conses" accesskey="u" rel="up">Conses</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
