<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Constructing Numbers from Tokens (ANSI Common Lisp)</title>

<meta name="description" content="Constructing Numbers from Tokens (ANSI Common Lisp)">
<meta name="keywords" content="Constructing Numbers from Tokens (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Interpretation-of-Tokens.html" rel="up" title="Interpretation of Tokens">
<link href="The-Consing-Dot.html" rel="next" title="The Consing Dot">
<link href="Numbers-as-Tokens.html" rel="prev" title="Numbers as Tokens">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="Constructing-Numbers-from-Tokens"></span><div class="header">
<p>
Next: <a href="The-Consing-Dot.html" accesskey="n" rel="next">The Consing Dot</a>, Previous: <a href="Numbers-as-Tokens.html" accesskey="p" rel="prev">Numbers as Tokens</a>, Up: <a href="Interpretation-of-Tokens.html" accesskey="u" rel="up">Interpretation of Tokens</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Constructing-Numbers-from-Tokens-1"></span><h4 class="subsection">2.3.2 Constructing Numbers from Tokens</h4>

<p>A <i>real</i> is constructed directly from a corresponding numeric <i>token</i>;
see <a href="Numbers-as-Tokens.html#SyntaxForNumericTokens">Figure 2.9</a>.
</p>
<p>A <i>complex</i> is notated as a <code>#C</code> (or <code>#c</code>) followed by a <i>list</i>
of two <i>reals</i>; see <a href="Sharpsign.html#SharpsignC">Section 2.4.8.11 (Sharpsign C)</a>.
</p>
<p>The <i>reader macros</i> <code>#B</code>, <code>#O</code>, <code>#X</code>, and <code>#R</code> may also be useful
in controlling the input <i>radix</i> in which <i>rationals</i> are parsed;
see <a href="Sharpsign.html#SharpsignB">Section 2.4.8.7 (Sharpsign B)</a>,
<a href="Sharpsign.html#SharpsignO">Section 2.4.8.8 (Sharpsign O)</a>,
<a href="Sharpsign.html#SharpsignX">Section 2.4.8.9 (Sharpsign X)</a>,
and <a href="Sharpsign.html#SharpsignR">Section 2.4.8.10 (Sharpsign R)</a>.
</p>
<p>This section summarizes the full syntax for <i>numbers</i>.
</p>
<span id="Syntax-of-a-Rational"></span><h4 class="subsubsection">2.3.2.1 Syntax of a Rational</h4>

<span id="g_t2_002e3_002e2_002e1_002e1-Syntax-of-an-Integer"></span><h4 class="unnumberedsubsubsec">2.3.2.1.1 Syntax of an Integer</h4>

<span id="SyntaxOfIntegers"></span>
<p><i>Integers</i> can be written as a sequence of <i>digits</i>, 
optionally preceded by a <i>sign</i> and optionally followed by a decimal point;
see <a href="Numbers-as-Tokens.html#SyntaxForNumericTokens">Figure 2.9</a>.
When a decimal point is used,
the <i>digits</i> are taken to be in <i>radix</i> <code>10</code>;
when no decimal point is used,
the <i>digits</i> are taken to be in radix given by the <i>current input base</i>.
</p>
<p>For information on how <i>integers</i> are printed, see <a href="Default-Print_002dObject-Methods.html#PrintingIntegers">Section 22.1.3.1.1 (Printing Integers)</a>.
</p>

<span id="g_t2_002e3_002e2_002e1_002e2-Syntax-of-a-Ratio"></span><h4 class="unnumberedsubsubsec">2.3.2.1.2 Syntax of a Ratio</h4>

<span id="SyntaxOfRatios"></span>
<p><i>Ratios</i> can be written as an optional <i>sign</i> followed by two
non-empty sequences of <i>digits</i> separated by a <i>slash</i>;
see <a href="Numbers-as-Tokens.html#SyntaxForNumericTokens">Figure 2.9</a>.
The second sequence may not consist
entirely of zeros.
Examples of <i>ratios</i> are in the next figure.
</p>

<div class="float"><span id="fig2_002e13"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><code>2/3</code></td><td>;This is in canonical form</td></tr>
<tr><td><code>4/6</code></td><td>;A non-canonical form for 2/3</td></tr>
<tr><td><code>-17/23</code></td><td>;A ratio preceded by a sign</td></tr>
<tr><td><code>-30517578125/32768</code></td><td>;This is (-5/2)^15</td></tr>
<tr><td><code>10/5</code></td><td>;The canonical form for this is <code>2</code></td></tr>
<tr><td><code>#o-101/75</code></td><td>;Octal notation for -65/61</td></tr>
<tr><td><code>#3r120/21</code></td><td>;Ternary notation for 15/7</td></tr>
<tr><td><code>#Xbc/ad</code></td><td>;Hexadecimal notation for 188/173</td></tr>
<tr><td><code>#xFADED/FACADE</code></td><td>;Hexadecimal notation for 1027565/16435934</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.13: </strong>Examples of Ratios</p></div></div>



<p>For information on how <i>ratios</i> are printed,
see <a href="Default-Print_002dObject-Methods.html#PrintingRatios">Section 22.1.3.1.2 (Printing Ratios)</a>.
</p>


<span id="Syntax-of-a-Float"></span><h4 class="subsubsection">2.3.2.2 Syntax of a Float</h4>
<span id="SyntaxOfFloats"></span>
<p><i>Floats</i> can be written in either decimal fraction or computerized
scientific notation: an optional sign, then a non-empty sequence of digits
with an embedded decimal point,
then an optional decimal exponent specification.
If there is no exponent specifier, then
the decimal point is required, and there must be digits
after it.
The exponent specifier consists of an <i>exponent marker</i>,
an optional sign, and a non-empty sequence of digits.
If no exponent specifier is present, or if the <i>exponent marker</i> <code>e</code>
(or <code>E</code>) is used, then
the format specified
by <code>*read-default-float-format*</code> is used.
See <a href="Numbers-as-Tokens.html#SyntaxForNumericTokens">Figure 2.9</a>.
</p>
<p>An implementation may provide one or more kinds of <i>float</i>
that collectively make up the <i>type</i> <code>float</code>.
The letters <code>s</code>, <code>f</code>, <code>d</code>, and <code>l</code> (or their
respective uppercase equivalents) explicitly specify the
use of the <i>types</i> <code>short-float</code>, <code>single-float</code>, 
<code>double-float</code>, and <code>long-float</code>, respectively.
</p>
<p>The internal format used for an external representation depends only
on the <i>exponent marker</i>, and not on the number of decimal digits
in the external representation.
</p>
<p>The next figure&nbsp;<!-- /@w -->contains examples of notations for <i>floats</i>: 
</p>

<div class="float"><span id="fig2_002e14"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><code>0.0</code></td><td>;Floating-point zero in default format</td></tr>
<tr><td><code>0E0</code></td><td>;As input, this is also floating-point zero in default format.</td></tr>
<tr><td></td><td>;As output, this would appear as <code>0.0</code>.</td></tr>
<tr><td><code>0e0</code></td><td>;As input, this is also floating-point zero in default format.</td></tr>
<tr><td></td><td>;As output, this would appear as <code>0.0</code>.</td></tr>
<tr><td><code>-.0</code></td><td>;As input, this might be a zero or a minus zero,</td></tr>
<tr><td></td><td>; depending on whether the implementation supports</td></tr>
<tr><td></td><td>; a distinct minus zero.</td></tr>
<tr><td></td><td>;As output, <code>0.0</code> is zero and <code>-0.0</code> is minus zero.</td></tr>
<tr><td><code>0.</code></td><td>;On input, the integer zero&mdash;<i>not</i> a floating-point number!</td></tr>
<tr><td></td><td>;Whether this appears as <code>0</code> or <code>0.</code> on output depends</td></tr>
<tr><td></td><td>;on the <i>value</i> of <code>*print-radix*</code>.</td></tr>
<tr><td><code>0.0s0</code></td><td>;A floating-point zero in short format</td></tr>
<tr><td><code>0s0</code></td><td>;As input, this is a floating-point zero in short format.</td></tr>
<tr><td></td><td>;As output, such a zero would appear as <code>0.0s0</code></td></tr>
<tr><td></td><td>; (or as <code>0.0</code> if <tt>short-float</tt> was the default format).</td></tr>
<tr><td><code>6.02E+23</code></td><td>;Avogadro&rsquo;s number, in default format</td></tr>
<tr><td><code>602E+21</code></td><td>;Also Avogadro&rsquo;s number, in default format</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.14: </strong>Examples of Floating-point numbers</p></div></div>

<p>For information on how <i>floats</i> are printed,
see <a href="Default-Print_002dObject-Methods.html#PrintingFloats">Section 22.1.3.1.3 (Printing Floats)</a>.
</p>

<span id="Syntax-of-a-Complex"></span><h4 class="subsubsection">2.3.2.3 Syntax of a Complex</h4>
<span id="SyntaxOfComplexes"></span>
<p>A <i>complex</i> has a Cartesian structure, 
with a real part and an imaginary part each of which is a 
<i>real</i>.
The parts of a <i>complex</i> are not necessarily <i>floats</i> 
but both parts must be of the same <i>type</i>: 
</p>
<p>either both are <i>rationals</i>, or both are of the same <i>float</i> <i>subtype</i>.
When constructing a <i>complex</i>, if the specified parts are not the
same <i>type</i>, the parts are converted to be the same <i>type</i>
internally (<i>i.e.</i>, the <i>rational</i> part is converted to a <i>float</i>). 
An <i>object</i> of type <code>(complex rational)</code> is converted internally
and represented thereafter as a <i>rational</i> if its imaginary part is an 
<i>integer</i> whose value is 0.
</p>
<p>For further information, see <a href="Sharpsign.html#SharpsignC">Section 2.4.8.11 (Sharpsign C)</a>&nbsp;<!-- /@w -->and <a href="Default-Print_002dObject-Methods.html#PrintingComplexes">Section 22.1.3.1.4 (Printing Complexes)</a>.
</p>


<hr>
<div class="header">
<p>
Next: <a href="The-Consing-Dot.html" accesskey="n" rel="next">The Consing Dot</a>, Previous: <a href="Numbers-as-Tokens.html" accesskey="p" rel="prev">Numbers as Tokens</a>, Up: <a href="Interpretation-of-Tokens.html" accesskey="u" rel="up">Interpretation of Tokens</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
