<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>FORMAT Miscellaneous Pseudo-Operations (ANSI Common Lisp)</title>

<meta name="description" content="FORMAT Miscellaneous Pseudo-Operations (ANSI Common Lisp)">
<meta name="keywords" content="FORMAT Miscellaneous Pseudo-Operations (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formatted-Output.html" rel="up" title="Formatted Output">
<link href="Additional-Information-about-FORMAT-Operations.html" rel="next" title="Additional Information about FORMAT Operations">
<link href="FORMAT-Miscellaneous-Operations.html" rel="prev" title="FORMAT Miscellaneous Operations">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="FORMAT-Miscellaneous-Pseudo_002dOperations"></span><div class="header">
<p>
Next: <a href="Additional-Information-about-FORMAT-Operations.html" accesskey="n" rel="next">Additional Information about FORMAT Operations</a>, Previous: <a href="FORMAT-Miscellaneous-Operations.html" accesskey="p" rel="prev">FORMAT Miscellaneous Operations</a>, Up: <a href="Formatted-Output.html" accesskey="u" rel="up">Formatted Output</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="FORMAT-Miscellaneous-Pseudo_002dOperations-1"></span><h4 class="subsection">22.3.9 FORMAT Miscellaneous Pseudo-Operations</h4>

<span id="Tilde-Semicolon_003a-Clause-Separator"></span><h4 class="subsubsection">22.3.9.1 Tilde Semicolon: Clause Separator</h4>
<span id="index-Semicolon-_0028format-directive_0029"></span>
<span id="index-Tilde-Semicolon-_0028format-directive_0029"></span>

<p>This separates clauses in <code>~[</code> and <code>~&lt;</code> constructs.
The consequences of using it elsewhere are undefined.
</p>

<span id="Tilde-Circumflex_003a-Escape-Upward"></span><h4 class="subsubsection">22.3.9.2 Tilde Circumflex: Escape Upward</h4>
<span id="index-Circumflex-_0028format-directive_0029"></span>
<span id="index-Tilde-Circumflex-_0028format-directive_0029"></span>

<p><code>~^ </code>
</p>
<p>This is an escape construct.  If there are no more arguments remaining to
be processed, then the immediately           
enclosing <code>~{  </code> or <code>~&lt;</code> construct
is terminated.  If there is no such enclosing construct, then the entire
formatting operation is terminated.  
In the <code>~&lt;</code> case, the formatting
is performed, but no more segments are processed before doing the
justification.     
<code>~^ </code> may appear anywhere in a <code>~{  </code>
construct.
</p>
<div class="lisp">
<pre class="lisp"> (setq donestr &quot;Done.~^ ~D warning~:P.~^ ~D error~:P.&quot;)
<span class="roman">→</span> &quot;Done.~^ ~D warning~:P.~^ ~D error~:P.&quot;
 (format nil donestr) <span class="roman">→</span> &quot;Done.&quot;
 (format nil donestr 3) <span class="roman">→</span> &quot;Done. 3 warnings.&quot;
 (format nil donestr 1 5) <span class="roman">→</span> &quot;Done. 1 warning. 5 errors.&quot;
</pre></div>


<p>If a prefix parameter is given, then termination occurs if the parameter
is zero.  (Hence <code>~^</code> is equivalent to 
<code>~#^</code>.)  If two
parameters are given, termination occurs if they are equal.
  If three
parameters are given, termination occurs if the first is less than or
equal to the second and the second is less than or equal to the third.
Of course, this is useless if all the prefix parameters are constants; at
least one of them should be a <code>#</code> or a <code>V</code> parameter.
</p>
<p>If <code>~^</code> is used within a <code>~:{  </code> 
construct, then it terminates
the current iteration step because in the standard case it tests for
remaining arguments of the current step only; the next iteration step
commences immediately.  <code>~:^</code> is used to terminate
the iteration process.
<code>~:^</code> 
may be used only if the command it would terminate is 
<code>~:{  </code> or <code>~:@{  </code>.
The entire iteration process is terminated if and only if the sublist that is
supplying the arguments for the current iteration step is the last sublist in
the case of <code>~:{ </code>, 
or the last <code>format</code>        
argument in the case of <code>~:@{  </code>. 
<code>~:^</code> is not
equivalent to <code>~#:^</code>; 
the latter terminates the entire iteration if and only if no
arguments remain for the current iteration step.
For example:
</p>
<div class="lisp">
<pre class="lisp"> (format nil &quot;~:{ <!-- /@w -->~@?~:^ <!-- /@w -->...~} <!-- /@w -->&quot; '((&quot;a&quot;) (&quot;b&quot;))) <span class="roman">→</span> &quot;a...b&quot;
</pre></div>


<p>If <code>~^</code> appears within a control string being processed
under the control of a <code>~?</code> directive, but not within
any <code>~{  </code> or <code>~&lt;</code> construct within that string,
then the string being
processed will be terminated, thereby ending processing
of the <code>~?</code> directive.  Processing then
continues within the string   
containing the <code>~?</code> directive at the point following that directive.
</p>
<p>If <code>~^</code>                                          
appears within a <code>~[</code> or <code>~(</code> construct,
then all the commands up to the <code>~^</code> are properly selected
or case-converted,                   
the <code>~[</code> or <code>~(</code> processing is terminated,
and the outward search continues         
for a <code>~{  </code> or <code>~&lt;</code> construct
to be terminated.  For example:
</p>
<div class="lisp">
<pre class="lisp"> (setq tellstr &quot;~@(~@[~R~]~^ ~A!~)&quot;)
<span class="roman">→</span> &quot;~@(~@[~R~]~^ ~A!~)&quot;
 (format nil tellstr 23) <span class="roman">→</span> &quot;Twenty-three!&quot;
 (format nil tellstr nil &quot;losers&quot;) <span class="roman">→</span> &quot; Losers!&quot;
 (format nil tellstr 23 &quot;losers&quot;) <span class="roman">→</span> &quot;Twenty-three losers!&quot;
</pre></div>


<p>Following are examples of the use of <code>~^</code> 
within a <code>~&lt;</code> construct.
</p>
<div class="lisp">
<pre class="lisp"> (format nil &quot;~15&lt;~S~;~^~S~;~^~S~&gt;&quot; 'foo)
<span class="roman">→</span>  &quot;            FOO&quot;
 (format nil &quot;~15&lt;~S~;~^~S~;~^~S~&gt;&quot; 'foo 'bar)
<span class="roman">→</span>  &quot;FOO         BAR&quot;
 (format nil &quot;~15&lt;~S~;~^~S~;~^~S~&gt;&quot; 'foo 'bar 'baz)
<span class="roman">→</span>  &quot;FOO   BAR   BAZ&quot;
</pre></div>



<span id="Tilde-Newline_003a-Ignored-Newline"></span><h4 class="subsubsection">22.3.9.3 Tilde Newline: Ignored Newline</h4>
<span id="index-Newline-_0028format-directive_0029"></span>
<span id="index-Tilde-Newline-_0028format-directive_0029"></span>

<p><i>Tilde</i> immediately followed by a <i>newline</i> ignores the <i>newline</i>
and any following non-newline <i>whitespace</i><sub>1</sub>
With a <code>:</code>,
the <i>newline</i> is ignored, 
but any following <i>whitespace</i><sub>1</sub>
With an <code>@</code>,
the <i>newline</i> is left in place,
but any following <i>whitespace</i><sub>1</sub>
For example:
</p>
<div class="lisp">
<pre class="lisp"> (defun type-clash-error (fn nargs argnum right-type wrong-type)
   (format *error-output*
           &quot;~&amp;~S requires its ~:[~:R~;~*~]~ 
           argument to be of type ~S,~%but it was called ~
           with an argument of type ~S.~%&quot;
           fn (eql nargs 1) argnum right-type wrong-type))
 (type-clash-error 'aref nil 2 'integer 'vector)  prints:
AREF requires its second argument to be of type INTEGER,
but it was called with an argument of type VECTOR.
NIL
 (type-clash-error 'car 1 1 'list 'short-float)  prints:
CAR requires its argument to be of type LIST,
but it was called with an argument of type SHORT-FLOAT.
NIL
</pre></div>

<p>Note that in this example newlines appear in the output only as specified
by the <code>~&amp;</code> and <code>~%</code> directives; the 
actual newline characters
in the control string are suppressed because each is preceded by a tilde.
</p>


<hr>
<div class="header">
<p>
Next: <a href="Additional-Information-about-FORMAT-Operations.html" accesskey="n" rel="next">Additional Information about FORMAT Operations</a>, Previous: <a href="FORMAT-Miscellaneous-Operations.html" accesskey="p" rel="prev">FORMAT Miscellaneous Operations</a>, Up: <a href="Formatted-Output.html" accesskey="u" rel="up">Formatted Output</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
