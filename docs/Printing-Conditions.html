<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Printing Conditions (ANSI Common Lisp)</title>

<meta name="description" content="Printing Conditions (ANSI Common Lisp)">
<meta name="keywords" content="Printing Conditions (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Condition-System-Concepts.html" rel="up" title="Condition System Concepts">
<link href="Signaling-and-Handling-Conditions.html" rel="next" title="Signaling and Handling Conditions">
<link href="Creating-Conditions.html" rel="prev" title="Creating Conditions">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="Printing-Conditions"></span><div class="header">
<p>
Next: <a href="Signaling-and-Handling-Conditions.html" accesskey="n" rel="next">Signaling and Handling Conditions</a>, Previous: <a href="Creating-Conditions.html" accesskey="p" rel="prev">Creating Conditions</a>, Up: <a href="Condition-System-Concepts.html" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Printing-Conditions-1"></span><h4 class="subsection">9.1.3 Printing Conditions</h4>

<p>If the <tt>:report</tt> argument to <code>define-condition</code> is used,
a print function is defined that is called whenever 
the defined <i>condition</i> is printed while the <i>value</i> of <code>*print-escape*</code> is <i>false</i>. 
This function is called the <span id="index-condition-reporter"></span>
<em>condition reporter</em>;
the text which it outputs is called a <span id="index-report-message"></span>
<em>report message</em>.
</p>
<p>When a <i>condition</i> is printed and <code>*print-escape*</code>
is <i>false</i>, the <i>condition reporter</i> for the <i>condition</i> is invoked.
<i>Conditions</i> are printed automatically by functions such as
<code>invoke-debugger</code>, <code>break</code>, and <code>warn</code>.
</p>
<p>When <code>*print-escape*</code> is <i>true</i>, the <i>object</i> should print in an
abbreviated fashion according to the style of the implementation
(<i>e.g.</i>, by <code>print-unreadable-object</code>).  It is not required that a
<i>condition</i> can be recreated by reading its printed representation.
</p>
<p>No <i>function</i> is provided for directly <i>accessing</i> 
or invoking <i>condition reporters</i>.
</p>
<span id="Recommended-Style-in-Condition-Reporting"></span><h4 class="subsubsection">9.1.3.1 Recommended Style in Condition Reporting</h4>

<p>In order to ensure a properly aesthetic result when presenting
<i>report messages</i> to the user, certain stylistic conventions are
recommended.
</p>
<p>There are stylistic recommendations for the content of the messages
output by <i>condition reporters</i>, but there are no formal requirements 
on those <i>programs</i>.
If a <i>program</i> violates the recommendations for some message, the
display of that message might be less aesthetic than if the guideline
had been observed, but the <i>program</i> is still considered a
<i>conforming program</i>.
</p>
<p>The requirements on a <i>program</i> or <i>implementation</i> which
invokes a <i>condition reporter</i> are somewhat stronger.  A <i>conforming
program</i> must be permitted to assume that if these style guidelines are
followed, proper aesthetics will be maintained.  Where appropriate, any
specific requirements on such routines are explicitly mentioned below.
</p>
<span id="g_t9_002e1_002e3_002e1_002e1-Capitalization-and-Punctuation-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.1 Capitalization and Punctuation in Condition Reports</h4>


<p>It is recommended that a <i>report message</i> be a complete sentences, in the
proper case and correctly punctuated.  In English, for example, this
means the first letter should be uppercase, and there should be a
trailing period.
</p>
<div class="lisp">
<pre class="lisp"> (error &quot;This is a message&quot;)  ; Not recommended
 (error &quot;this is a message.&quot;) ; Not recommended

 (error &quot;This is a message.&quot;) ; Recommended instead
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e2-Leading-and-Trailing-Newlines-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.2 Leading and Trailing Newlines in Condition Reports</h4>


<p>It is recommended that a <i>report message</i> not begin with any 
introductory text, such as &ldquo;<code>Error: </code>&rdquo; or &ldquo;<code>Warning: </code>&rdquo;
or even just <i>freshline</i> or <i>newline</i>. 
Such text is added, if appropriate to the context,
by the routine invoking the <i>condition reporter</i>.
</p>
<p>It is recommended that a <i>report message</i> not be followed 
by a trailing <i>freshline</i> or <i>newline</i>.
Such text is added, if appropriate to the context, 
by the routine invoking the <i>condition reporter</i>.
</p>
<div class="lisp">
<pre class="lisp"> (error &quot;This is a message.~%&quot;)   ; Not recommended
 (error &quot;~&amp;This is a message.&quot;)   ; Not recommended
 (error &quot;~&amp;This is a message.~%&quot;) ; Not recommended

 (error &quot;This is a message.&quot;)     ; Recommended instead
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e3-Embedded-Newlines-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.3 Embedded Newlines in Condition Reports</h4>


<p>Especially if it is long, it is permissible and appropriate for 
a <i>report message</i> to contain one or more embedded <i>newlines</i>.
</p>
<p>If the calling routine conventionally inserts some additional prefix
(such as &ldquo;<code>Error: </code>&rdquo; or &ldquo;<code>;; Error: </code>&rdquo;) on the first line of
the message, it must also assure that an appropriate prefix will be
added to each subsequent line of the output, so that the left edge of
the message output by the <i>condition reporter</i> will still be properly
aligned.
</p>
<div class="lisp">
<pre class="lisp"> (defun test ()
   (error &quot;This is an error message.~%It has two lines.&quot;))

 ;; Implementation A
 (test)
 This is an error message.
 It has two lines.

 ;; Implementation B
 (test)
 ;; Error: This is an error message.
 ;;        It has two lines.

 ;; Implementation C
 (test)
 &gt;&gt; Error: This is an error message. 
           It has two lines.
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e4-Note-about-Tabs-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.4 Note about Tabs in Condition Reports</h4>


<p>Because the indentation of a <i>report message</i> might be shifted to the right or
left by an arbitrary amount, special care should be taken with the
semi-standard <i>character</i> &lt;Tab&gt;&nbsp;<!-- /@w -->
(in those <i>implementations</i> that support such a <i>character</i>).  
Unless the <i>implementation</i> specifically defines its behavior 
in this context, its use should be avoided.
</p>

<span id="g_t9_002e1_002e3_002e1_002e5-Mentioning-Containing-Function-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.5 Mentioning Containing Function in Condition Reports</h4>


<p>The name of the containing function should generally not be mentioned in
<i>report messages</i>.  It is assumed that the <i>debugger</i> will make this
information accessible in situations where it is necessary and appropriate.
</p>



<hr>
<div class="header">
<p>
Next: <a href="Signaling-and-Handling-Conditions.html" accesskey="n" rel="next">Signaling and Handling Conditions</a>, Previous: <a href="Creating-Conditions.html" accesskey="p" rel="prev">Creating Conditions</a>, Up: <a href="Condition-System-Concepts.html" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
