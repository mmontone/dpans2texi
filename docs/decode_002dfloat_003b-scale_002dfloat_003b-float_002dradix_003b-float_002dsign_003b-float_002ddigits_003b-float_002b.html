<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>decode-float; scale-float; float-radix; float-sign; float-digits; float+ (ANSI Common Lisp)</title>

<meta name="description" content="decode-float; scale-float; float-radix; float-sign; float-digits; float+ (ANSI Common Lisp)">
<meta name="keywords" content="decode-float; scale-float; float-radix; float-sign; float-digits; float+ (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Numbers.html" rel="up" title="Numbers">
<link href="float-_0028Function_0029.html" rel="next" title="float (Function)">
<link href="most_002dpositive_002dfixnum_003b-most_002dnegative_002dfixnum.html" rel="prev" title="most-positive-fixnum; most-negative-fixnum">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="decode_002dfloat_003b-scale_002dfloat_003b-float_002dradix_003b-float_002dsign_003b-float_002ddigits_003b-float_002b"></span><div class="header">
<p>
Next: <a href="float-_0028Function_0029.html" accesskey="n" rel="next">float (Function)</a>, Previous: <a href="most_002dpositive_002dfixnum_003b-most_002dnegative_002dfixnum.html" accesskey="p" rel="prev">most-positive-fixnum; most-negative-fixnum</a>, Up: <a href="Numbers.html" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="node-heading">decode-float; scale-float; float-radix; float-sign; float-digits; float+</h4>
<span id="decode_002dfloat_002c-scale_002dfloat_002c-float_002dradix_002c-float_002dsign_002c-float_002ddigits_002c-float_002dprecision_002c-integer_002ddecode_002dfloat-_0028Function_0029"></span><h3 class="heading">decode-float, scale-float, float-radix, float-sign, float-digits, float-precision, integer-decode-float (Function)</h3>
<span id="index-decode_002dfloat-2"></span>
<span id="index-decode_002dfloat"></span>
<span id="index-scale_002dfloat-2"></span>
<span id="index-scale_002dfloat"></span>
<span id="index-float_002dradix-2"></span>
<span id="index-float_002dradix"></span>
<span id="index-float_002dsign-2"></span>
<span id="index-float_002dsign"></span>
<span id="index-float_002ddigits-2"></span>
<span id="index-float_002ddigits"></span>
<span id="index-float_002dprecision-2"></span>
<span id="index-float_002dprecision"></span>
<span id="index-integer_002ddecode_002dfloat-2"></span>
<span id="index-integer_002ddecode_002dfloat"></span>


<span id="Syntax_003a-265"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-decode_002dfloat-1">Function: <strong>decode-float</strong> <em>float <span class="roman">→</span> significand, exponent, sign</em></dt>
</dl>

<dl>
<dt id="index-scale_002dfloat-1">Function: <strong>scale-float</strong> <em>float integer <span class="roman">→</span> scaled-float</em></dt>
</dl>

<dl>
<dt id="index-float_002dradix-1">Function: <strong>float-radix</strong> <em>float <span class="roman">→</span> float-radix</em></dt>
</dl>

<dl>
<dt id="index-float_002dsign-1">Function: <strong>float-sign</strong> <em>float-1 <tt>&amp;optional</tt> float-2 <span class="roman">→</span> signed-float</em></dt>
</dl>

<dl>
<dt id="index-float_002ddigits-1">Function: <strong>float-digits</strong> <em>float <span class="roman">→</span> digits1</em></dt>
</dl>

<dl>
<dt id="index-float_002dprecision-1">Function: <strong>float-precision</strong> <em>float <span class="roman">→</span> digits2</em></dt>
</dl>

<dl>
<dt id="index-integer_002ddecode_002dfloat-1">Function: <strong>integer-decode-float</strong> <em>float <span class="roman">→</span> significand, exponent, integer-sign</em></dt>
</dl>

<span id="Arguments-and-Values_003a-254"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>digits1</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>digits2</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>exponent</var>&mdash;an <i>integer</i>.
</p>
<p><var>float</var>&mdash;a <i>float</i>.
</p>
<p><var>float-1</var>&mdash;a <i>float</i>.
</p>
<p><var>float-2</var>&mdash;a <i>float</i>.
</p>
<p><var>float-radix</var>&mdash;an <i>integer</i>.
</p>
<p><var>integer</var>&mdash;a non-negative <i>integer</i>.
</p>
<p><var>integer-sign</var>&mdash;the <i>integer</i> <code>-1</code>,
or the <i>integer</i> <code>1</code>.
</p>
<p><var>scaled-float</var>&mdash;a <i>float</i>.
</p>
<p><var>sign</var>&mdash;A <i>float</i> of the same <i>type</i> as <var>float</var>
but numerically equal to <code>1.0</code> or <code>-1.0</code>.
</p>
<p><var>signed-float</var>&mdash;a <i>float</i>.
</p>
<p><var>significand</var>&mdash;a <i>float</i>.
</p>
<span id="Description_003a-338"></span><h4 class="subsubheading">Description:</h4>

<p><code>decode-float</code> computes three values that characterize
<var>float</var>.
The first value is of the same <i>type</i>
as <var>float</var> and 
represents the significand.
The second value represents the exponent
to which the radix (notated in this description by <i>b</i>) must
be raised to obtain the value that, when multiplied with the first
result, produces the absolute value of <var>float</var>.
If <var>float</var> is zero, any <i>integer</i> value may be returned, 
provided that the identity shown for <code>scale-float</code> holds.
The third value
is of the same <i>type</i> as <var>float</var>
and is 1.0 if <var>float</var> is greater
than or equal to zero or -1.0 otherwise.
</p>
<p><code>decode-float</code> 
divides <var>float</var> by an integral power of <i>b</i>
so as to bring its value between 1/<i>b</i> (inclusive) and&nbsp;1 (exclusive),
and returns the quotient as the first value.
If <var>float</var> is zero, however, the result
equals the absolute value of <var>float</var> (that is, if there is a negative
zero, its significand is considered to be a positive zero).
</p>
<p><code>scale-float</code> returns
<code>(* <var>float</var> (expt (float <i>b</i> <var>float</var>) 
<var>integer</var>))</code>, where <i>b</i> is the radix of the floating-point
representation. <var>float</var> is not necessarily between 1/<i>b</i> and&nbsp;1.
</p>

<p><code>float-radix</code> returns 
the radix of <var>float</var>.
</p>
<p><code>float-sign</code> returns a number <code>z</code> such
that <code>z</code> and <var>float-1</var> have the same sign and also such that
<code>z</code> and <var>float-2</var> have the same absolute value.
If <var>float-2</var> is not supplied, its value is <code>(float 1 <var>float-1</var>)</code>.
If an implementation
has distinct representations for negative zero and positive zero,
then <code>(float-sign -0.0)</code> <span class="roman">→</span>&nbsp;<!-- /@w --><code>-1.0</code>.
</p>
<p><code>float-digits</code> returns
the number of radix <i>b</i> digits
used in the representation of <var>float</var> (including any implicit
digits, such as a &ldquo;hidden bit&rdquo;).
</p>
<p><code>float-precision</code>
returns
the number of significant radix <i>b</i> digits present in <var>float</var>;
if <var>float</var> is a <i>float</i>
zero, then the result is an <i>integer</i> zero.
</p>
<p>For <i>normalized</i> <i>floats</i>,
the results of <code>float-digits</code> and <code>float-precision</code> are the same,
but the precision is less than the number of representation digits 
for a <i>denormalized</i> or zero number.
</p>
<p><code>integer-decode-float</code> computes three values that characterize
<var>float</var> - 
the significand scaled so as to be an <i>integer</i>,
and the same last two
values that are returned by <code>decode-float</code>.
If <var>float</var> is zero, <code>integer-decode-float</code> returns 
zero as the first value.
The second value bears the same relationship to the first value
as for <code>decode-float</code>:
</p>
<div class="lisp">
<pre class="lisp"> (multiple-value-bind (signif expon sign)
                      (integer-decode-float f)
   (scale-float (float signif f) expon)) ≡ (abs f)
</pre></div>


<span id="Examples_003a-239"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> ;; Note that since the purpose of this functionality is to expose
 ;; details of the implementation, all of these examples are necessarily
 ;; very implementation-dependent.  Results may vary widely.
 ;; Values shown here are chosen consistently from one particular implementation.
 (decode-float .5) <span class="roman">→</span> 0.5, 0, 1.0
 (decode-float 1.0) <span class="roman">→</span> 0.5, 1, 1.0
 (scale-float 1.0 1) <span class="roman">→</span> 2.0
 (scale-float 10.01 -2) <span class="roman">→</span> 2.5025
 (scale-float 23.0 0) <span class="roman">→</span> 23.0
 (float-radix 1.0) <span class="roman">→</span> 2
 (float-sign 5.0) <span class="roman">→</span> 1.0
 (float-sign -5.0) <span class="roman">→</span> -1.0
 (float-sign 0.0) <span class="roman">→</span> 1.0
 (float-sign 1.0 0.0) <span class="roman">→</span> 0.0
 (float-sign 1.0 -10.0) <span class="roman">→</span> 10.0
 (float-sign -1.0 10.0) <span class="roman">→</span> -10.0
 (float-digits 1.0) <span class="roman">→</span> 24
 (float-precision 1.0) <span class="roman">→</span> 24
 (float-precision least-positive-single-float) <span class="roman">→</span> 1
 (integer-decode-float 1.0) <span class="roman">→</span> 8388608, -23, 1
</pre></div>


<span id="Affected-By_003a-58"></span><h4 class="subsubheading">Affected By:</h4>

<p>The implementation&rsquo;s representation for <i>floats</i>.
</p>
<span id="Exceptional-Situations_003a-106"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The functions <code>decode-float</code>, <code>float-radix</code>, <code>float-digits</code>,
<code>float-precision</code>, and <code>integer-decode-float</code> should signal an error
if their only argument is not a <i>float</i>.
</p>
<p>The <i>function</i> <code>scale-float</code> should signal an error if its first argument
is not a <i>float</i> or if its second argument is not an <i>integer</i>.
</p>
<p>The <i>function</i> <code>float-sign</code> should signal an error if its first argument
is not a <i>float</i> or if its second argument is supplied but is 
not a <i>float</i>.
</p>
<span id="Notes_003a-181"></span><h4 class="subsubheading">Notes:</h4>

<p>The product of the first result of <code>decode-float</code> or <code>integer-decode-float</code>,
of the radix raised to the power of the second result, and of the third result
is exactly equal to the value of <var>float</var>.
</p>
<div class="lisp">
<pre class="lisp"> (multiple-value-bind (signif expon sign)
                      (decode-float f)
   (scale-float signif expon))
≡ (abs f)
</pre></div>

<p>and
</p>
<div class="lisp">
<pre class="lisp"> (multiple-value-bind (signif expon sign)
                      (decode-float f)
   (* (scale-float signif expon) sign))
≡ f
</pre></div>


<hr>
<div class="header">
<p>
Next: <a href="float-_0028Function_0029.html" accesskey="n" rel="next">float (Function)</a>, Previous: <a href="most_002dpositive_002dfixnum_003b-most_002dnegative_002dfixnum.html" accesskey="p" rel="prev">most-positive-fixnum; most-negative-fixnum</a>, Up: <a href="Numbers.html" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
