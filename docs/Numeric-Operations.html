<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Numeric Operations (ANSI Common Lisp)</title>

<meta name="description" content="Numeric Operations (ANSI Common Lisp)">
<meta name="keywords" content="Numeric Operations (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Number-Concepts.html" rel="up" title="Number Concepts">
<link href="Implementation_002dDependent-Numeric-Constants.html" rel="next" title="Implementation-Dependent Numeric Constants">
<link href="Number-Concepts.html" rel="prev" title="Number Concepts">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="Numeric-Operations"></span><div class="header">
<p>
Next: <a href="Implementation_002dDependent-Numeric-Constants.html" accesskey="n" rel="next">Implementation-Dependent Numeric Constants</a>, Up: <a href="Number-Concepts.html" accesskey="u" rel="up">Number Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Numeric-Operations-1"></span><h4 class="subsection">12.1.1 Numeric Operations</h4>

<p><span class="roman">Common Lisp</span>&nbsp;<!-- /@w -->provides a large variety of operations related to <i>numbers</i>.
This section provides an overview of those operations by grouping them
into categories that emphasize some of the relationships among them.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to
arithmetic operations.
</p>

<div class="float"><span id="fig12_002e1"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>*</td><td>1+</td><td>gcd</td></tr>
<tr><td>+</td><td>1-</td><td>incf</td></tr>
<tr><td>-</td><td>conjugate</td><td>lcm</td></tr>
<tr><td>/</td><td>decf</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.1: </strong>Operators relating to Arithmetic.</p></div></div>

<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
exponential, logarithmic, and trigonometric operations.
</p>

<div class="float"><span id="fig12_002e2"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>abs</td><td>cos</td><td>signum</td></tr>
<tr><td>acos</td><td>cosh</td><td>sin</td></tr>
<tr><td>acosh</td><td>exp</td><td>sinh</td></tr>
<tr><td>asin</td><td>expt</td><td>sqrt</td></tr>
<tr><td>asinh</td><td>isqrt</td><td>tan</td></tr>
<tr><td>atan</td><td>log</td><td>tanh</td></tr>
<tr><td>atanh</td><td>phase</td><td></td></tr>
<tr><td>cis</td><td>pi</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.2: </strong>Defined names relating to Exponentials, Logarithms, and Trigonometry.</p></div></div>

<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to
numeric comparison and predication.
</p>

<div class="float"><span id="fig12_002e3"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>/=</td><td>&gt;=</td><td>oddp</td></tr>
<tr><td>&lt;</td><td>evenp</td><td>plusp</td></tr>
<tr><td>&lt;=</td><td>max</td><td>zerop</td></tr>
<tr><td>=</td><td>min</td><td></td></tr>
<tr><td>&gt;</td><td>minusp</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.3: </strong>Operators for numeric comparison and predication.</p></div></div>

<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
numeric type manipulation and coercion.
</p>

<div class="float"><span id="fig12_002e4"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>ceiling</td><td>float-radix</td><td>rational</td></tr>
<tr><td>complex</td><td>float-sign</td><td>rationalize</td></tr>
<tr><td>decode-float</td><td>floor</td><td>realpart</td></tr>
<tr><td>denominator</td><td>fround</td><td>rem</td></tr>
<tr><td>fceiling</td><td>ftruncate</td><td>round</td></tr>
<tr><td>ffloor</td><td>imagpart</td><td>scale-float</td></tr>
<tr><td>float</td><td>integer-decode-float</td><td>truncate</td></tr>
<tr><td>float-digits</td><td>mod</td><td></td></tr>
<tr><td>float-precision</td><td>numerator</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.4: </strong>Defined names relating to numeric type manipulation and coercion.</p></div></div>

<span id="Associativity-and-Commutativity-in-Numeric-Operations"></span><h4 class="subsubsection">12.1.1.1 Associativity and Commutativity in Numeric Operations</h4>

<p>For functions that are mathematically associative (and possibly commutative),
a <i>conforming implementation</i> may process the <i>arguments</i> in any manner 
consistent with associative (and possibly commutative) rearrangement.  This does not
affect the order in which the <i>argument</i> <i>forms</i> are <i>evaluated</i>;
for a discussion of evaluation order, see <a href="The-Evaluation-Model.html#FunctionForms">Section 3.1.2.1.2.3 (Function Forms)</a>.
What is unspecified is only the order in which the <i>parameter</i> <i>values</i>
are processed.  This implies that <i>implementations</i> may differ in which 
automatic <i>coercions</i> are applied; see <a href="#NumericContagionRules">Section 12.1.1.2 (Contagion in Numeric Operations)</a>.
</p>
<p>A <i>conforming program</i> can control the order of processing explicitly by 
separating the operations into separate (possibly nested) <i>function forms</i>,
or by writing explicit calls to <i>functions</i> that perform coercions.
</p>
<span id="g_t12_002e1_002e1_002e1_002e1-Examples-of-Associativity-and-Commutativity-in-Numeric-Operations"></span><h4 class="unnumberedsubsubsec">12.1.1.1.1 Examples of Associativity and Commutativity in Numeric Operations</h4>


<p>Consider the following expression, in which we assume that <code>1.0</code> and
<code>1.0e-15</code> both denote <i>single floats</i>:
</p>
<div class="lisp">
<pre class="lisp"> (+ 1/3 2/3 1.0d0 1.0 1.0e-15)
</pre></div>


<p>One <i>conforming implementation</i> might
process the <i>arguments</i> from left to right,
first adding <code>1/3</code> and <code>2/3</code> to get <code>1</code>, 
then converting that to a <i>double float</i> 
for combination with <code>1.0d0</code>,
then successively converting and adding <code>1.0</code> and <code>1.0e-15</code>.
</p>
<p>Another <i>conforming implementation</i> might process the <i>arguments</i> from
right to left, first performing a <i>single float</i> addition of <code>1.0</code> and
<code>1.0e-15</code> (perhaps losing accuracy in the process), then converting the sum to 
a <i>double float</i> and adding <code>1.0d0</code>, then converting <code>2/3</code> to a
<i>double float</i> and adding it, and then converting <code>1/3</code> and adding that.
</p>
<p>A third <i>conforming implementation</i> might first scan all the <i>arguments</i>,
process all the <i>rationals</i> first to keep that part of the computation exact,
then find an <i>argument</i> of the largest floating-point format among all the
<i>arguments</i> and add that, and then add in all other <i>arguments</i>, converting
each in turn (all in a perhaps misguided attempt to make the computation as accurate
as possible).
</p>
<p>In any case, all three strategies are legitimate.
</p>
<p>A <i>conforming program</i> could control the order by writing, for example,
</p>
<div class="lisp">
<pre class="lisp"> (+ (+ 1/3 2/3) (+ 1.0d0 1.0e-15) 1.0)
</pre></div>




<span id="Contagion-in-Numeric-Operations"></span><h4 class="subsubsection">12.1.1.2 Contagion in Numeric Operations</h4>
<span id="NumericContagionRules"></span>
<p>For information about the contagion rules for implicit coercions of <i>arguments</i> 
in numeric operations, see
<a href="Floating_002dpoint-Computations.html#RuleOfFloatPrecisionContagion">Section 12.1.4.4 (Rule of Float Precision Contagion)</a>, 
<a href="Floating_002dpoint-Computations.html#RuleOfFloatAndRationalContagion">Section 12.1.4.1 (Rule of Float and Rational Contagion)</a>,
and <a href="Complex-Computations.html#RuleOfComplexContagion">Section 12.1.5.2 (Rule of Complex Contagion)</a>.
</p>

<span id="Viewing-Integers-as-Bits-and-Bytes"></span><h4 class="subsubsection">12.1.1.3 Viewing Integers as Bits and Bytes</h4>

<span id="g_t12_002e1_002e1_002e3_002e1-Logical-Operations-on-Integers"></span><h4 class="unnumberedsubsubsec">12.1.1.3.1 Logical Operations on Integers</h4>


<p>Logical operations require <i>integers</i> as arguments;
an error of <i>type</i> <code>type-error</code> should be signaled 
if an argument is supplied that is not an <i>integer</i>.
<i>Integer</i> arguments to logical operations are treated as if
they were represented in two&rsquo;s-complement notation.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
logical operations on numbers.
</p>

<div class="float"><span id="fig12_002e5"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>ash</td><td>boole-ior</td><td>logbitp</td></tr>
<tr><td>boole</td><td>boole-nand</td><td>logcount</td></tr>
<tr><td>boole-1</td><td>boole-nor</td><td>logeqv</td></tr>
<tr><td>boole-2</td><td>boole-orc1</td><td>logior</td></tr>
<tr><td>boole-and</td><td>boole-orc2</td><td>lognand</td></tr>
<tr><td>boole-andc1</td><td>boole-set</td><td>lognor</td></tr>
<tr><td>boole-andc2</td><td>boole-xor</td><td>lognot</td></tr>
<tr><td>boole-c1</td><td>integer-length</td><td>logorc1</td></tr>
<tr><td>boole-c2</td><td>logand</td><td>logorc2</td></tr>
<tr><td>boole-clr</td><td>logandc1</td><td>logtest</td></tr>
<tr><td>boole-eqv</td><td>logandc2</td><td>logxor</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.5: </strong>Defined names relating to logical operations on numbers.</p></div></div>                    


<span id="g_t12_002e1_002e1_002e3_002e2-Byte-Operations-on-Integers"></span><h4 class="unnumberedsubsubsec">12.1.1.3.2 Byte Operations on Integers</h4>


<p>The byte-manipulation <i>functions</i> use <i>objects</i> 
called <i>byte specifiers</i> to designate the size and position
of a specific <i>byte</i> within an <i>integer</i>.
The representation of a <i>byte specifier</i> is <i>implementation-dependent</i>;
it might or might not be a <i>number</i>.
The <i>function</i> <code>byte</code> will construct a <i>byte specifier</i>,
which various other byte-manipulation <i>functions</i> will accept.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
manipulating <i>bytes</i> of <i>numbers</i>.
</p>

<div class="float"><span id="fig12_002e6"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>byte</td><td>deposit-field</td><td>ldb-test</td></tr>
<tr><td>byte-position</td><td>dpb</td><td>mask-field</td></tr>
<tr><td>byte-size</td><td>ldb</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 12.6: </strong>Defined names relating to byte manipulation.</p></div></div>




<hr>
<div class="header">
<p>
Next: <a href="Implementation_002dDependent-Numeric-Constants.html" accesskey="n" rel="next">Implementation-Dependent Numeric Constants</a>, Up: <a href="Number-Concepts.html" accesskey="u" rel="up">Number Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
