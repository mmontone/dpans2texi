<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Conditions (ANSI Common Lisp)</title>

<meta name="description" content="Conditions (ANSI Common Lisp)">
<meta name="keywords" content="Conditions (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Symbols.html#Symbols" rel="next" title="Symbols">
<link href="Structures.html#copy_002dstructure" rel="prev" title="copy-structure">
<style type="text/css">
<!--
/*
CSS for TexInfo/HTML files.

Copyright (C) 2015-2021 Assaf Gordon (assafgordon@gmail.com)

License:
GNU All Permissive License
https://www.gnu.org/prep/maintain/html_node/License-Notices-for-Other-Files.html

 Copying and distribution of this file, with or without modification,
 are permitted in any medium without royalty provided the copyright
 notice and this notice are preserved.  This file is offered as-is,
 without any warranty.


The used tags/classes were collected from a Texinfo-generated HTML using:

  cd coreutils
  makeinfo --html --no-split -o coreutils.html doc/coreutils.texi
  cat coreutils.html | sed 's/</\n</g' | sed 's;>.*;>;g' \
         | grep '^<' | grep 'class=' | sort -u \
         | perl -lane 'm/<(\w+) .*class="([-\w]+)"/ ; print $1, "\t", $2' \
         | sort -u

*/

a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {
  font-family: sans-serif;
  font-size: 16px;
  margin: 1em;

  overflow-x: hidden; /* Coupled with the div.header trick,
			 this will extend the header lines
			 access the entire page width without causing
			 a horizontal scroll bar to appear. */
}


a {
  text-decoration: none;
  outline-style: none;
  color: blue;
}
a:visited {
  color: rgb(16,0,112);
}
a:hover {
  text-decoration: underline;
}


/*****************************************************
   Titles / Headers
******************************************************/

/* @settitle:
   The title of the document at the top of the document/header */
h1.settitle {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* The title at the beginning of the document, before the @menu */
h1.top {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* @chapter */
h2.chapter {
}

h2.appendix { }
h2.unnumbered { }

/* @section */
h3.section {
}
/* @unnumberedsec */
h3.unnumberedsec {
}
/* @heading (seems to be only used in fdl.texi) */
h3.heading {
}

/* @subsection */
h4.subsection {
}


/**************************************************
  Short Contents (if @shortcontents command is used)
***************************************************/
h2.shortcontents-heading { }
div.shortcontents { }
div.shortcontents ul { }
div.shortcontents ul li { }


/**************************************************
  Contents (if @contents command is used)
***************************************************/
h2.contents-heading { }
div.contents { }
div.contents ul { }
div.contents ul li { }


/* The @menu table */
table.menu { }
pre.menu-comment {}



/************************************
  @example   and   @verbatim
************************************/
div.example {
  margin-left: 2em;
  margin-right: 2em;
}
div.example pre.example {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}

/* Note: @verbatim is also rendered inside a 'div.example' */
div.example pre.verbatim {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}



/************************************
  @smallexample
************************************/
div.smallexample {
}
div.smallexample pre.smallexample {
}

/***********************************
  @display
***********************************/
div.display {
}
div.display pre.display {
}



/**************************************
  @footnote
**************************************/
div.footnote { }
h4.footnotes-heading { }

/**************************************
The header at the top of each page / section
(the next/previous/top/up links)
**************************************/
div.header {
   padding-top: 0.5ex;
   padding-bottom: 0.5ex;
   background-color: #ddddff;

   /* This will extend the background color of the header
      bar to the entire width of the page (and beyond),
      requires 'overflow-x: hidden' in the 'body'. */
   padding-left: 3000px;
   margin-left: -3000px;
   padding-right: 3000px;
   margin-right: -3000px;
}

/* Disable any additional margins */
div.header p {
    margin: 0;
}
div.header p a {
    color: blue;
}


/**************************************
   @table is rendered as <dl> (defnition list),
   @item  is rendered as <dt> (definition term),
   text is rendered as <dd> (definition description)
**************************************/
dl {
   margin: 0 1em;
}
dl dt {
   margin: 1em 0;
}
dl dd {
   margin-left: 2em;
}

/*******************************************************
  Text Styles
*******************************************************/

/* @var{} */
var {
  color: #CC0000;
}

/* @samp{} */
samp {
  color: #6600CC;
}

/* @env{} will result in <p><code>X</code></p> */
p code {
	border-radius: 5px;
	padding-left: 3px;
	padding-right: 3px;
	background-color: rgba(175,184,193,0.2);
}

/* p code { */
/*   color: #532c14; */
/* } */

/* @option{} */
span.nocodebreak {
  color: #5D4C46;
}

-->
</style>


</head>

<body lang="en">
<span id="Conditions"></span><div class="header">
<p>
Next: <a href="Symbols.html#Symbols" accesskey="n" rel="next">Symbols</a>, Previous: <a href="Structures.html#Structures" accesskey="p" rel="prev">Structures</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conditions-1"></span><h2 class="chapter">9 Conditions</h2>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Condition-System-Concepts" accesskey="1">Condition System Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Dictionary

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#condition" accesskey="2">condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#warning" accesskey="3">warning</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#style_002dwarning" accesskey="4">style-warning</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#serious_002dcondition" accesskey="5">serious-condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#error-_0028Condition-Type_0029" accesskey="6">error (Condition Type)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cell_002derror" accesskey="7">cell-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cell_002derror_002dname" accesskey="8">cell-error-name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#parse_002derror" accesskey="9">parse-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#storage_002dcondition">storage-condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#assert">assert</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#error-_0028Function_0029">error (Function)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cerror">cerror</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#check_002dtype">check-type</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#simple_002derror">simple-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#invalid_002dmethod_002derror">invalid-method-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#method_002dcombination_002derror">method-combination-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#signal">signal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#simple_002dcondition">simple-condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#simple_002dcondition_002dformat_002dcontrol_003b-simple_002dcondition_002dformat_002darguments">simple-condition-format-control; simple-condition-format-arguments</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#warn">warn</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#simple_002dwarning">simple-warning</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#invoke_002ddebugger">invoke-debugger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#break">break</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_002adebugger_002dhook_002a">*debugger-hook*</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_002abreak_002don_002dsignals_002a">*break-on-signals*</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#handler_002dbind">handler-bind</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#handler_002dcase">handler-case</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ignore_002derrors">ignore-errors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#define_002dcondition">define-condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dcondition">make-condition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#restart">restart</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#compute_002drestarts">compute-restarts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#find_002drestart">find-restart</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#invoke_002drestart">invoke-restart</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#invoke_002drestart_002dinteractively">invoke-restart-interactively</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#restart_002dbind">restart-bind</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#restart_002dcase">restart-case</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#restart_002dname">restart-name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002dcondition_002drestarts">with-condition-restarts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002dsimple_002drestart">with-simple-restart</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#abort-_0028Restart_0029">abort (Restart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#continue-_0028Restart_0029">continue (Restart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#muffle_002dwarning-_0028Restart_0029">muffle-warning (Restart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#store_002dvalue-_0028Restart_0029">store-value (Restart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#use_002dvalue-_0028Restart_0029">use-value (Restart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#abort_003b-continue_003b-muffle_002dwarning_003b-store_002dvalue_003b-use_002dvalue">abort; continue; muffle-warning; store-value; use-value</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Condition-System-Concepts"></span><div class="header">
<p>
Next: <a href="#condition" accesskey="n" rel="next">condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Condition-System-Concepts-1"></span><h3 class="section">9.1 Condition System Concepts</h3>

<p>Common Lisp constructs are described not only in terms of their
behavior in situations during which they are intended to be used (see
the &ldquo;Description&rdquo; part of each <i>operator</i> specification),
but in all other situations (see the &ldquo;Exceptional Situations&rdquo;
part of each <i>operator</i> specification).
</p>
<p>A situation is the evaluation of an expression in a specific context.
A <i>condition</i> is an <i>object</i> that
represents a specific situation that has been detected.  
<i>Conditions</i> are <i>generalized instances</i> of the <i>class</i> <code>condition</code>.
A hierarchy of <i>condition</i> classes is defined in <span class="roman">Common Lisp</span>.  
A <i>condition</i> has <i>slots</i> that contain data 
relevant to the situation that the <i>condition</i> represents.
</p>
<p>An error is a situation in which normal program execution cannot
continue correctly without some form of intervention (either
interactively by the user or under program control).  Not all errors
are detected.  When an error goes undetected, the effects can be
<i>implementation-dependent</i>, <i>implementation-defined</i>, unspecified, or
undefined. See <a href="Introduction.html#Definitions">Section 1.4 (Definitions)</a>.  All detected errors can
be represented by <i>conditions</i>, but not all 
<i>conditions</i> represent errors.
</p>
<p>Signaling is the process by which a <i>condition</i> can alter
the flow of control in a program by raising the 
<i>condition</i> which can then be <i>handled</i>.  The functions
<code>error</code>, <code>cerror</code>, <code>signal</code>, and
<code>warn</code> are used to signal <i>conditions</i>.
</p>
<p>The process of signaling involves the selection and invocation of a
<i>handler</i> from a set of <i>active</i> <i>handlers</i>.  
A <i>handler</i> is a <i>function</i> of one argument (the 
<i>condition</i>) that is invoked to handle a <i>condition</i>.
Each <i>handler</i> is associated with a <i>condition</i> <i>type</i>,
and a <i>handler</i> will be invoked only on a <i>condition</i> of the
<i>handler</i>&rsquo;s associated <i>type</i>.
</p>
<p><i>Active</i> <i>handlers</i> are <i>established</i> dynamically
(see <code>handler-bind</code> or <code>handler-case</code>).
<i>Handlers</i> are invoked in a <i>dynamic environment</i> 
equivalent to that of the signaler,
except that the set of <i>active</i> <i>handlers</i> 
is bound in such a way as to include only those that were <i>active</i> 
at the time the <i>handler</i> being invoked was <i>established</i>.
Signaling a <i>condition</i> has no side-effect on the <i>condition</i>, 
and there is no dynamic state contained in a <i>condition</i>.
</p>
<p>If a <i>handler</i> is invoked, it can address the <i>situation</i> 
in one of three ways:
</p>

<dl compact="compact">
<dt><b>Decline</b></dt>
<dd>

<p>It can decline to <i>handle</i> the <i>condition</i>.  It does this by
simply returning rather than transferring control.
When this happens, any values returned by the handler are
ignored and the next most recently established handler is invoked.
If there is no such handler and the signaling function is <code>error</code>
or <code>cerror</code>, the debugger is entered in the
<i>dynamic environment</i> of the signaler. If there is no such
handler and the signaling function is either <code>signal</code> or
<code>warn</code>, the signaling function simply returns&nbsp;<code>nil</code>.
</p>
</dd>
<dt><b>Handle</b></dt>
<dd>

<p>It can <i>handle</i> the <i>condition</i> by performing a non-local
transfer of control.  This can be done either primitively by using
<code>go</code>, <code>return</code>, <code>throw</code> or more
abstractly by using a function such as <code>abort</code> or
<code>invoke-restart</code>.
</p>
</dd>
<dt><b>Defer</b></dt>
<dd>

<p>It can put off a decision about whether to <i>handle</i> or <i>decline</i>,
by any of a number of actions, but most commonly by 
signaling another condition,
resignaling the same condition,
or forcing entry into the debugger.
</p></dd>
</dl>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Condition-Types" accesskey="1">Condition Types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Creating-Conditions" accesskey="2">Creating Conditions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Printing-Conditions" accesskey="3">Printing Conditions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Signaling-and-Handling-Conditions" accesskey="4">Signaling and Handling Conditions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Assertions" accesskey="5">Assertions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Notes-about-the-Condition-System_0027s-Background" accesskey="6">Notes about the Condition System's Background</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>
<hr>
<span id="Condition-Types"></span><div class="header">
<p>
Next: <a href="#Creating-Conditions" accesskey="n" rel="next">Creating Conditions</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Condition-Types-1"></span><h4 class="subsection">9.1.1 Condition Types</h4>

<p>The next figure&nbsp;<!-- /@w -->lists the <i>standardized</i> <i>condition</i> <i>types</i>.
Additional <i>condition</i> <i>types</i> can be defined by using <code>define-condition</code>.
</p>


<div class="float"><span id="StandardizedConditionTypes"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>arithmetic-error</td><td>floating-point-overflow</td><td>simple-type-error</td></tr>
<tr><td>cell-error</td><td>floating-point-underflow</td><td>simple-warning</td></tr>
<tr><td>condition</td><td>package-error</td><td>storage-condition</td></tr>
<tr><td>control-error</td><td>parse-error</td><td>stream-error</td></tr>
<tr><td>division-by-zero</td><td>print-not-readable</td><td>style-warning</td></tr>
<tr><td>end-of-file</td><td>program-error</td><td>type-error</td></tr>
<tr><td>error</td><td>reader-error</td><td>unbound-slot</td></tr>
<tr><td>file-error</td><td>serious-condition</td><td>unbound-variable</td></tr>
<tr><td>floating-point-inexact</td><td>simple-condition</td><td>undefined-function</td></tr>
<tr><td>floating-point-invalid-operation</td><td>simple-error</td><td>warning</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.1: </strong>Standardized Condition Types</p></div></div>

<p>All <i>condition</i> types are subtypes of <i>type</i> <code>condition</code>.  That is,
</p>
<div class="lisp">
<pre class="lisp"> (typep <var>c</var> 'condition) <span class="roman">→</span> <i>true</i>
</pre></div>

<p>if and only if <var>c</var> is a <i>condition</i>.
</p>
<p><i>Implementations</i> must define all specified <i>subtype</i> relationships.
Except where noted, all <i>subtype</i> relationships indicated in 
this document are not mutually exclusive.
A <i>condition</i> inherits the structure of its <i>supertypes</i>.
</p>
<p>The metaclass of the <i>class</i> <code>condition</code> is not specified.
<i>Names</i> of <i>condition</i> <i>types</i> may be used to specify
<i>supertype</i> relationships in <code>define-condition</code>, 
but the consequences are not specified if an attempt is made to use
a <i>condition</i> <i>type</i> as a <i>superclass</i> in a <code>defclass</code> <i>form</i>.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> that
define <i>condition</i> <i>types</i> and creating <i>conditions</i>.
</p>

<div class="float"><span id="fig9_002e2"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>define-condition</td><td>make-condition</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.2: </strong>Operators that define and create conditions.</p></div></div>

<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> that <i>read</i> 
the <i>value</i> of <i>condition</i> <i>slots</i>.
</p>

<div class="float"><span id="fig9_002e3"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>arithmetic-error-operands</td><td>simple-condition-format-arguments</td></tr>
<tr><td>arithmetic-error-operation</td><td>simple-condition-format-control</td></tr>
<tr><td>cell-error-name</td><td>stream-error-stream</td></tr>
<tr><td>file-error-pathname</td><td>type-error-datum</td></tr>
<tr><td>package-error-package</td><td>type-error-expected-type</td></tr>
<tr><td>print-not-readable-object</td><td>unbound-slot-instance</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.3: </strong>Operators that read condition slots.</p></div></div>

<span id="Serious-Conditions"></span><h4 class="subsubsection">9.1.1.1 Serious Conditions</h4>

<p>A <i>serious condition</i> is a <i>condition</i> serious
enough to require interactive intervention if not handled.  
<i>Serious conditions</i> are typically signaled with <code>error</code> or <code>cerror</code>;
non-serious <i>conditions</i> are typically signaled with <code>signal</code> or <code>warn</code>.
</p>


<hr>
<span id="Creating-Conditions"></span><div class="header">
<p>
Next: <a href="#Printing-Conditions" accesskey="n" rel="next">Printing Conditions</a>, Previous: <a href="#Condition-Types" accesskey="p" rel="prev">Condition Types</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Creating-Conditions-1"></span><h4 class="subsection">9.1.2 Creating Conditions</h4>

<p>The function <code>make-condition</code> can be used to construct
a <i>condition</i> <i>object</i> explicitly.  Functions such as <code>error</code>,
<code>cerror</code>, <code>signal</code>, and <code>warn</code> operate on
<i>conditions</i> and might create <i>condition</i> <i>objects</i>
implicitly.  Macros such as <code>ccase</code>, <code>ctypecase</code>,
<code>ecase</code>, <code>etypecase</code>, <code>check-type</code>, and
<code>assert</code> might also implicitly create (and <i>signal</i>)
<i>conditions</i>.
</p>
<span id="Condition-Designators"></span><h4 class="subsubsection">9.1.2.1 Condition Designators</h4>
<span id="ConditionDesignators"></span>
<p>A number of the functions in the condition system take arguments which
are identified as 
<span id="index-condition-designator"></span>
<em>condition designators</em>.
By convention, those arguments are notated as
</p>
<p>&nbsp;<!-- /@w --><var>datum</var> <tt>&amp;rest</tt> <var>arguments</var>
</p>
<p>Taken together, the <var>datum</var> and the <var>arguments</var> are 
&ldquo;<i>designators</i> for a <i>condition</i> of default type <var>default-type</var>.&rdquo;
How the denoted <i>condition</i> is computed depends on the type of the <var>datum</var>:
</p>

<ul>
<li> If the <var>datum</var> is a <i>symbol</i> 
naming a <i>condition</i> <i>type</i> &hellip;

<p>The denoted <i>condition</i> is the result of
</p>
<div class="lisp">
<pre class="lisp"> (apply #'make-condition <var>datum</var> <var>arguments</var>)
</pre></div>


</li><li> If the <var>datum</var> is a <i>format control</i> &hellip;

<p>The denoted <i>condition</i> is the result of 
</p>
<div class="lisp">
<pre class="lisp"> (make-condition <var>defaulted-type</var> 
                 :format-control <var>datum</var>
                 :format-arguments <var>arguments</var>)
</pre></div>


<p>where the <var>defaulted-type</var> is a <i>subtype</i> of <var>default-type</var>.
</p>
</li><li> If the <var>datum</var> is a <i>condition</i> &hellip;

<p>The denoted <i>condition</i> is the <var>datum</var> itself.
In this case, unless otherwise specified by the description of the
<i>operator</i> in question, the <i>arguments</i> must be <i>null</i>;
that is, the consequences are undefined if any <var>arguments</var> were supplied. 
</p></li></ul>


<p>Note that the <var>default-type</var> gets used only in the case where
the <var>datum</var> <i>string</i> is supplied.  In the other situations,
the resulting condition is not necessarily of <i>type</i> <var>default-type</var>.
</p>
<p>Here are some illustrations of how different <i>condition designators</i>
can denote equivalent <i>condition</i> <i>objects</i>:
</p>
<div class="lisp">
<pre class="lisp">(let ((c (make-condition 'arithmetic-error :operator '/ :operands '(7 0))))
  (error c))
≡ (error 'arithmetic-error :operator '/ :operands '(7 0))

(error &quot;Bad luck.&quot;)
≡ (error 'simple-error :format-control &quot;Bad luck.&quot; :format-arguments '())
</pre></div>




<hr>
<span id="Printing-Conditions"></span><div class="header">
<p>
Next: <a href="#Signaling-and-Handling-Conditions" accesskey="n" rel="next">Signaling and Handling Conditions</a>, Previous: <a href="#Creating-Conditions" accesskey="p" rel="prev">Creating Conditions</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Printing-Conditions-1"></span><h4 class="subsection">9.1.3 Printing Conditions</h4>

<p>If the <tt>:report</tt> argument to <code>define-condition</code> is used,
a print function is defined that is called whenever 
the defined <i>condition</i> is printed while the <i>value</i> of <code>*print-escape*</code> is <i>false</i>. 
This function is called the <span id="index-condition-reporter"></span>
<em>condition reporter</em>;
the text which it outputs is called a <span id="index-report-message"></span>
<em>report message</em>.
</p>
<p>When a <i>condition</i> is printed and <code>*print-escape*</code>
is <i>false</i>, the <i>condition reporter</i> for the <i>condition</i> is invoked.
<i>Conditions</i> are printed automatically by functions such as
<code>invoke-debugger</code>, <code>break</code>, and <code>warn</code>.
</p>
<p>When <code>*print-escape*</code> is <i>true</i>, the <i>object</i> should print in an
abbreviated fashion according to the style of the implementation
(<i>e.g.</i>, by <code>print-unreadable-object</code>).  It is not required that a
<i>condition</i> can be recreated by reading its printed representation.
</p>
<p>No <i>function</i> is provided for directly <i>accessing</i> 
or invoking <i>condition reporters</i>.
</p>
<span id="Recommended-Style-in-Condition-Reporting"></span><h4 class="subsubsection">9.1.3.1 Recommended Style in Condition Reporting</h4>

<p>In order to ensure a properly aesthetic result when presenting
<i>report messages</i> to the user, certain stylistic conventions are
recommended.
</p>
<p>There are stylistic recommendations for the content of the messages
output by <i>condition reporters</i>, but there are no formal requirements 
on those <i>programs</i>.
If a <i>program</i> violates the recommendations for some message, the
display of that message might be less aesthetic than if the guideline
had been observed, but the <i>program</i> is still considered a
<i>conforming program</i>.
</p>
<p>The requirements on a <i>program</i> or <i>implementation</i> which
invokes a <i>condition reporter</i> are somewhat stronger.  A <i>conforming
program</i> must be permitted to assume that if these style guidelines are
followed, proper aesthetics will be maintained.  Where appropriate, any
specific requirements on such routines are explicitly mentioned below.
</p>
<span id="g_t9_002e1_002e3_002e1_002e1-Capitalization-and-Punctuation-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.1 Capitalization and Punctuation in Condition Reports</h4>


<p>It is recommended that a <i>report message</i> be a complete sentences, in the
proper case and correctly punctuated.  In English, for example, this
means the first letter should be uppercase, and there should be a
trailing period.
</p>
<div class="lisp">
<pre class="lisp"> (error &quot;This is a message&quot;)  ; Not recommended
 (error &quot;this is a message.&quot;) ; Not recommended

 (error &quot;This is a message.&quot;) ; Recommended instead
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e2-Leading-and-Trailing-Newlines-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.2 Leading and Trailing Newlines in Condition Reports</h4>


<p>It is recommended that a <i>report message</i> not begin with any 
introductory text, such as &ldquo;<code>Error: </code>&rdquo; or &ldquo;<code>Warning: </code>&rdquo;
or even just <i>freshline</i> or <i>newline</i>. 
Such text is added, if appropriate to the context,
by the routine invoking the <i>condition reporter</i>.
</p>
<p>It is recommended that a <i>report message</i> not be followed 
by a trailing <i>freshline</i> or <i>newline</i>.
Such text is added, if appropriate to the context, 
by the routine invoking the <i>condition reporter</i>.
</p>
<div class="lisp">
<pre class="lisp"> (error &quot;This is a message.~%&quot;)   ; Not recommended
 (error &quot;~&amp;This is a message.&quot;)   ; Not recommended
 (error &quot;~&amp;This is a message.~%&quot;) ; Not recommended

 (error &quot;This is a message.&quot;)     ; Recommended instead
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e3-Embedded-Newlines-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.3 Embedded Newlines in Condition Reports</h4>


<p>Especially if it is long, it is permissible and appropriate for 
a <i>report message</i> to contain one or more embedded <i>newlines</i>.
</p>
<p>If the calling routine conventionally inserts some additional prefix
(such as &ldquo;<code>Error: </code>&rdquo; or &ldquo;<code>;; Error: </code>&rdquo;) on the first line of
the message, it must also assure that an appropriate prefix will be
added to each subsequent line of the output, so that the left edge of
the message output by the <i>condition reporter</i> will still be properly
aligned.
</p>
<div class="lisp">
<pre class="lisp"> (defun test ()
   (error &quot;This is an error message.~%It has two lines.&quot;))

 ;; Implementation A
 (test)
 This is an error message.
 It has two lines.

 ;; Implementation B
 (test)
 ;; Error: This is an error message.
 ;;        It has two lines.

 ;; Implementation C
 (test)
 &gt;&gt; Error: This is an error message. 
           It has two lines.
</pre></div>



<span id="g_t9_002e1_002e3_002e1_002e4-Note-about-Tabs-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.4 Note about Tabs in Condition Reports</h4>


<p>Because the indentation of a <i>report message</i> might be shifted to the right or
left by an arbitrary amount, special care should be taken with the
semi-standard <i>character</i> &lt;Tab&gt;&nbsp;<!-- /@w -->
(in those <i>implementations</i> that support such a <i>character</i>).  
Unless the <i>implementation</i> specifically defines its behavior 
in this context, its use should be avoided.
</p>

<span id="g_t9_002e1_002e3_002e1_002e5-Mentioning-Containing-Function-in-Condition-Reports"></span><h4 class="unnumberedsubsubsec">9.1.3.1.5 Mentioning Containing Function in Condition Reports</h4>


<p>The name of the containing function should generally not be mentioned in
<i>report messages</i>.  It is assumed that the <i>debugger</i> will make this
information accessible in situations where it is necessary and appropriate.
</p>



<hr>
<span id="Signaling-and-Handling-Conditions"></span><div class="header">
<p>
Next: <a href="#Assertions" accesskey="n" rel="next">Assertions</a>, Previous: <a href="#Printing-Conditions" accesskey="p" rel="prev">Printing Conditions</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Signaling-and-Handling-Conditions-1"></span><h4 class="subsection">9.1.4 Signaling and Handling Conditions</h4>

<p>The operation of the condition system depends on the ordering of
active <i>applicable handlers</i> from most recent to least recent.
</p>
<p>Each <i>handler</i> is associated with a <i>type specifier</i>
that must designate a subtype of <i>type</i> <code>condition</code>.  A <i>handler</i>
is said to be <i>applicable</i> to a <i>condition</i> if that
<i>condition</i> is of the <i>type</i> designated by the associated
<i>type specifier</i>.
</p>
<p><i>Active</i> <i>handlers</i> are <i>established</i> by using 
<code>handler-bind</code> (or an abstraction based on <code>handler-bind</code>, 
such as <code>handler-case</code> or <code>ignore-errors</code>).
</p>
<p><i>Active</i> <i>handlers</i> can be <i>established</i> within the
dynamic scope of other <i>active</i> <i>handlers</i>.
At any point during program execution, there is a set of <i>active</i> <i>handlers</i>.
When a <i>condition</i> is signaled, the <i>most recent</i> active <i>applicable handler</i>
for that <i>condition</i> is selected from this set.
Given a <i>condition</i>, the order of recentness of 
active <i>applicable handlers</i> is defined by the following two rules:
</p>

<ol>
<li> Each handler in a set of active handlers H<sub>1</sub>
more recent than every handler in a set H<sub>2</sub>
handlers in H<sub>2</sub>
established.

</li><li> Let h<sub>1</sub>
handlers established by the same <i>form</i>. Then h<sub>1</sub>
more recent than h<sub>2</sub>
h<sub>2</sub>
</li></ol>


<p>Once a handler in a handler binding <i>form</i> (such as 
<code>handler-bind</code> or <code>handler-case</code>) has been selected, all
handlers in that <i>form</i> become inactive for 
the remainder of the signaling process.
While the selected <i>handler</i> runs, no other <i>handler</i> established
by that <i>form</i> is active. That is, if the <i>handler</i> declines, 
no other handler established by that <i>form</i> will be considered for possible invocation.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to 
the <i>handling</i> of <i>conditions</i>.
</p>

<div class="float"><span id="fig9_002e4"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>handler-bind</td><td>handler-case</td><td>ignore-errors</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.4: </strong>Operators relating to handling conditions.</p></div></div>

<span id="Signaling-1"></span><h4 class="subsubsection">9.1.4.1 Signaling</h4>
<span id="Signaling"></span>
<p>When a <i>condition</i> is signaled, the most recent
applicable <i>active</i> <i>handler</i> is invoked.  
Sometimes a handler will decline by simply returning
without a transfer of control.
In such cases, the next most recent applicable active handler is
invoked. 
</p>
<p>If there are no applicable handlers for a <i>condition</i> that
has been signaled, or if all applicable handlers decline, the
<i>condition</i> is unhandled.
</p>
<p>The functions <code>cerror</code> and <code>error</code> invoke the
interactive <i>condition</i> handler (the debugger) rather than
return if the <i>condition</i> being signaled, regardless of
its <i>type</i>, is unhandled.  In contrast, <code>signal</code>
returns <code>nil</code>&nbsp;<!-- /@w -->if the <i>condition</i> being signaled,
regardless of its <i>type</i>, is unhandled.
</p>
<p>The <i>variable</i> <code>*break-on-signals*</code> can be used to cause the
debugger to be entered before the signaling process begins.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
the <i>signaling</i> of <i>conditions</i>.
</p>

<div class="float"><span id="fig9_002e5"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>*break-on-signals*</td><td>error</td><td>warn</td></tr>
<tr><td>cerror</td><td>signal</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.5: </strong>Defined names relating to signaling conditions.</p></div></div>

<span id="g_t9_002e1_002e4_002e1_002e1-Resignaling-a-Condition"></span><h4 class="unnumberedsubsubsec">9.1.4.1.1 Resignaling a Condition</h4>


<p>During the <i>dynamic extent</i> of the <i>signaling</i> process for
a particular <i>condition</i> <i>object</i>, 
<code>signaling</code> the same <i>condition</i> <i>object</i> again
is permitted if and only if the <i>situation</i> represented in both
cases are the same.
</p>
<p>For example, a <i>handler</i> might legitimately <i>signal</i> 
the <i>condition</i> <i>object</i> that is its <i>argument</i>
in order to allow outer <i>handlers</i> first opportunity to <i>handle</i> 
the condition.  (Such a <i>handlers</i> is sometimes called a &ldquo;default handler.&rdquo;)
This action is permitted because the <i>situation</i> which the second
<i>signaling</i> process is addressing is really the same <i>situation</i>.
</p>
<p>On the other hand, in an <i>implementation</i> that implemented asynchronous 
keyboard events by interrupting the user process with a call to <code>signal</code>,
it would not be permissible for two distinct asynchronous keyboard events
to <i>signal</i> <i>identical</i> <i>condition</i> <i>objects</i>
at the same time for different 
situations.
</p>

<span id="Restarts-1"></span><h4 class="subsubsection">9.1.4.2 Restarts</h4>
<span id="Restarts"></span>
<p>The interactive condition handler returns only through
non-local transfer of control to specially defined <i>restarts</i>
that can be set up either by the system or by user code.  Transferring
control to a restart is called &ldquo;invoking&rdquo; the restart.  Like
handlers, active <i>restarts</i> are <i>established</i>
dynamically, and 
only active <i>restarts</i>
can be invoked.  An active 
<i>restart</i> can be invoked by the user from
the debugger or by a program by using <code>invoke-restart</code>.
</p>
<p>A <i>restart</i> contains a 
<i>function</i> to be <i>called</i> when the <i>restart</i> is
invoked, an optional name that can be used to find or invoke the 
<i>restart</i>, and
an optional set of interaction information for the debugger to use to
enable the user to manually invoke a <i>restart</i>. 
</p>
<p>The name of a <i>restart</i> is
used by <code>invoke-restart</code>. <i>Restarts</i> that can be invoked
only within the debugger do not need names.
</p>
<p><i>Restarts</i> can be established by using <code>restart-bind</code>, 
<code>restart-case</code>, and <code>with-simple-restart</code>.
A <i>restart</i> function can itself invoke any other <i>restart</i>
that was active at the time of establishment of the <i>restart</i> 
of which the <i>function</i> is part.
</p>
<p>The <i>restarts</i> <i>established</i> by 
a <code>restart-bind</code> <i>form</i>, 
a <code>restart-case</code> <i>form</i>,
or a <code>with-simple-restart</code> <i>form</i>
have <i>dynamic extent</i>
which extends for the duration of that <i>form</i>&rsquo;s execution.
</p>
<p><i>Restarts</i> of the same name can be ordered from least recent to
most recent according to the following two rules:
</p>

<ol>
<li> Each <i>restart</i> in a set of active restarts
R<sub>1</sub>
set R<sub>2</sub>
in R<sub>2</sub>
established.

</li><li> Let r<sub>1</sub>
the same name established by the same <i>form</i>. Then r<sub>1</sub>
more recent than r<sub>2</sub>
left of r<sub>2</sub>
</li></ol>


<p>If a <i>restart</i> is invoked but does not transfer control,
the values resulting from the <i>restart</i> function are
returned by the function that invoked the restart, either
<code>invoke-restart</code> or <code>invoke-restart-interactively</code>.
</p>
<span id="g_t9_002e1_002e4_002e2_002e1-Interactive-Use-of-Restarts"></span><h4 class="unnumberedsubsubsec">9.1.4.2.1 Interactive Use of Restarts</h4>



<p>For interactive handling, two pieces of information are needed
from a <i>restart</i>: a report function and an interactive function.
</p>
<p>The report function
is used by a program such as the debugger to
present a description of the action the <i>restart</i> will take.  
The report function is specified and established by the 
<tt>:report-function</tt> keyword to
<code>restart-bind</code> or the 
<tt>:report</tt> keyword to <code>restart-case</code>. 
</p>
<p>The interactive function, which can be specified using the 
<tt>:interactive-function</tt> keyword to 
<code>restart-bind</code> or <tt>:interactive</tt> keyword
to <code>restart-case</code>, is used when the <i>restart</i>
is invoked
interactively, such as from the debugger, to produce a suitable
list of arguments. 
</p>
<p><code>invoke-restart</code> invokes the most recently <i>established</i>
<i>restart</i> whose
name is the same as the first argument to <code>invoke-restart</code>.
If a <i>restart</i> is invoked interactively by the debugger and  does
not transfer control but rather returns values, the precise
action of the debugger on those values is <i>implementation-defined</i>.
</p>

<span id="g_t9_002e1_002e4_002e2_002e2-Interfaces-to-Restarts"></span><h4 class="unnumberedsubsubsec">9.1.4.2.2 Interfaces to Restarts</h4>

<span id="InterfacesToRestarts"></span>
<p>Some <i>restarts</i> have functional interfaces, 
such as <code>abort</code>, <code>continue</code>, 
<code>muffle-warning</code>, <code>store-value</code>, and 
<code>use-value</code>.
They are ordinary functions that use 
<code>find-restart</code> and <code>invoke-restart</code> internally,
that have the same name as the <i>restarts</i> they manipulate,
and that are provided simply for notational convenience.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>defined names</i> relating to
<i>restarts</i>.
</p>

<div class="float"><span id="fig9_002e6"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>abort</td><td>invoke-restart-interactively</td><td>store-value</td></tr>
<tr><td>compute-restarts</td><td>muffle-warning</td><td>use-value</td></tr>
<tr><td>continue</td><td>restart-bind</td><td>with-simple-restart</td></tr>
<tr><td>find-restart</td><td>restart-case</td><td></td></tr>
<tr><td>invoke-restart</td><td>restart-name</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.6: </strong>Defined names relating to restarts.</p></div></div>


<span id="g_t9_002e1_002e4_002e2_002e3-Restart-Tests"></span><h4 class="unnumberedsubsubsec">9.1.4.2.3 Restart Tests</h4>



<p>Each <i>restart</i> has an associated test, which is a function of one
argument (a <i>condition</i> or <code>nil</code>) which returns <i>true</i> if the <i>restart</i>
should be visible in the current <i>situation</i>.  This test is created by 
the <tt>:test-function</tt> option to <code>restart-bind</code> or 
the <tt>:test</tt> option to <code>restart-case</code>.
</p>

<span id="g_t9_002e1_002e4_002e2_002e4-Associating-a-Restart-with-a-Condition"></span><h4 class="unnumberedsubsubsec">9.1.4.2.4 Associating a Restart with a Condition</h4>

<span id="AssocRestartWithCond"></span>
<p>A <i>restart</i> can be &ldquo;associated with&rdquo; a <i>condition</i> explicitly
by <code>with-condition-restarts</code>, or implicitly by <code>restart-case</code>.
Such an assocation has <i>dynamic extent</i>.
</p>
<p>A single <i>restart</i> may be associated with several <i>conditions</i> 
at the same time.
A single <i>condition</i> may have several associated <i>restarts</i>
at the same time.
</p>
<p>Active restarts associated with a particular <i>condition</i> can be detected
by <i>calling</i> a <i>function</i> such as <code>find-restart</code>, supplying
that <i>condition</i> as the <var>condition</var> <i>argument</i>.
Active restarts can also be detected without regard to any associated
<i>condition</i> by calling such a function without a <var>condition</var> <i>argument</i>,
or by supplying a value of <code>nil</code>&nbsp;<!-- /@w -->for such an <i>argument</i>.
</p>


<hr>
<span id="Assertions"></span><div class="header">
<p>
Next: <a href="#Notes-about-the-Condition-System_0027s-Background" accesskey="n" rel="next">Notes about the Condition System's Background</a>, Previous: <a href="#Signaling-and-Handling-Conditions" accesskey="p" rel="prev">Signaling and Handling Conditions</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Assertions-1"></span><h4 class="subsection">9.1.5 Assertions</h4>

<p>Conditional signaling of <i>conditions</i>
based on such things as key match, form evaluation,
and <i>type</i> are handled by assertion <i>operators</i>.
The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to assertions.
</p>

<div class="float"><span id="fig9_002e7"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>assert</td><td>check-type</td><td>ecase</td></tr>
<tr><td>ccase</td><td>ctypecase</td><td>etypecase</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 9.7: </strong>Operators relating to assertions.</p></div></div>


<hr>
<span id="Notes-about-the-Condition-System_0027s-Background"></span><div class="header">
<p>
Previous: <a href="#Assertions" accesskey="p" rel="prev">Assertions</a>, Up: <a href="#Condition-System-Concepts" accesskey="u" rel="up">Condition System Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Notes-about-the-Condition-System_0027s-Background-1"></span><h4 class="subsection">9.1.6 Notes about the Condition System&rsquo;s Background</h4>

<p>For a background reference to the abstract concepts detailed in this
section, see <cite><a href="http://www.nhplace.com/kent/Papers/Exceptional-Situations-1990.html">Exceptional Situations in Lisp</a></cite>.  The details of that paper are not binding on
this document, but may be helpful in establishing a conceptual basis for
understanding this material.
</p>

<hr>
<span id="condition"></span><div class="header">
<p>
Next: <a href="#warning" accesskey="n" rel="next">warning</a>, Previous: <a href="#Condition-System-Concepts" accesskey="p" rel="prev">Condition System Concepts</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">condition</h4>
<span id="condition-_0028Condition-Type_0029"></span><h3 class="heading">condition (Condition Type)</h3>
<span id="index-condition-1"></span>
<span id="index-condition"></span>




<span id="Class-Precedence-List_003a-19"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-171"></span><h4 class="subsubheading">Description:</h4>

<p>All types of <i>conditions</i>, whether error or
non-error, must inherit from this <i>type</i>.
</p>
<p>No additional <i>subtype</i> relationships among the specified subtypes of <i>type</i> <code>condition</code>
are allowed, except when explicitly mentioned in the text; however
implementations are permitted to introduce additional <i>types</i>
and one of these <i>types</i> can be a <i>subtype</i> of any
number of the subtypes of <i>type</i> <code>condition</code>.
</p>
<p>Whether a user-defined <i>condition</i> <i>type</i> has <i>slots</i> 
that are accessible by <i>with-slots</i> is <i>implementation-dependent</i>.
Furthermore, even in an <i>implementation</i> 
in which user-defined <i>condition</i> <i>types</i> would have <i>slots</i>, 
it is <i>implementation-dependent</i> whether any <i>condition</i>
<i>types</i> defined in this document have such <i>slots</i> or, 
if they do, what their <i>names</i> might be;
only the reader functions documented by this specification may be relied
upon by portable code.
</p>
<p><i>Conforming code</i> must observe the following restrictions related to
<i>conditions</i>:
</p>

<ul>
<li> <code>define-condition</code>, not <code>defclass</code>, must be used
to define new <i>condition</i> <i>types</i>.

</li><li> <code>make-condition</code>, not <code>make-instance</code>, must be used to
create <i>condition</i> <i>objects</i> explicitly.

</li><li> The <tt>:report</tt> option of <code>define-condition</code>, not <code>defmethod</code>
for <code>print-object</code>, must be used to define a condition reporter.

</li><li> <code>slot-value</code>, <code>slot-boundp</code>, <code>slot-makunbound</code>,
and <code>with-slots</code> must not be used on <i>condition</i> <i>objects</i>.
Instead, the appropriate accessor functions (defined by <code>define-condition</code>)
should be used.
</li></ul>



<hr>
<span id="warning"></span><div class="header">
<p>
Next: <a href="#style_002dwarning" accesskey="n" rel="next">style-warning</a>, Previous: <a href="#condition" accesskey="p" rel="prev">condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">warning</h4>
<span id="warning-_0028Condition-Type_0029"></span><h3 class="heading">warning (Condition Type)</h3>
<span id="index-warning-2"></span>
<span id="index-warning-1"></span>


<span id="Class-Precedence-List_003a-20"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>warning</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-172"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>warning</code> consists of all types of warnings.
</p>
<span id="See-Also_003a-153"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#style_002dwarning">style-warning</a>
</p>

<hr>
<span id="style_002dwarning"></span><div class="header">
<p>
Next: <a href="#serious_002dcondition" accesskey="n" rel="next">serious-condition</a>, Previous: <a href="#warning" accesskey="p" rel="prev">warning</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">style-warning</h4>
<span id="style_002dwarning-_0028Condition-Type_0029"></span><h3 class="heading">style-warning (Condition Type)</h3>
<span id="index-style_002dwarning-1"></span>
<span id="index-style_002dwarning"></span>


<span id="Class-Precedence-List_003a-21"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>style-warning</code>,
<code>warning</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-173"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>style-warning</code> includes those <i>conditions</i> 
that represent <i>situations</i> involving <i>code</i> 
that is <i>conforming code</i> but that is nevertheless 
considered to be faulty or substandard.
</p>
<span id="See-Also_003a-154"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#muffle_002dwarning">muffle-warning</a>
</p>
<span id="Notes_003a-94"></span><h4 class="subsubheading">Notes:</h4>

<p>An <i>implementation</i> might signal such a <i>condition</i>
if it encounters <i>code</i>
that uses deprecated features 
or that appears unaesthetic or inefficient.
</p>
<p>An &lsquo;unused variable&rsquo; warning must be of <i>type</i> <code>style-warning</code>.
</p>
<p>In general, the question of whether <i>code</i> is faulty or substandard
is a subjective decision to be made by the facility processing that <i>code</i>.
The intent is that whenever such a facility wishes to complain about
<i>code</i> on such subjective grounds, it should use this 
<i>condition</i> <i>type</i> so that any clients who wish to redirect or
muffle superfluous warnings can do so without risking that they will be
redirecting or muffling other, more serious warnings.
</p>

<hr>
<span id="serious_002dcondition"></span><div class="header">
<p>
Next: <a href="#error-_0028Condition-Type_0029" accesskey="n" rel="next">error (Condition Type)</a>, Previous: <a href="#style_002dwarning" accesskey="p" rel="prev">style-warning</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">serious-condition</h4>
<span id="serious_002dcondition-_0028Condition-Type_0029"></span><h3 class="heading">serious-condition (Condition Type)</h3>
<span id="index-serious_002dcondition-1"></span>
<span id="index-serious_002dcondition"></span>


<span id="Class-Precedence-List_003a-22"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-174"></span><h4 class="subsubheading">Description:</h4>

<p>All <i>conditions</i> serious enough to require interactive intervention 
if not handled should inherit from the <i>type</i> <code>serious-condition</code>.
This condition type is provided
primarily so that it may be included as
a <i>superclass</i> of other <i>condition</i> <i>types</i>;
it is not intended to be signaled directly.
</p>
<span id="Notes_003a-95"></span><h4 class="subsubheading">Notes:</h4>

<p>Signaling a <i>serious condition</i> does not itself force entry into
the debugger.   However, except in the unusual situation where the
programmer can assure that no harm will come from failing to
<i>handle</i> a <i>serious condition</i>, such a <i>condition</i> is
usually signaled with <code>error</code> rather than <code>signal</code> in
order to assure that the program does not continue without
<i>handling</i> the <i>condition</i>.  (And conversely, it is
conventional to use <code>signal</code> rather than <code>error</code> to signal
conditions which are not <i>serious conditions</i>, since normally the
failure to handle a non-serious condition is not reason enough for the
debugger to be entered.)
</p>

<hr>
<span id="error-_0028Condition-Type_0029"></span><div class="header">
<p>
Next: <a href="#cell_002derror" accesskey="n" rel="next">cell-error</a>, Previous: <a href="#serious_002dcondition" accesskey="p" rel="prev">serious-condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">error (Condition Type)</h4>
<span id="error-_0028Condition-Type_0029-1"></span><h3 class="heading">error (Condition Type)</h3>
<span id="index-error-3"></span>
<span id="index-error"></span>


<span id="Class-Precedence-List_003a-23"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-175"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>error</code> consists of all <i>conditions</i> that represent <i>errors</i>.
</p>

<hr>
<span id="cell_002derror"></span><div class="header">
<p>
Next: <a href="#cell_002derror_002dname" accesskey="n" rel="next">cell-error-name</a>, Previous: <a href="#error-_0028Condition-Type_0029" accesskey="p" rel="prev">error (Condition Type)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">cell-error</h4>
<span id="cell_002derror-_0028Condition-Type_0029"></span><h3 class="heading">cell-error (Condition Type)</h3>
<span id="index-cell_002derror-1"></span>
<span id="index-cell_002derror"></span>


<span id="Class-Precedence-List_003a-24"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>cell-error</code>,
<code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-176"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>cell-error</code> consists of error conditions that occur during 
a location <i>access</i>.   The name of the offending cell is initialized by 
the <tt>:name</tt> initialization argument to <code>make-condition</code>,
and is <i>accessed</i> by the <i>function</i> <code>cell-error-name</code>.
</p>
<span id="See-Also_003a-155"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cell_002derror_002dname">cell-error-name</a>
</p>

<hr>
<span id="cell_002derror_002dname"></span><div class="header">
<p>
Next: <a href="#parse_002derror" accesskey="n" rel="next">parse-error</a>, Previous: <a href="#cell_002derror" accesskey="p" rel="prev">cell-error</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">cell-error-name</h4>
<span id="cell_002derror_002dname-_0028Function_0029"></span><h3 class="heading">cell-error-name (Function)</h3>
<span id="index-cell_002derror_002dname-2"></span>
<span id="index-cell_002derror_002dname"></span>



<span id="Syntax_003a-142"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-cell_002derror_002dname-1">Function: <strong>cell-error-name</strong> <em>condition <span class="roman">→</span> name</em></dt>
</dl>

<span id="Arguments-and-Values_003a-131"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition</var>&mdash;a <i>condition</i> of <i>type</i> <code>cell-error</code>.
</p>
<p><var>name</var>&mdash;an <i>object</i>.
</p>
<span id="Description_003a-177"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the <i>name</i> of the offending cell involved in the <i>situation</i>
represented by <var>condition</var>.
</p>
<p>The nature of the result depends on the specific <i>type</i> of <var>condition</var>.
For example,
if the <var>condition</var> is of <i>type</i> <code>unbound-variable</code>, the result is
the <i>name</i> of the <i>unbound variable</i> which was being <i>accessed</i>,
if the <var>condition</var> is of <i>type</i> <code>undefined-function</code>, this is
the <i>name</i> of the <i>undefined function</i> which was being <i>accessed</i>,
and if the <var>condition</var> is of <i>type</i> <code>unbound-slot</code>, this is
the <i>name</i> of the <i>slot</i> which was being <i>accessed</i>.
</p>
<span id="See-Also_003a-156"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cell_002derror">cell-error</a>,
<a href="Objects.html#unbound_002dslot">unbound-slot</a>,
<a href="Symbols.html#unbound_002dvariable">unbound-variable</a>,
<a href="Data-and-Control-Flow.html#undefined_002dfunction">undefined-function</a>,
<a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>


<hr>
<span id="parse_002derror"></span><div class="header">
<p>
Next: <a href="#storage_002dcondition" accesskey="n" rel="next">storage-condition</a>, Previous: <a href="#cell_002derror_002dname" accesskey="p" rel="prev">cell-error-name</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">parse-error</h4>
<span id="parse_002derror-_0028Condition-Type_0029"></span><h3 class="heading">parse-error (Condition Type)</h3>
<span id="index-parse_002derror-1"></span>
<span id="index-parse_002derror"></span>



<span id="Class-Precedence-List_003a-25"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>parse-error</code>,
<code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-178"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>parse-error</code> consists of 
error conditions that are related to parsing.
</p>
<span id="See-Also_003a-157"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Filenames.html#parse_002dnamestring">parse-namestring</a>,
<a href="Reader.html#reader_002derror">reader-error</a>
</p>


<hr>
<span id="storage_002dcondition"></span><div class="header">
<p>
Next: <a href="#assert" accesskey="n" rel="next">assert</a>, Previous: <a href="#parse_002derror" accesskey="p" rel="prev">parse-error</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">storage-condition</h4>
<span id="storage_002dcondition-_0028Condition-Type_0029"></span><h3 class="heading">storage-condition (Condition Type)</h3>
<span id="index-storage_002dcondition-1"></span>
<span id="index-storage_002dcondition"></span>


<span id="Class-Precedence-List_003a-26"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>storage-condition</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-179"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>storage-condition</code> consists of serious conditions that 
relate to problems with memory management that are potentially due to
<i>implementation-dependent</i> limits rather than semantic errors
in <i>conforming programs</i>, and that typically warrant entry to the 
debugger if not handled.  Depending on the details of the <i>implementation</i>, 
these might include such problems as 
stack overflow,
memory region overflow, 
and
storage exhausted.
</p>
<span id="Notes_003a-96"></span><h4 class="subsubheading">Notes:</h4>

<p>While some <span class="roman">Common Lisp</span>&nbsp;<!-- /@w -->operations might signal <i>storage-condition</i>
because they are defined to create <i>objects</i>,
it is unspecified whether operations that are not defined to create
<i>objects</i> create them anyway 
and so might also signal <code>storage-condition</code>.
Likewise, the evaluator itself might create <i>objects</i>
and so might signal <code>storage-condition</code>.
(The natural assumption might be that such 
<i>object</i> creation is naturally inefficient, 
but even that is <i>implementation-dependent</i>.)
In general, the entire question of how storage allocation is done is
<i>implementation-dependent</i>, 
and so any operation might signal <code>storage-condition</code> at any time.
Because such a <i>condition</i> is indicative of a limitation 
of the <i>implementation</i> 
or of the <i>image</i>
rather than an error in a <i>program</i>,
<i>objects</i> of <i>type</i> <code>storage-condition</code> are not of <i>type</i> <code>error</code>.
</p>

<hr>
<span id="assert"></span><div class="header">
<p>
Next: <a href="#error-_0028Function_0029" accesskey="n" rel="next">error (Function)</a>, Previous: <a href="#storage_002dcondition" accesskey="p" rel="prev">storage-condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">assert</h4>
<span id="assert-_0028Macro_0029"></span><h3 class="heading">assert (Macro)</h3>
<span id="index-assert-2"></span>
<span id="index-assert"></span>


<span id="Syntax_003a-143"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-assert-1">Macro: <strong>assert</strong> <em>test-form <tt>[</tt><tt>(</tt><tt>{</tt>place<tt>}</tt>*<tt>)</tt> <tt>[</tt>datum-form <tt>{</tt>argument-form<tt>}</tt>*<tt>]</tt><tt>]</tt> <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-132"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>test-form</var>&mdash;a <i>form</i>; always evaluated.
</p>
<p><var>place</var>&mdash;a <i>place</i>; evaluated if an error is signaled.
</p>
<p><var>datum-form</var>&mdash;a <i>form</i> that evaluates to a <var>datum</var>.
Evaluated each time an error is to be signaled, 
or not at all if no error is to be signaled.
</p>
<p><var>argument-form</var>&mdash;a <i>form</i> that evaluates to an <var>argument</var>.
Evaluated each time an error is to be signaled, 
or not at all if no error is to be signaled.
</p>
<p><var>datum</var>, <var>arguments</var>&mdash;<i>designators</i> for a <i>condition</i> 
of default type <code>error</code>.  (These <i>designators</i> are the
result of evaluating <var>datum-form</var> and each of the <var>argument-forms</var>.)
</p>
<span id="Description_003a-180"></span><h4 class="subsubheading">Description:</h4>

<p><code>assert</code> assures that <var>test-form</var> evaluates to <i>true</i>.
If <var>test-form</var> evaluates to <i>false</i>, <code>assert</code> signals a
<i>correctable</i> <i>error</i> (denoted by <var>datum</var> and <var>arguments</var>).
Continuing from this error using the <code>continue</code> restart makes it possible
for the user to alter the values of the <var>places</var> before
<code>assert</code> evaluates <var>test-form</var> again.
If the value of <var>test-form</var> is <i>non-nil</i>,
<code>assert</code> returns <code>nil</code>.
</p>
<p>The <var>places</var> are <i>generalized references</i> to data
upon which <var>test-form</var> depends, 
whose values can be changed by the user in attempting to correct the error.
<i>Subforms</i> of each <var>place</var> are only evaluated if an error is signaled, 
and might be re-evaluated if the error is re-signaled (after continuing without
actually fixing the problem).
The order of evaluation of the <var>places</var> is not specified;
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
<span id="index-order-of-evaluation-7"></span>
<span id="index-evaluation-order-7"></span>
If a <var>place</var> <i>form</i> is supplied that produces more values than there
are store variables, the extra values are ignored. If the supplied 
<i>form</i> produces fewer values than there are store variables, 
the missing values are set to <code>nil</code>.
</p>
<span id="Examples_003a-114"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq x (make-array '(3 5) :initial-element 3))
<span class="roman">→</span> #2A((3 3 3 3 3) (3 3 3 3 3) (3 3 3 3 3))
 (setq y (make-array '(3 5) :initial-element 7))
<span class="roman">→</span> #2A((7 7 7 7 7) (7 7 7 7 7) (7 7 7 7 7))
 (defun matrix-multiply (a b)
   (let ((*print-array* nil))
     (assert (and (= (array-rank a) (array-rank b) 2)
                  (= (array-dimension a 1) (array-dimension b 0)))
             (a b)
             &quot;Cannot multiply ~S by ~S.&quot; a b)
            (really-matrix-multiply a b))) <span class="roman">→</span> MATRIX-MULTIPLY
 (matrix-multiply x y)
▷ Correctable error in MATRIX-MULTIPLY: 
▷ Cannot multiply #&lt;ARRAY ...&gt; by #&lt;ARRAY ...&gt;.
▷ Restart options:
▷  1: You will be prompted for one or more new values.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Value for A: <kbd>x</kbd>
▷ Value for B: <kbd>(make-array '(5 3) :initial-element 6)</kbd>
<span class="roman">→</span> #2A((54 54 54 54 54)
       (54 54 54 54 54)
       (54 54 54 54 54)
       (54 54 54 54 54)
       (54 54 54 54 54))
</pre></div>


<div class="lisp">
<pre class="lisp"> (defun double-safely (x) (assert (numberp x) (x)) (+ x x))
 (double-safely 4) 
<span class="roman">→</span> 8
 
 (double-safely t)
▷ Correctable error in DOUBLE-SAFELY: The value of (NUMBERP X) must be non-NIL.
▷ Restart options:
▷  1: You will be prompted for one or more new values.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Value for X: <kbd>7</kbd>
<span class="roman">→</span> 14
</pre></div>


<span id="Affected-By_003a-18"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*break-on-signals*</code>
</p>
<p>The set of active <i>condition handlers</i>.
</p>
<span id="See-Also_003a-158"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#check_002dtype">check-type</a>, <a href="#error-_0028Function_0029">error (Function)</a>, <a href="Data-and-Control-Flow.html#Generalized-Reference">Section 5.1 (Generalized Reference)</a>
</p>
<span id="Notes_003a-97"></span><h4 class="subsubheading">Notes:</h4>

<p>The debugger need not include the <var>test-form</var> in the error message,
and the <var>places</var> should not be included in the message, but they
should be made available for the user&rsquo;s perusal.  If the user gives the
&ldquo;continue&rdquo; command, the values of any of the references can be altered.
The details of this depend on the implementation&rsquo;s style of user interface.
</p>
<hr>
<span id="error-_0028Function_0029"></span><div class="header">
<p>
Next: <a href="#cerror" accesskey="n" rel="next">cerror</a>, Previous: <a href="#assert" accesskey="p" rel="prev">assert</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">error (Function)</h4>
<span id="error-_0028Function_0029-1"></span><h3 class="heading">error (Function)</h3>
<span id="index-error-4"></span>
<span id="index-error-1"></span>


<span id="Syntax_003a-144"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-error-2">Function: <strong>error</strong> <em>datum <tt>&amp;rest</tt> arguments <span class="roman">→</span><span class="roman">|</span></em></dt>
</dl>

<span id="Arguments-and-Values_003a-133"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>datum</var>, <var>arguments</var>&mdash;<i>designators</i> for a <i>condition</i> 
of default type <code>simple-error</code>.
</p>
<span id="Description_003a-181"></span><h4 class="subsubheading">Description:</h4>

<p><code>error</code> effectively invokes <code>signal</code> on the denoted <i>condition</i>.
</p>
<p>If the <i>condition</i> is not handled, <code>(invoke-debugger <i>condition</i>)</code> is done.  
As a consequence of calling <code>invoke-debugger</code>, <code>error</code> 
cannot directly return; the only exit from <code>error</code>
can come by non-local transfer of control in a handler or by use of
an interactive debugging command.
</p>
<span id="Examples_003a-115"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun factorial (x)
   (cond ((or (not (typep x 'integer)) (minusp x))
          (error &quot;~S is not a valid argument to FACTORIAL.&quot; x))
         ((zerop x) 1)
         (t (* x (factorial (- x 1))))))
<span class="roman">→</span> FACTORIAL
(factorial 20)
<span class="roman">→</span> 2432902008176640000
(factorial -1)
▷ Error: -1 is not a valid argument to FACTORIAL.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return to Lisp Toplevel.
▷ Debug&gt; 
</pre></div>


<div class="lisp">
<pre class="lisp"> (setq a 'fred)
<span class="roman">→</span> FRED
 (if (numberp a) (1+ a) (error &quot;~S is not a number.&quot; A))
▷ Error: FRED is not a number.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>:Continue 1</kbd>
▷ Return to Lisp Toplevel.
 
 (define-condition not-a-number (error) 
                   ((argument :reader not-a-number-argument :initarg :argument))
   (:report (lambda (condition stream)
              (format stream &quot;~S is not a number.&quot;
                      (not-a-number-argument condition)))))
<span class="roman">→</span> NOT-A-NUMBER
 
 (if (numberp a) (1+ a) (error 'not-a-number :argument a))
▷ Error: FRED is not a number.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>:Continue 1</kbd>
▷ Return to Lisp Toplevel.
</pre></div>


<span id="Side-Effects_003a-8"></span><h4 class="subsubheading">Side Effects:</h4>

<p><i>Handlers</i> for the specified condition, if any, are invoked 
and might have side effects.
Program execution might stop, and the debugger might be entered.
</p>
<span id="Affected-By_003a-19"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing handler bindings.
</p>
<p><code>*break-on-signals*</code>
</p>
<p>Signals an error of <i>type</i> <code>type-error</code> if <var>datum</var> and <var>arguments</var> are not <i>designators</i> for a <i>condition</i>
</p>
<span id="See-Also_003a-159"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#cerror">cerror</a>, <a href="#signal">signal</a>, <a href="Printer.html#format">format</a>, 
<a href="#ignore_002derrors">ignore-errors</a>, <a href="#g_t_002abreak_002don_002dsignals_002a">*break-on-signals*</a>, 
<a href="#handler_002dbind">handler-bind</a>, <a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>
<span id="Notes_003a-98"></span><h4 class="subsubheading">Notes:</h4>

<p>Some implementations may provide debugger
commands for interactively returning from individual stack frames.
However, it should be possible for the programmer to feel confident
about writing code like:
</p>
<div class="lisp">
<pre class="lisp"> (defun wargames:no-win-scenario ()
   (if (error &quot;pushing the button would be stupid.&quot;))
   (push-the-button))
</pre></div>

<p>In this scenario, there should be no chance that
<code>error</code> will return
and the button will get pushed.
</p>
<p>While the meaning of this program is clear and it might be proven &lsquo;safe&rsquo;
by a formal theorem prover, such a proof is no guarantee that the
program is safe to execute.  Compilers have been known to have bugs,
computers to have signal glitches, and human beings to manually
intervene in ways that are not always possible to predict.  Those kinds
of errors, while beyond the scope of the condition system to formally
model, are not beyond the scope of things that should seriously be
considered when writing code that could have the kinds of sweeping
effects hinted at by this example.
</p>

<hr>
<span id="cerror"></span><div class="header">
<p>
Next: <a href="#check_002dtype" accesskey="n" rel="next">check-type</a>, Previous: <a href="#error-_0028Function_0029" accesskey="p" rel="prev">error (Function)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">cerror</h4>
<span id="cerror-_0028Function_0029"></span><h3 class="heading">cerror (Function)</h3>
<span id="index-cerror-2"></span>
<span id="index-cerror"></span>


<span id="Syntax_003a-145"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-cerror-1">Function: <strong>cerror</strong> <em>continue-format-control datum <tt>&amp;rest</tt> arguments <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-134"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>Continue-format-control</var>&mdash;a <i>format control</i>.
</p>


<p><var>datum</var>, <var>arguments</var>&mdash;<i>designators</i> for a <i>condition</i> 
of default type <code>simple-error</code>.
</p>
<span id="Description_003a-182"></span><h4 class="subsubheading">Description:</h4>

<p><code>cerror</code> effectively invokes <code>error</code> on the
<i>condition</i> named by <var>datum</var>.  As with any function that
implicitly calls <code>error</code>, if the <i>condition</i> is not handled,
<code>(invoke-debugger <i>condition</i>)</code> is executed.  While signaling is going on,
and while in the debugger if it is reached, it is possible to continue
code execution (<i>i.e.</i>, to return from <code>cerror</code>) using the <code>continue</code> restart.
</p>
<p>If <var>datum</var> is a <i>condition</i>, <var>arguments</var> can be supplied,
but are used only in conjunction with the <var>continue-format-control</var>.
</p>
<span id="Examples_003a-116"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun real-sqrt (n)
   (when (minusp n)
     (setq n (- n))
     (cerror &quot;Return sqrt(~D) instead.&quot; &quot;Tried to take sqrt(-~D).&quot; n))
   (sqrt n))

 (real-sqrt 4)
<span class="roman">→</span> 2.0

 (real-sqrt -9)
▷ Correctable error in REAL-SQRT: Tried to take sqrt(-9).
▷ Restart options:
▷  1: Return sqrt(9) instead.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
<span class="roman">→</span> 3.0
 
 (define-condition not-a-number (error)
   ((argument :reader not-a-number-argument :initarg :argument))
   (:report (lambda (condition stream)
              (format stream &quot;~S is not a number.&quot; 
                      (not-a-number-argument condition)))))
 
 (defun assure-number (n)
   (loop (when (numberp n) (return n))
         (cerror &quot;Enter a number.&quot;
                 'not-a-number :argument n)
         (format t &quot;~&amp;Type a number: &quot;)
         (setq n (read))
         (fresh-line)))

 (assure-number 'a)
▷ Correctable error in ASSURE-NUMBER: A is not a number.
▷ Restart options:
▷  1: Enter a number.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Type a number: <kbd>1/2</kbd>
<span class="roman">→</span> 1/2

 (defun assure-large-number (n)
   (loop (when (and (numberp n) (&gt; n 73)) (return n))
         (cerror &quot;Enter a number~:[~; a bit larger than ~D~].&quot;
                 &quot;~*~A is not a large number.&quot; 
                 (numberp n) n)
         (format t &quot;~&amp;Type a large number: &quot;)
         (setq n (read))
         (fresh-line)))
 
 (assure-large-number 10000)
<span class="roman">→</span> 10000

 (assure-large-number 'a)
▷ Correctable error in ASSURE-LARGE-NUMBER: A is not a large number.
▷ Restart options:
▷  1: Enter a number.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Type a large number: <kbd>88</kbd>
<span class="roman">→</span> 88

 (assure-large-number 37)
▷ Correctable error in ASSURE-LARGE-NUMBER: 37 is not a large number.
▷ Restart options:
▷  1: Enter a number a bit larger than 37.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Type a large number: <kbd>259</kbd>
<span class="roman">→</span> 259
 
 (define-condition not-a-large-number (error)
   ((argument :reader not-a-large-number-argument :initarg :argument))
   (:report (lambda (condition stream)
              (format stream &quot;~S is not a large number.&quot; 
                      (not-a-large-number-argument condition)))))
 
 (defun assure-large-number (n)
   (loop (when (and (numberp n) (&gt; n 73)) (return n))
         (cerror &quot;Enter a number~3*~:[~; a bit larger than ~*~D~].&quot;
                 'not-a-large-number
                 :argument n 
                 :ignore (numberp n)
                 :ignore n
                 :allow-other-keys t)
         (format t &quot;~&amp;Type a large number: &quot;)
         (setq n (read))
         (fresh-line)))
 

 (assure-large-number 'a)
▷ Correctable error in ASSURE-LARGE-NUMBER: A is not a large number.
▷ Restart options:
▷  1: Enter a number.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Type a large number: <kbd>88</kbd>
<span class="roman">→</span> 88
 
 (assure-large-number 37)
▷ Correctable error in ASSURE-LARGE-NUMBER: A is not a large number.
▷ Restart options:
▷  1: Enter a number a bit larger than 37.
▷  2: Top level.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Type a large number: <kbd>259</kbd>
<span class="roman">→</span> 259
</pre></div>


<span id="Affected-By_003a-20"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*break-on-signals*</code>.
</p>
<p>Existing handler bindings.
</p>
<span id="See-Also_003a-160"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#error-_0028Function_0029">error (Function)</a>, <a href="Printer.html#format">format</a>, <a href="#handler_002dbind">handler-bind</a>,
<a href="#g_t_002abreak_002don_002dsignals_002a">*break-on-signals*</a>, <a href="Types-and-Classes.html#simple_002dtype_002derror">simple-type-error</a>
</p>
<span id="Notes_003a-99"></span><h4 class="subsubheading">Notes:</h4>

<p>If <var>datum</var> is a <i>condition</i> <i>type</i> rather than a 
<i>string</i>, the <code>format</code> directive <code>~*</code> may be especially
useful in the <var>continue-format-control</var> in order to ignore the
<i>keywords</i> in the <i>initialization argument list</i>.  For example:
</p>
<div class="lisp">
<pre class="lisp">(cerror &quot;enter a new value to replace ~*~s&quot; 
        'not-a-number
        :argument a)
</pre></div>



<hr>
<span id="check_002dtype"></span><div class="header">
<p>
Next: <a href="#simple_002derror" accesskey="n" rel="next">simple-error</a>, Previous: <a href="#cerror" accesskey="p" rel="prev">cerror</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">check-type</h4>
<span id="check_002dtype-_0028Macro_0029"></span><h3 class="heading">check-type (Macro)</h3>
<span id="index-check_002dtype-2"></span>
<span id="index-check_002dtype"></span>


<span id="Syntax_003a-146"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-check_002dtype-1">Macro: <strong>check-type</strong> <em>place typespec <tt>[</tt><var>string</var><tt>]</tt> <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-135"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>place</var>&mdash;a <i>place</i>.
</p>
<p><var>typespec</var>&mdash;a <i>type specifier</i>.
</p>
<p><var>string</var>&mdash;a <i>string</i>; evaluated. 
</p>
<span id="Description_003a-183"></span><h4 class="subsubheading">Description:</h4>

<p><code>check-type</code> signals a <i>correctable</i> <i>error</i> 
of <i>type</i> <code>type-error</code> if the contents of <var>place</var> are not 
of the type <var>typespec</var>.
</p>
<p><code>check-type</code> can return only if the <code>store-value</code> restart is invoked,
either explicitly from a handler 
or implicitly as one of the options offered by the debugger.
If the <code>store-value</code> restart is invoked,
<code>check-type</code> stores the new value 
that is the argument to the <i>restart</i> invocation 
(or that is prompted for interactively by the debugger)
in <var>place</var> and starts over, 
checking the type of the new value
and signaling another error if it is still not of the desired <i>type</i>.
</p>
<p>The first time <var>place</var> is <i>evaluated</i>, 
it is <i>evaluated</i> by normal evaluation rules.
It is later <i>evaluated</i> as a <i>place</i> 
if the type check fails and the <code>store-value</code> restart is used;
see <a href="Data-and-Control-Flow.html#GenRefSubFormEval">Section 5.1.1.1 (Evaluation of Subforms to Places)</a>.
</p>
<p><i>string</i> should be an English description of the type, 
starting with an indefinite article (&ldquo;a&rdquo; or &ldquo;an&rdquo;).
If <i>string</i> is not supplied,
it is computed automatically from <var>typespec</var>.
The automatically generated message mentions
<var>place</var>,
its contents,
and the desired type.
An implementation may choose to generate 
a somewhat differently worded error message 
if it recognizes that <var>place</var> is of a particular form, 
such as one of the arguments to the function that called <code>check-type</code>.
<i>string</i> is allowed because some applications of <code>check-type</code> 
may require a more specific description of what is wanted
than can be generated automatically from <var>typespec</var>.
</p>
<span id="Examples_003a-117"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq aardvarks '(sam harry fred))
<span class="roman">→</span> (SAM HARRY FRED)
 (check-type aardvarks (array * (3)))
▷ Error: The value of AARDVARKS, (SAM HARRY FRED),
▷        is not a 3-long array.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a value to use instead.
▷  2: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>:CONTINUE 1</kbd>
▷ Use Value: <kbd>#(SAM FRED HARRY)</kbd>
<span class="roman">→</span> NIL
 aardvarks
<span class="roman">→</span> #&lt;ARRAY-T-3 13571&gt;
 (map 'list #'identity aardvarks)
<span class="roman">→</span> (SAM FRED HARRY)
 (setq aardvark-count 'foo)
<span class="roman">→</span> FOO
 (check-type aardvark-count (integer 0 *) &quot;A positive integer&quot;)
▷ Error: The value of AARDVARK-COUNT, FOO, is not a positive integer.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a value to use instead.
▷  2: Top level.
▷ Debug&gt; <kbd>:CONTINUE 2</kbd>
</pre></div>


<div class="lisp">
<pre class="lisp"> (defmacro define-adder (name amount)
   (check-type name (and symbol (not null)) &quot;a name for an adder function&quot;)
   (check-type amount integer)
   `(defun ,name (x) (+ x ,amount)))
  
 (macroexpand '(define-adder add3 3))
<span class="roman">→</span> (defun add3 (x) (+ x 3))
 
 (macroexpand '(define-adder 7 7))
▷ Error: The value of NAME, 7, is not a name for an adder function.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a value to use instead.
▷  2: Top level.
▷ Debug&gt; <kbd>:Continue 1</kbd>
▷ Specify a value to use instead.
▷ Type a form to be evaluated and used instead: <kbd>'ADD7</kbd>
<span class="roman">→</span> (defun add7 (x) (+ x 7))
 
 (macroexpand '(define-adder add5 something))
▷ Error: The value of AMOUNT, SOMETHING, is not an integer.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a value to use instead.
▷  2: Top level.
▷ Debug&gt; <kbd>:Continue 1</kbd>
▷ Type a form to be evaluated and used instead: <kbd>5</kbd>
<span class="roman">→</span> (defun add5 (x) (+ x 5))
 
</pre></div>


<p>Control is transferred to a handler.
</p>
<span id="Side-Effects_003a-9"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The debugger might be entered.
</p>
<span id="Affected-By_003a-21"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*break-on-signals*</code>
</p>
<p>The implementation.
</p>
<span id="See-Also_003a-161"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>
<span id="Notes_003a-100"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (check-type <var>place</var> <var>typespec</var>)
 ≡ (assert (typep <var>place</var> '<var>typespec</var>) (<var>place</var>)
            'type-error :datum <var>place</var> :expected-type '<var>typespec</var>)
</pre></div>



<hr>
<span id="simple_002derror"></span><div class="header">
<p>
Next: <a href="#invalid_002dmethod_002derror" accesskey="n" rel="next">invalid-method-error</a>, Previous: <a href="#check_002dtype" accesskey="p" rel="prev">check-type</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">simple-error</h4>
<span id="simple_002derror-_0028Condition-Type_0029"></span><h3 class="heading">simple-error (Condition Type)</h3>
<span id="index-simple_002derror-1"></span>
<span id="index-simple_002derror"></span>


<span id="Class-Precedence-List_003a-27"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>simple-error</code>,
<code>simple-condition</code>,
<code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-184"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>simple-error</code> consists of <i>conditions</i> that
are signaled by <code>error</code> or <code>cerror</code> when a
<i>format control</i>
is supplied as the function&rsquo;s first argument.
</p>

<hr>
<span id="invalid_002dmethod_002derror"></span><div class="header">
<p>
Next: <a href="#method_002dcombination_002derror" accesskey="n" rel="next">method-combination-error</a>, Previous: <a href="#simple_002derror" accesskey="p" rel="prev">simple-error</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">invalid-method-error</h4>
<span id="invalid_002dmethod_002derror-_0028Function_0029"></span><h3 class="heading">invalid-method-error (Function)</h3>
<span id="index-invalid_002dmethod_002derror-2"></span>
<span id="index-invalid_002dmethod_002derror"></span>


<span id="Syntax_003a-147"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-invalid_002dmethod_002derror-1">Function: <strong>invalid-method-error</strong> <em>method format-control <tt>&amp;rest</tt> args <span class="roman">→</span> <i>implementation-dependent</i></em></dt>
</dl>

<span id="Arguments-and-Values_003a-136"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>method</var>&mdash;a <i>method</i>.
</p>
<p><var>format-control</var>&mdash;a <i>format control</i>.
</p>
<p><var>args</var>&mdash;<i>format arguments</i> for the <var>format-control</var>.
</p>
<span id="Description_003a-185"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>function</i> <code>invalid-method-error</code> is used to signal an error of <i>type</i> <code>error</code>
when there is an applicable <i>method</i> whose <i>qualifiers</i> are not valid for
the method combination type.  The error message is constructed by
using the <var>format-control</var> suitable for <code>format</code>
and any <var>args</var> to it.  Because an
implementation may need to add additional contextual information to
the error message, <code>invalid-method-error</code> should be called only
within the dynamic extent of a method combination function.
</p>
<p>The <i>function</i> <code>invalid-method-error</code> is called automatically when a
<i>method</i> fails to satisfy every <i>qualifier</i> pattern and predicate in a
<code>define-method-combination</code> <i>form</i>.  A method combination function
that imposes additional restrictions should call 
<code>invalid-method-error</code> explicitly if it encounters a <i>method</i> 
it cannot accept.
</p>
<p>Whether <code>invalid-method-error</code> returns to its caller or exits via
<code>throw</code> is <i>implementation-dependent</i>.
</p>
<span id="Side-Effects_003a-10"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The debugger might be entered.
</p>
<span id="Affected-By_003a-22"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*break-on-signals*</code>
</p>
<span id="See-Also_003a-162"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Objects.html#define_002dmethod_002dcombination">define-method-combination</a>
</p>

<hr>
<span id="method_002dcombination_002derror"></span><div class="header">
<p>
Next: <a href="#signal" accesskey="n" rel="next">signal</a>, Previous: <a href="#invalid_002dmethod_002derror" accesskey="p" rel="prev">invalid-method-error</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">method-combination-error</h4>
<span id="method_002dcombination_002derror-_0028Function_0029"></span><h3 class="heading">method-combination-error (Function)</h3>
<span id="index-method_002dcombination_002derror-2"></span>
<span id="index-method_002dcombination_002derror"></span>


<span id="Syntax_003a-148"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-method_002dcombination_002derror-1">Function: <strong>method-combination-error</strong> <em>format-control <tt>&amp;rest</tt> args <span class="roman">→</span> <i>implementation-dependent</i></em></dt>
</dl>

<span id="Arguments-and-Values_003a-137"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>format-control</var>&mdash;a <i>format control</i>.
</p>
<p><var>args</var>&mdash;<i>format arguments</i> for <var>format-control</var>.
</p>
<span id="Description_003a-186"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>function</i> <code>method-combination-error</code> is used to signal an error
in method combination.  
</p>
<p>The error message is constructed by using a <var>format-control</var> suitable
for <code>format</code> and any <var>args</var> to it.  Because an implementation may
need to add additional contextual information to the error message,
<code>method-combination-error</code> should be called only within the
dynamic extent of a method combination function.
</p>
<p>Whether <code>method-combination-error</code> returns to its caller or exits
via <code>throw</code> is <i>implementation-dependent</i>.
</p>
<span id="Side-Effects_003a-11"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The debugger might be entered.
</p>
<span id="Affected-By_003a-23"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*break-on-signals*</code>
</p>
<span id="See-Also_003a-163"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Objects.html#define_002dmethod_002dcombination">define-method-combination</a>
</p>

<hr>
<span id="signal"></span><div class="header">
<p>
Next: <a href="#simple_002dcondition" accesskey="n" rel="next">simple-condition</a>, Previous: <a href="#method_002dcombination_002derror" accesskey="p" rel="prev">method-combination-error</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">signal</h4>
<span id="signal-_0028Function_0029"></span><h3 class="heading">signal (Function)</h3>
<span id="index-signal-6"></span>
<span id="index-signal-4"></span>


<span id="Syntax_003a-149"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-signal-5">Function: <strong>signal</strong> <em>datum <tt>&amp;rest</tt> arguments <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-138"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>datum</var>, <var>arguments</var>&mdash;<i>designators</i> for a <i>condition</i> 
of default type <code>simple-condition</code>.
</p>
<span id="Description_003a-187"></span><h4 class="subsubheading">Description:</h4>

<p><i>Signals</i> the <i>condition</i> denoted by the given <var>datum</var> and <var>arguments</var>.
If the <i>condition</i> is not handled, <code>signal</code> returns <code>nil</code>.
</p>
<span id="Examples_003a-118"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun handle-division-conditions (condition)
   (format t &quot;Considering condition for division condition handling~%&quot;)
   (when (and (typep condition 'arithmetic-error)
              (eq '/ (arithmetic-error-operation condition)))
     (invoke-debugger condition)))
HANDLE-DIVISION-CONDITIONS
 (defun handle-other-arithmetic-errors (condition)
   (format t &quot;Considering condition for arithmetic condition handling~%&quot;)
   (when (typep condition 'arithmetic-error)
     (abort)))
HANDLE-OTHER-ARITHMETIC-ERRORS
 (define-condition a-condition-with-no-handler (condition) ())
A-CONDITION-WITH-NO-HANDLER
 (signal 'a-condition-with-no-handler)
NIL
 (handler-bind ((condition #'handle-division-conditions)
                  (condition #'handle-other-arithmetic-errors))
   (signal 'a-condition-with-no-handler))
Considering condition for division condition handling
Considering condition for arithmetic condition handling
NIL
 (handler-bind ((arithmetic-error #'handle-division-conditions)
                  (arithmetic-error #'handle-other-arithmetic-errors))
   (signal 'arithmetic-error :operation '* :operands '(1.2 b)))
Considering condition for division condition handling
Considering condition for arithmetic condition handling
Back to Lisp Toplevel
</pre></div>


<span id="Side-Effects_003a-12"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The debugger might be entered due to <code>*break-on-signals*</code>.
</p>
<p>Handlers for the condition being signaled might transfer control.
</p>
<span id="Affected-By_003a-24"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing handler bindings.
</p>
<p><code>*break-on-signals*</code>
</p>
<span id="See-Also_003a-164"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#g_t_002abreak_002don_002dsignals_002a">*break-on-signals*</a>,
<a href="#error-_0028Function_0029">error (Function)</a>,
<a href="#simple_002dcondition">simple-condition</a>,
<a href="#Signaling-and-Handling-Conditions">Section 9.1.4 (Signaling and Handling Conditions)</a>
</p>
<span id="Notes_003a-101"></span><h4 class="subsubheading">Notes:</h4>

<p>If <code>(typep <var>datum</var> *break-on-signals*)</code> <i>yields</i> <i>true</i>,
the debugger is entered prior to beginning the signaling process.  
the <code>continue</code> restart can be used to continue with the signaling process.
This is also true for all other <i>functions</i> and <i>macros</i> that
should, might, or must <i>signal</i> <i>conditions</i>.
</p>

<hr>
<span id="simple_002dcondition"></span><div class="header">
<p>
Next: <a href="#simple_002dcondition_002dformat_002dcontrol_003b-simple_002dcondition_002dformat_002darguments" accesskey="n" rel="next">simple-condition-format-control; simple-condition-format-arguments</a>, Previous: <a href="#signal" accesskey="p" rel="prev">signal</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">simple-condition</h4>
<span id="simple_002dcondition-_0028Condition-Type_0029"></span><h3 class="heading">simple-condition (Condition Type)</h3>
<span id="index-simple_002dcondition-1"></span>
<span id="index-simple_002dcondition"></span>


<span id="Class-Precedence-List_003a-28"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>simple-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-188"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>simple-condition</code> represents <i>conditions</i> that are
signaled by <code>signal</code> whenever a <var>format-control</var> is
supplied as the function&rsquo;s first argument.
The <i>format control</i> and <i>format arguments</i> are initialized with 
the initialization arguments named <tt>:format-control</tt> 
and <tt>:format-arguments</tt> to <code>make-condition</code>, and are
<i>accessed</i> by the <i>functions</i>
<code>simple-condition-format-control</code>
and <code>simple-condition-format-arguments</code>.
If format arguments are not supplied to <code>make-condition</code>,
<code>nil</code>&nbsp;<!-- /@w -->is used as a default.
</p>
<span id="See-Also_003a-165"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#simple_002dcondition_002dformat_002dcontrol">simple-condition-format-control</a>,
<a href="#simple_002dcondition_002dformat_002darguments">simple-condition-format-arguments</a>
</p>

<hr>
<span id="simple_002dcondition_002dformat_002dcontrol_003b-simple_002dcondition_002dformat_002darguments"></span><div class="header">
<p>
Next: <a href="#warn" accesskey="n" rel="next">warn</a>, Previous: <a href="#simple_002dcondition" accesskey="p" rel="prev">simple-condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">simple-condition-format-control; simple-condition-format-arguments</h4>
<span id="simple_002dcondition_002dformat_002dcontrol_002c-simple_002dcondition_002dformat_002darguments-_0028Function_0029"></span><h3 class="heading">simple-condition-format-control, simple-condition-format-arguments (Function)</h3>
<span id="index-simple_002dcondition_002dformat_002dcontrol-2"></span>
<span id="index-simple_002dcondition_002dformat_002dcontrol"></span>
<span id="index-simple_002dcondition_002dformat_002darguments-2"></span>
<span id="index-simple_002dcondition_002dformat_002darguments"></span>
<span id="simple_002dcondition_002dformat_002dcontrol"></span><span id="simple_002dcondition_002dformat_002darguments"></span>


<span id="Syntax_003a-150"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-simple_002dcondition_002dformat_002dcontrol-1">Function: <strong>simple-condition-format-control</strong> <em>condition <span class="roman">→</span> format-control</em></dt>
</dl>
<dl>
<dt id="index-simple_002dcondition_002dformat_002darguments-1">Function: <strong>simple-condition-format-arguments</strong> <em>condition <span class="roman">→</span> format-arguments</em></dt>
</dl>

<span id="Arguments-and-Values_003a-139"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition</var>&mdash;a <i>condition</i> of <i>type</i> <code>simple-condition</code>.
</p>
<p><var>format-control</var>&mdash;a <i>format control</i>.
</p>
<p><var>format-arguments</var>&mdash;a <i>list</i>.
</p>
<span id="Description_003a-189"></span><h4 class="subsubheading">Description:</h4>

<p><code>simple-condition-format-control</code> returns the <i>format control</i> needed to 
process the <var>condition</var>&rsquo;s <i>format arguments</i>.
</p>
<p><code>simple-condition-format-arguments</code> returns a <i>list</i> of <i>format arguments</i> 
needed to process the <var>condition</var>&rsquo;s <i>format control</i>.
</p>
<span id="Examples_003a-119"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq foo (make-condition 'simple-condition
                          :format-control &quot;Hi ~S&quot;
                          :format-arguments '(ho)))
<span class="roman">→</span> #&lt;SIMPLE-CONDITION 26223553&gt;
 (apply #'format nil (simple-condition-format-control foo)
                     (simple-condition-format-arguments foo))
<span class="roman">→</span> &quot;Hi HO&quot;
</pre></div>


<span id="See-Also_003a-166"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#simple_002dcondition">simple-condition</a>,
<a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>


<hr>
<span id="warn"></span><div class="header">
<p>
Next: <a href="#simple_002dwarning" accesskey="n" rel="next">simple-warning</a>, Previous: <a href="#simple_002dcondition_002dformat_002dcontrol_003b-simple_002dcondition_002dformat_002darguments" accesskey="p" rel="prev">simple-condition-format-control; simple-condition-format-arguments</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">warn</h4>
<span id="warn-_0028Function_0029"></span><h3 class="heading">warn (Function)</h3>
<span id="index-warn-2"></span>
<span id="index-warn"></span>


<span id="Syntax_003a-151"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-warn-1">Function: <strong>warn</strong> <em>datum <tt>&amp;rest</tt> arguments <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-140"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>datum</var>, <var>arguments</var>&mdash;<i>designators</i> for a <i>condition</i> 
of default type <code>simple-warning</code>.
</p>
<span id="Description_003a-190"></span><h4 class="subsubheading">Description:</h4>

<p><i>Signals</i> a <i>condition</i> of <i>type</i> <code>warning</code>.
If the <i>condition</i> is not <i>handled</i>,
reports the <i>condition</i> to <i>error output</i>.
</p>
<p>The precise mechanism for warning is as follows:
</p>


<dl compact="compact">
<dt><b>The warning condition is signaled</b></dt>
<dd>

<p>While the <code>warning</code> <i>condition</i> is being signaled,
the <code>muffle-warning</code> restart is established for use by a <i>handler</i>.
If invoked, this <i>restart</i> bypasses further action by <code>warn</code>,
which in turn causes <code>warn</code> to immediately return <code>nil</code>.
</p>
</dd>
<dt><b>If no handler for the warning condition is found</b></dt>
<dd>

<p>If no handlers for the warning condition are found,
or if all such handlers decline,
then the <i>condition</i> is reported to <i>error output</i>
by <code>warn</code> in an <i>implementation-dependent</i> format.
</p>
</dd>
<dt><b><code>nil</code>&nbsp;<!-- /@w -->is returned</b></dt>
<dd>

<p>The value returned by <code>warn</code> if it returns is <code>nil</code>.
</p></dd>
</dl>


<span id="Examples_003a-120"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp">  (defun foo (x)
    (let ((result (* x 2)))
      (if (not (typep result 'fixnum))
          (warn &quot;You're using very big numbers.&quot;))
      result))
<span class="roman">→</span> FOO
 
  (foo 3)
<span class="roman">→</span> 6
 
  (foo most-positive-fixnum)
▷ Warning: You're using very big numbers.
<span class="roman">→</span> 4294967294
 
  (setq *break-on-signals* t)
<span class="roman">→</span> T
 
  (foo most-positive-fixnum)
▷ Break: Caveat emptor.
▷ To continue, type :CONTINUE followed by an option number.
▷  1: Return from Break.
▷  2: Abort to Lisp Toplevel.
▷ Debug&gt; :continue 1
▷ Warning: You're using very big numbers.
<span class="roman">→</span> 4294967294
</pre></div>


<span id="Side-Effects_003a-13"></span><h4 class="subsubheading">Side Effects:</h4>

<p>A warning is issued.  The debugger might be entered.
</p>
<span id="Affected-By_003a-25"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing handler bindings.
</p>
<p><code>*break-on-signals*</code>,
<code>*error-output*</code>.         
</p>
<span id="Exceptional-Situations_003a-46"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>datum</var> is a <i>condition</i>
and if the <i>condition</i> is not of <i>type</i> <code>warning</code>,
or <var>arguments</var> is <i>non-nil</i>, an error of <i>type</i> <code>type-error</code> is signaled.
</p>
<p>If <var>datum</var> is a condition type, 
the result of <code>(apply #'make-condition datum arguments)</code> 
must be of <i>type</i> <code>warning</code> or an error of <i>type</i> <code>type-error</code> is signaled.
</p>
<span id="See-Also_003a-167"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#g_t_002abreak_002don_002dsignals_002a">*break-on-signals*</a>,
<a href="#muffle_002dwarning">muffle-warning</a>,
<a href="#signal">signal</a>
</p>

<hr>
<span id="simple_002dwarning"></span><div class="header">
<p>
Next: <a href="#invoke_002ddebugger" accesskey="n" rel="next">invoke-debugger</a>, Previous: <a href="#warn" accesskey="p" rel="prev">warn</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">simple-warning</h4>
<span id="simple_002dwarning-_0028Condition-Type_0029"></span><h3 class="heading">simple-warning (Condition Type)</h3>
<span id="index-simple_002dwarning-1"></span>
<span id="index-simple_002dwarning"></span>


<span id="Class-Precedence-List_003a-29"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>simple-warning</code>,
<code>simple-condition</code>,
<code>warning</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-191"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>simple-warning</code> represents <i>conditions</i> that 
are signaled by <code>warn</code> whenever a 
<i>format control</i> 
is supplied as the function&rsquo;s first argument.
</p>

<hr>
<span id="invoke_002ddebugger"></span><div class="header">
<p>
Next: <a href="#break" accesskey="n" rel="next">break</a>, Previous: <a href="#simple_002dwarning" accesskey="p" rel="prev">simple-warning</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">invoke-debugger</h4>
<span id="invoke_002ddebugger-_0028Function_0029"></span><h3 class="heading">invoke-debugger (Function)</h3>
<span id="index-invoke_002ddebugger-2"></span>
<span id="index-invoke_002ddebugger"></span>


<span id="Syntax_003a-152"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-invoke_002ddebugger-1">Function: <strong>invoke-debugger</strong> <em>condition <span class="roman">→</span><span class="roman">|</span></em></dt>
</dl>

<span id="Arguments-and-Values_003a-141"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition</var>&mdash;a <i>condition</i> <i>object</i>.
</p>
<span id="Description_003a-192"></span><h4 class="subsubheading">Description:</h4>

<p><code>invoke-debugger</code> attempts to enter the debugger with <var>condition</var>.
</p>
<p>If <code>*debugger-hook*</code> is not <code>nil</code>, it should be a <i>function</i> 
(or the name of a <i>function</i>) to be called prior to entry to 
the standard debugger.  The <i>function</i> is called with
<code>*debugger-hook*</code> bound to <code>nil</code>, and the <i>function</i> 
must accept two arguments: the <var>condition</var> 
and the <i>value</i> of <code>*debugger-hook*</code> prior to binding it to <code>nil</code>. 
If the <i>function</i> returns normally,
the standard debugger is entered.
</p>
<p>The standard debugger never directly returns.  Return can occur only by a
non-local transfer of control, such as the use of a restart function.
</p>
<span id="Examples_003a-121"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (ignore-errors ;Normally, this would suppress debugger entry
   (handler-bind ((error #'invoke-debugger)) ;But this forces debugger entry
     (error &quot;Foo.&quot;)))
Debug: Foo.
To continue, type :CONTINUE followed by an option number:
 1: Return to Lisp Toplevel.
Debug&gt;
</pre></div>



<span id="Side-Effects_003a-14"></span><h4 class="subsubheading">Side Effects:</h4>

<p><code>*debugger-hook*</code> is bound to <code>nil</code>,
program execution is discontinued,
and the debugger is entered.
</p>
<span id="Affected-By_003a-26"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*debug-io*</code> and <code>*debugger-hook*</code>.
</p>
<span id="See-Also_003a-168"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#error-_0028Function_0029">error (Function)</a>, <a href="#break">break</a>
</p>

<hr>
<span id="break"></span><div class="header">
<p>
Next: <a href="#g_t_002adebugger_002dhook_002a" accesskey="n" rel="next">*debugger-hook*</a>, Previous: <a href="#invoke_002ddebugger" accesskey="p" rel="prev">invoke-debugger</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">break</h4>
<span id="break-_0028Function_0029"></span><h3 class="heading">break (Function)</h3>
<span id="index-break-2"></span>
<span id="index-break"></span>


<span id="Syntax_003a-153"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-break-1">Function: <strong>break</strong> <em><tt>&amp;optional</tt> format-control <tt>&amp;rest</tt> format-arguments <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-142"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>format-control</var>&mdash;a <i>format control</i>.
The default is <i>implementation-dependent</i>.
</p>
<p><var>format-arguments</var>&mdash;<i>format arguments</i> for the <var>format-control</var>.
</p>
<span id="Description_003a-193"></span><h4 class="subsubheading">Description:</h4>

<p><code>break</code> <i>formats</i> <var>format-control</var> and <var>format-arguments</var>
and then goes directly into the debugger without allowing any possibility of
interception by programmed error-handling facilities.
</p>
<p>If the <code>continue</code> restart is used while in the debugger,
<code>break</code> immediately returns <code>nil</code>&nbsp;<!-- /@w -->without taking any unusual recovery action.
</p>
<p><code>break</code> binds <code>*debugger-hook*</code> to <code>nil</code>&nbsp;<!-- /@w -->
before attempting to enter the debugger.
</p>
<span id="Examples_003a-122"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (break &quot;You got here with arguments: ~:S.&quot; '(FOO 37 A))
▷ BREAK: You got here with these arguments: FOO, 37, A.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return from BREAK.
▷  2: Top level.
▷ Debug&gt; :CONTINUE 1
▷ Return from BREAK.
<span class="roman">→</span> NIL
 
</pre></div>


<span id="Side-Effects_003a-15"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The debugger is entered.
</p>
<span id="Affected-By_003a-27"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*debug-io*</code>.
</p>
<span id="See-Also_003a-169"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#error-_0028Function_0029">error (Function)</a>, <a href="#invoke_002ddebugger">invoke-debugger</a>.
</p>
<span id="Notes_003a-102"></span><h4 class="subsubheading">Notes:</h4>

<p><code>break</code> is used as a way of inserting temporary debugging
&ldquo;breakpoints&rdquo; in a program, not as a way of signaling errors.  
For this reason, <code>break</code> does not take the <var>continue-format-control</var>
<i>argument</i> that <code>cerror</code> takes.
This and the lack of any possibility of interception by
<i>condition</i> <i>handling</i> are the only program-visible 
differences between <code>break</code> and <code>cerror</code>.
</p>
<p>The user interface aspects of <code>break</code> and <code>cerror</code> are
permitted to vary more widely, in order to accomodate the interface
needs of the <i>implementation</i>. For example, it is permissible for a
<i>Lisp read-eval-print loop</i> to be entered by <code>break</code> rather
than the conventional debugger.
</p>
<p><code>break</code> could be defined by:
</p>
<div class="lisp">
<pre class="lisp"> (defun break (&amp;optional (format-control &quot;Break&quot;) &amp;rest format-arguments)
   (with-simple-restart (continue &quot;Return from BREAK.&quot;)
     (let ((*debugger-hook* nil))
       (invoke-debugger
           (make-condition 'simple-condition
                           :format-control format-control
                           :format-arguments format-arguments))))
   nil)
</pre></div>



<hr>
<span id="g_t_002adebugger_002dhook_002a"></span><div class="header">
<p>
Next: <a href="#g_t_002abreak_002don_002dsignals_002a" accesskey="n" rel="next">*break-on-signals*</a>, Previous: <a href="#break" accesskey="p" rel="prev">break</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">*debugger-hook*</h4>
<span id="g_t_002adebugger_002dhook_002a-_0028Variable_0029"></span><h3 class="heading">*debugger-hook* (Variable)</h3>
<span id="index-_002adebugger_002dhook_002a-1"></span>
<span id="index-_002adebugger_002dhook_002a"></span>


<span id="Value-Type_003a-1"></span><h4 class="subsubheading">Value Type:</h4>

<p>a <i>designator</i> for a <i>function</i> of two <i>arguments</i>
(a <i>condition</i> and the <i>value</i> of <code>*debugger-hook*</code> at the time 
the debugger was entered),
or <code>nil</code>.
</p>
<span id="Initial-Value_003a-1"></span><h4 class="subsubheading">Initial Value:</h4>

<p><code>nil</code>.
</p>
<span id="Description_003a-194"></span><h4 class="subsubheading">Description:</h4>

<p>When the <i>value</i> of <code>*debugger-hook*</code> is <i>non-nil</i>, it is called prior to
normal entry into the debugger, either due to a call to <code>invoke-debugger</code> 
or due to automatic entry into the debugger from a call to <code>error</code> 
or <code>cerror</code> with a condition that is not handled.  
The <i>function</i> may either handle the <i>condition</i>
(transfer control) or return normally (allowing the standard debugger to run).
To minimize recursive errors while debugging,
<code>*debugger-hook*</code> is bound to <code>nil</code>&nbsp;<!-- /@w -->by <code>invoke-debugger</code> 
prior to calling the <i>function</i>.
</p>
<span id="Examples_003a-123"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun one-of (choices &amp;optional (prompt &quot;Choice&quot;))
   (let ((n (length choices)) (i))
     (do ((c choices (cdr c)) (i 1 (+ i 1)))
         ((null c))
       (format t &quot;~&amp;[~D] ~A~%&quot; i (car c)))
     (do () ((typep i `(integer 1 ,n)))
       (format t &quot;~&amp;~A: &quot; prompt)
       (setq i (read))
       (fresh-line))
     (nth (- i 1) choices)))

 (defun my-debugger (condition me-or-my-encapsulation)
   (format t &quot;~&amp;Fooey: ~A&quot; condition)
   (let ((restart (one-of (compute-restarts))))
     (if (not restart) (error &quot;My debugger got an error.&quot;))
     (let ((*debugger-hook* me-or-my-encapsulation))
       (invoke-restart-interactively restart))))
 
 (let ((*debugger-hook* #'my-debugger))
   (+ 3 'a))
▷ Fooey: The argument to +, A, is not a number.
▷  [1] Supply a replacement for A.
▷  [2] Return to Cloe Toplevel.
▷ Choice: 1
▷  Form to evaluate and use: (+ 5 'b)
▷  Fooey: The argument to +, B, is not a number.
▷  [1] Supply a replacement for B.
▷  [2] Supply a replacement for A.
▷  [3] Return to Cloe Toplevel.
▷ Choice: 1
▷  Form to evaluate and use: 1
<span class="roman">→</span> 9
</pre></div>


<span id="Affected-By_003a-28"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>invoke-debugger</code>
</p>
<span id="Notes_003a-103"></span><h4 class="subsubheading">Notes:</h4>

<p>When evaluating code typed in by the user interactively, it is sometimes
useful to have the hook function bind <code>*debugger-hook*</code> to the
<i>function</i> that was its second argument so that recursive errors
can be handled using the same interactive facility.
</p>

<hr>
<span id="g_t_002abreak_002don_002dsignals_002a"></span><div class="header">
<p>
Next: <a href="#handler_002dbind" accesskey="n" rel="next">handler-bind</a>, Previous: <a href="#g_t_002adebugger_002dhook_002a" accesskey="p" rel="prev">*debugger-hook*</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">*break-on-signals*</h4>
<span id="g_t_002abreak_002don_002dsignals_002a-_0028Variable_0029"></span><h3 class="heading">*break-on-signals* (Variable)</h3>
<span id="index-_002abreak_002don_002dsignals_002a-1"></span>
<span id="index-_002abreak_002don_002dsignals_002a"></span>


<span id="Value-Type_003a-2"></span><h4 class="subsubheading">Value Type:</h4>

<p>a <i>type specifier</i>.
</p>
<span id="Initial-Value_003a-2"></span><h4 class="subsubheading">Initial Value:</h4>

<p><code>nil</code>.
</p>
<span id="Description_003a-195"></span><h4 class="subsubheading">Description:</h4>

<p>When <code>(typep <i>condition</i> *break-on-signals*)</code> returns <i>true</i>,
calls to <code>signal</code>, and to other <i>operators</i> such as <code>error</code>
that implicitly call <code>signal</code>, enter the debugger prior to
<i>signaling</i> the <i>condition</i>.
</p>
<p>the <code>continue</code> restart can be used to continue with the normal
<i>signaling</i> process when a break occurs process due to
<code>*break-on-signals*</code>.
</p>
<span id="Examples_003a-124"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> *break-on-signals* <span class="roman">→</span> NIL
 (ignore-errors (error 'simple-error :format-control &quot;Fooey!&quot;))
<span class="roman">→</span> NIL, #&lt;SIMPLE-ERROR 32207172&gt;

 (let ((*break-on-signals* 'error))
   (ignore-errors (error 'simple-error :format-control &quot;Fooey!&quot;)))
▷ Break: Fooey!
▷ BREAK entered because of *BREAK-ON-SIGNALS*.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Continue to signal.
▷  2: Top level.
▷ Debug&gt; <kbd>:CONTINUE 1</kbd>
▷ Continue to signal.
<span class="roman">→</span> NIL, #&lt;SIMPLE-ERROR 32212257&gt;

 (let ((*break-on-signals* 'error))
   (error 'simple-error :format-control &quot;Fooey!&quot;))
▷ Break: Fooey!
▷ BREAK entered because of *BREAK-ON-SIGNALS*.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Continue to signal.
▷  2: Top level.
▷ Debug&gt; <kbd>:CONTINUE 1</kbd>
▷ Continue to signal.
▷ Error: Fooey!
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Top level.
▷ Debug&gt; <kbd>:CONTINUE 1</kbd>
▷ Top level.
</pre></div>


<span id="See-Also_003a-170"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#break">break</a>,
<a href="#signal">signal</a>, <a href="#warn">warn</a>, <a href="#error-_0028Function_0029">error (Function)</a>, 
<a href="Types-and-Classes.html#typep">typep</a>, 
<a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>
<span id="Notes_003a-104"></span><h4 class="subsubheading">Notes:</h4>

<p><code>*break-on-signals*</code> is intended primarily for use in debugging code that
does signaling.   When setting <code>*break-on-signals*</code>, the user is
encouraged to choose the most restrictive specification that suffices.
Setting <code>*break-on-signals*</code> effectively violates the modular handling of 
<i>condition</i> signaling.  In practice, the complete effect of setting
<code>*break-on-signals*</code> might be unpredictable in some cases since the user
might not be aware of the variety or number of calls to <code>signal</code> 
that are used in code called only incidentally.
</p>

<p><code>*break-on-signals*</code> enables an early entry to the debugger but such an
entry does not preclude an additional entry to the debugger in the case of
operations such as <code>error</code> and <code>cerror</code>.
</p>

<hr>
<span id="handler_002dbind"></span><div class="header">
<p>
Next: <a href="#handler_002dcase" accesskey="n" rel="next">handler-case</a>, Previous: <a href="#g_t_002abreak_002don_002dsignals_002a" accesskey="p" rel="prev">*break-on-signals*</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">handler-bind</h4>
<span id="handler_002dbind-_0028Macro_0029"></span><h3 class="heading">handler-bind (Macro)</h3>
<span id="index-handler_002dbind-2"></span>
<span id="index-handler_002dbind"></span>


<span id="Syntax_003a-154"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-handler_002dbind-1">Macro: <strong>handler-bind</strong> <em><tt>(</tt><tt>{</tt><tt>↓</tt>binding<tt>}</tt>*<tt>)</tt>  <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<dl compact="compact">
<dt><var>binding</var>::=</dt>
<dd><p><tt>(</tt>type handler<tt>)</tt>
</p></dd>
</dl>

<span id="Arguments-and-Values_003a-143"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>type</var>&mdash;a <i>type specifier</i>.
</p>
<p><var>handler</var>&mdash;a <i>form</i>; evaluated to produce a <var>handler-function</var>.
</p>
<p><var>handler-function</var>&mdash;a <i>designator</i> for a <i>function</i> of one <i>argument</i>.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <i>forms</i>.
</p>
<span id="Description_003a-196"></span><h4 class="subsubheading">Description:</h4>

<p>Executes <var>forms</var> in a <i>dynamic environment</i> where the indicated
<var>handler</var> <i>bindings</i> are in effect.
</p>
<p>Each <var>handler</var> should evaluate to a <i>handler-function</i>,
which is used to handle <i>conditions</i> of the given <var>type</var>
during execution of the <var>forms</var>.  This <i>function</i> should
take a single argument, the <i>condition</i> being signaled.
</p>
<p>If more than one <var>handler</var> <i>binding</i> is supplied, 
the <var>handler</var> <i>bindings</i> are searched sequentially from 
top to bottom in search of a match (by visual analogy with <code>typecase</code>).  
If an appropriate <i>type</i> is found, 
the associated handler is run in a <i>dynamic environment</i> where none of these
<var>handler</var> bindings are visible (to avoid recursive errors).  
If the <i>handler</i> <i>declines</i>, the search continues for another <i>handler</i>.
</p>
<p>If no appropriate <i>handler</i> is found, other <i>handlers</i> are sought
from dynamically enclosing contours.  If no <i>handler</i> is found outside, 
then <code>signal</code> returns or <code>error</code> enters the debugger. 
</p>
<span id="Examples_003a-125"></span><h4 class="subsubheading">Examples:</h4>


<p>In the following code, if an unbound variable error is
signaled in the body (and not handled by an intervening handler), 
the first function is called.  
</p>
<div class="lisp">
<pre class="lisp"> (handler-bind ((unbound-variable #'(lambda ...))
                (error #'(lambda ...)))
   ...)
</pre></div>


<p>If any other kind of error is signaled, the second function is called.
In either case, neither handler is active while executing the code
in the associated function.
</p>
<div class="lisp">
<pre class="lisp"> (defun trap-error-handler (condition)
   (format *error-output* &quot;~&amp;~A~&amp;&quot; condition)
   (throw 'trap-errors nil))

 (defmacro trap-errors (&amp;rest forms)
   `(catch 'trap-errors
      (handler-bind ((error #'trap-error-handler))
        ,@forms)))
 
 (list (trap-errors (signal &quot;Foo.&quot;) 1)
       (trap-errors (error  &quot;Bar.&quot;) 2)
       (+ 1 2))
▷ Bar.
<span class="roman">→</span> (1 NIL 3)
</pre></div>


<p>Note that &ldquo;Foo.&rdquo; is not printed because the condition made
by <code>signal</code> is a <i>simple condition</i>, which is not of <i>type</i> <code>error</code>, 
so it doesn&rsquo;t trigger the handler for <code>error</code> set up by <code>trap-errors</code>.
</p>
<span id="See-Also_003a-171"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#handler_002dcase">handler-case</a>
</p>

<hr>
<span id="handler_002dcase"></span><div class="header">
<p>
Next: <a href="#ignore_002derrors" accesskey="n" rel="next">ignore-errors</a>, Previous: <a href="#handler_002dbind" accesskey="p" rel="prev">handler-bind</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">handler-case</h4>
<span id="handler_002dcase-_0028Macro_0029"></span><h3 class="heading">handler-case (Macro)</h3>
<span id="index-handler_002dcase-2"></span>
<span id="index-handler_002dcase"></span>



<span id="Syntax_003a-155"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-handler_002dcase-1">Macro: <strong>handler-case</strong> <em><var>expression</var> 〚<tt>{</tt><tt>↓</tt>error-clause<tt>}</tt>* | <tt>↓</tt>no-error-clause〛 <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<dl compact="compact">
<dt><var>clause</var>::=</dt>
<dd><p><tt>↓</tt>error-clause | <tt>↓</tt>no-error-clause
</p></dd>
</dl>
<dl compact="compact">
<dt><var>error-clause</var>::=</dt>
<dd><p><tt>(</tt>typespec <tt>(</tt><tt>[</tt>var<tt>]</tt><tt>)</tt> <tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>*<tt>)</tt>
</p></dd>
</dl>
<dl compact="compact">
<dt><var>no-error-clause</var>::=</dt>
<dd><p><tt>(</tt><tt>:no-error</tt> <var>lambda-list</var> <tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>*<tt>)</tt>
</p></dd>
</dl>

<span id="Arguments-and-Values_003a-144"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>expression</var>&mdash;a <i>form</i>.
</p>
<p><var>typespec</var>&mdash;a <i>type specifier</i>.
</p>
<p><var>var</var>&mdash;a <i>variable</i> <i>name</i>. 
</p>
<p><var>lambda-list</var>&mdash;an <i>ordinary lambda list</i>.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>form</var>&mdash;a <i>form</i>.
</p>
<p><var>results</var>&mdash;In the normal situation, the values returned are those that result from
the evaluation of <var>expression</var>;
in the exceptional situation when control is transferred to a <var>clause</var>,
the value of the last <var>form</var> in that <var>clause</var> is returned.
</p>
<span id="Description_003a-197"></span><h4 class="subsubheading">Description:</h4>

<p><code>handler-case</code> executes <var>expression</var> in a <i>dynamic environment</i> where
various handlers are active.  Each <i>error-clause</i> specifies how to 
handle a <i>condition</i> matching the indicated <var>typespec</var>. 
A <i>no-error-clause</i> allows the specification of a particular action
if control returns normally.
</p>
<p>If a <i>condition</i> is signaled for which there is an appropriate
<i>error-clause</i> during the execution of <var>expression</var>
(<i>i.e.</i>, one for which <code>(typep <i>condition</i> '<var>typespec</var>)</code>
returns <i>true</i>) and if there is no intervening handler for a 
<i>condition</i> of that <i>type</i>, then control is transferred to
the body of the relevant <i>error-clause</i>.  In this case, the 
dynamic state is unwound appropriately (so that the handlers established
around the <var>expression</var> are no longer active), and <var>var</var> is bound to
the <i>condition</i> that had been signaled.
If more than one case is provided, those cases are made accessible
in parallel.  That is, in
</p>
<div class="lisp">
<pre class="lisp">  (handler-case <i>form</i>
    (<i>typespec1</i> (<i>var1</i>) <i>form1</i>)
    (<i>typespec2</i> (<i>var2</i>) <i>form2</i>))
</pre></div>


<p>if the first <i>clause</i> (containing <i>form1</i>) has been selected, 
the handler for the second is no longer visible (or vice versa).
</p>
<p>The <i>clauses</i>
are searched sequentially from top to bottom. If there is <i>type</i>
overlap between <var>typespecs</var>, 
the earlier of the <i>clauses</i> is selected.
</p>
<p>If <var>var</var> 
is not needed, it can be omitted. That is, a <i>clause</i> such as:
</p>
<div class="lisp">
<pre class="lisp">  (<var>typespec</var> (<var>var</var>) (declare (ignore <var>var</var>)) <var>form</var>)
</pre></div>


<p>can be written
<code>(<var>typespec</var> () <var>form</var>)</code>.
</p>
<p>If there are no <var>forms</var> in a selected <i>clause</i>, the case, and therefore
<code>handler-case</code>, returns <code>nil</code>.
If execution of <var>expression</var> 
returns normally and no <i>no-error-clause</i>
exists, the values returned by 
<var>expression</var> are returned by <code>handler-case</code>.
If execution of 
<var>expression</var> returns normally and a <i>no-error-clause</i>
does exist, the values returned are used as arguments to the function
described by constructing
<code>(lambda <var>lambda-list</var> <tt>{</tt>form<tt>}</tt>*)</code>
from the <i>no-error-clause</i>, and the <i>values</i> of that function call are
returned by <code>handler-case</code>.
The handlers which were established around the <var>expression</var> are no longer active at the time of this call.
</p>
<span id="Examples_003a-126"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun assess-condition (condition)
   (handler-case (signal condition)
     (warning () &quot;Lots of smoke, but no fire.&quot;)
     ((or arithmetic-error control-error cell-error stream-error)
        (condition)
       (format nil &quot;~S looks especially bad.&quot; condition))
     (serious-condition (condition)
       (format nil &quot;~S looks serious.&quot; condition))
     (condition () &quot;Hardly worth mentioning.&quot;)))
<span class="roman">→</span> ASSESS-CONDITION
 (assess-condition (make-condition 'stream-error :stream *terminal-io*))
<span class="roman">→</span> &quot;#&lt;STREAM-ERROR 12352256&gt; looks especially bad.&quot;
 (define-condition random-condition (condition) () 
   (:report (lambda (condition stream)
              (declare (ignore condition))
              (princ &quot;Yow&quot; stream))))
<span class="roman">→</span> RANDOM-CONDITION
 (assess-condition (make-condition 'random-condition))
<span class="roman">→</span> &quot;Hardly worth mentioning.&quot;
</pre></div>


<span id="See-Also_003a-172"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#handler_002dbind">handler-bind</a>,
<a href="#ignore_002derrors">ignore-errors</a>,
<a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>
<span id="Notes_003a-105"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (handler-case form
   (<i>type1</i> (<i>var1</i>) . <i>body1</i>)
   (<i>type2</i> (<i>var2</i>) . <i>body2</i>) ...)
</pre></div>

<p>is approximately equivalent to:
</p>
<div class="lisp">
<pre class="lisp"> (block #1=#:g0001
   (let ((#2=#:g0002 nil))
     (tagbody
       (handler-bind ((<i>type1</i> #'(lambda (temp)
                                       (setq #1# temp)
                                       (go #3=#:g0003)))
                      (<i>type2</i> #'(lambda (temp)
                                       (setq #2# temp)
                                       (go #4=#:g0004))) ...)
       (return-from #1# form))
         #3# (return-from #1# (let ((<i>var1</i> #2#)) . <i>body1</i>))
         #4# (return-from #1# (let ((<i>var2</i> #2#)) . <i>body2</i>)) ...)))
</pre></div>


<div class="lisp">
<pre class="lisp"> (handler-case form
   (<i>type1</i> <i>(var1)</i> . <i>body1</i>)
   ...
   (:no-error (<i>varN-1</i> <i>varN-2</i> ...) . <i>bodyN</i>))
</pre></div>

<p>is approximately equivalent to:
</p>
<div class="lisp">
<pre class="lisp">

 (block #1=#:error-return
  (multiple-value-call #'(lambda (<i>varN-1</i> <i>varN-2</i> ...) . <i>bodyN</i>)
     (block #2=#:normal-return
       (return-from #1#
         (handler-case (return-from #2# form)
           (<i>type1</i> (<i>var1</i>) . <i>body1</i>) ...)))))
</pre></div>




<hr>
<span id="ignore_002derrors"></span><div class="header">
<p>
Next: <a href="#define_002dcondition" accesskey="n" rel="next">define-condition</a>, Previous: <a href="#handler_002dcase" accesskey="p" rel="prev">handler-case</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">ignore-errors</h4>
<span id="ignore_002derrors-_0028Macro_0029"></span><h3 class="heading">ignore-errors (Macro)</h3>
<span id="index-ignore_002derrors-2"></span>
<span id="index-ignore_002derrors"></span>


<span id="Syntax_003a-156"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-ignore_002derrors-1">Macro: <strong>ignore-errors</strong> <em><tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-145"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;In the normal situation,
the <i>values</i> of the <i>forms</i> are returned;
in the exceptional situation,
two values are returned: <code>nil</code>&nbsp;<!-- /@w -->and the <i>condition</i>.
</p>
<span id="Description_003a-198"></span><h4 class="subsubheading">Description:</h4>

<p><code>ignore-errors</code> is used to prevent <i>conditions</i> of <i>type</i> <code>error</code>
from causing entry into the debugger.
</p>
<p>Specifically, <code>ignore-errors</code> <i>executes</i> <i>forms</i>
in a <i>dynamic environment</i> where a <i>handler</i> for 
<i>conditions</i> of <i>type</i> <code>error</code> has been established;
if invoked, it <i>handles</i> such <i>conditions</i> by
returning two <i>values</i>, <code>nil</code>&nbsp;<!-- /@w -->and the <i>condition</i> that was <i>signaled</i>,
from the <code>ignore-errors</code> <i>form</i>.
</p>
<p>If a <i>normal return</i> from the <i>forms</i> occurs, 
any <i>values</i> returned are returned by <code>ignore-errors</code>.
</p>
<span id="Examples_003a-127"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun load-init-file (program)
   (let ((win nil))
     (ignore-errors ;if this fails, don't enter debugger
       (load (merge-pathnames (make-pathname :name program :type :lisp)
                              (user-homedir-pathname)))
       (setq win t))
     (unless win (format t &quot;~&amp;Init file failed to load.~%&quot;))
     win))
 
 (load-init-file &quot;no-such-program&quot;)
▷ Init file failed to load.
NIL
</pre></div>


<span id="See-Also_003a-173"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#handler_002dcase">handler-case</a>, <a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>
<span id="Notes_003a-106"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (ignore-errors . <i>forms</i>)
</pre></div>


<p>is equivalent to:
</p>
<div class="lisp">
<pre class="lisp"> (handler-case (progn . <i>forms</i>)
   (error (condition) (values nil condition)))
</pre></div>


<p>Because the second return value is a <i>condition</i>
in the exceptional case, it is common (but not required) to arrange
for the second return value in the normal case to be missing or <code>nil</code>&nbsp;<!-- /@w -->so
that the two situations can be distinguished.
</p>

<hr>
<span id="define_002dcondition"></span><div class="header">
<p>
Next: <a href="#make_002dcondition" accesskey="n" rel="next">make-condition</a>, Previous: <a href="#ignore_002derrors" accesskey="p" rel="prev">ignore-errors</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">define-condition</h4>
<span id="define_002dcondition-_0028Macro_0029"></span><h3 class="heading">define-condition (Macro)</h3>
<span id="index-define_002dcondition-2"></span>
<span id="index-define_002dcondition"></span>





<span id="Syntax_003a-157"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-define_002dcondition-1">Macro: <strong>define-condition</strong> <em>name <tt>(</tt><tt>{</tt>parent-type<tt>}</tt>*<tt>)</tt> <tt>(</tt><tt>{</tt><tt>↓</tt>slot-spec<tt>}</tt>*<tt>)</tt> <tt>{</tt>option<tt>}</tt>* <span class="roman">→</span> name</em></dt>
</dl>

<dl compact="compact">
<dt><var>slot-spec</var>::=</dt>
<dd><p>slot-name | <tt>(</tt>slot-name <tt>↓</tt>slot-option<tt>)</tt>
</p></dd>
</dl>
<dl compact="compact">
<dt><var>slot-option</var>::=</dt>
<dd><p>〚 <tt>{</tt><tt>:reader</tt> <i>symbol</i><tt>}</tt>* | <br> <tt>{</tt><tt>:writer</tt> <tt>↓</tt>function-name<tt>}</tt>* | <br> <tt>{</tt><tt>:accessor</tt> <i>symbol</i><tt>}</tt>* | <br> <tt>{</tt><tt>:allocation</tt> <tt>↓</tt>allocation-type<tt>}</tt> | <br> <tt>{</tt><tt>:initarg</tt> <i>symbol</i><tt>}</tt>* | <br> <tt>{</tt><tt>:initform</tt> <i>form</i><tt>}</tt> | <br> <tt>{</tt><tt>:type</tt> <var>type-specifier</var><tt>}</tt> 〛
</p></dd>
</dl>
<dl compact="compact">
<dt><var>option</var>::=</dt>
<dd><p>〚 <tt>(</tt><tt>:default-initargs</tt> <code>.</code> <var>initarg-list</var><tt>)</tt> | <br> <tt>(</tt><tt>:documentation</tt> <i>string</i><tt>)</tt> | <br> <tt>(</tt><tt>:report</tt> <i>report-name</i><tt>)</tt> 〛
</p></dd>
</dl>
<dl compact="compact">
<dt><var>function-name</var>::=</dt>
<dd><p><tt>{</tt><i>symbol</i> | <code>(setf <i>symbol</i>)</code><tt>}</tt>
</p></dd>
</dl>
<dl compact="compact">
<dt><var>allocation-type</var>::=</dt>
<dd><p><tt>:instance</tt> | <tt>:class</tt>
</p></dd>
</dl>
<dl compact="compact">
<dt><var>report-name</var>::=</dt>
<dd><p><i>string</i> | <i>symbol</i> | <i>lambda expression</i>
</p></dd>
</dl>

<span id="Arguments-and-Values_003a-146"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>name</var>&mdash;a <i>symbol</i>.
</p>
<p><var>parent-type</var>&mdash;a <i>symbol</i> naming a <i>condition</i> <i>type</i>.
If no <var>parent-types</var> are supplied,
the <var>parent-types</var> default to <code>(condition)</code>.
</p>
<p><var>default-initargs</var>&mdash;a <i>list</i> of <i>keyword/value pairs</i>.
</p>



<p><var>Slot-spec</var>&mdash;the <i>name</i> of a <i>slot</i> or a <i>list</i>
consisting of the <var>slot-name</var> followed by zero or more <var>slot-options</var>.
</p>
<p><var>Slot-name</var>&mdash;a slot name (a <i>symbol</i>), 
the <i>list</i> of a slot name, or the 
<i>list</i> of slot name/slot form pairs.
</p>
<p><var>Option</var>&mdash;Any of the following:
</p>

<dl compact="compact">
<dt><tt>:reader</tt></dt>
<dd>

<p><tt>:reader</tt> can be supplied more than once for a given <i>slot</i> 
and cannot be <code>nil</code>.
</p>
</dd>
<dt><tt>:writer</tt></dt>
<dd>

<p><tt>:writer</tt> can be supplied more than once for a given <i>slot</i>
and must name a <i>generic function</i>.
</p>
</dd>
<dt><tt>:accessor</tt></dt>
<dd>

<p><tt>:accessor</tt> can be supplied more than once for a given <i>slot</i>
and cannot be <code>nil</code>.
</p>
</dd>
<dt><tt>:allocation</tt></dt>
<dd>

<p><tt>:allocation</tt> can be supplied once at most for a given <i>slot</i>.
The default if <tt>:allocation</tt> is not supplied is <tt>:instance</tt>.
</p>
</dd>
<dt><tt>:initarg</tt></dt>
<dd> 

<p><tt>:initarg</tt> can be supplied more than once for a given <i>slot</i>.  
</p>
</dd>
<dt><tt>:initform</tt></dt>
<dd>  

<p><tt>:initform</tt> can be supplied once at most for a given <i>slot</i>.  
</p>
</dd>
<dt><tt>:type</tt></dt>
<dd> 

<p><tt>:type</tt> can be supplied once at most for a given <i>slot</i>. 
</p>
</dd>
<dt><tt>:documentation</tt></dt>
<dd> 

<p><tt>:documentation</tt> can be supplied once at most for a given <i>slot</i>. 
</p>
</dd>
<dt><tt>:report</tt></dt>
<dd>

<p><tt>:report</tt> can be supplied once at most.
</p></dd>
</dl>


<span id="Description_003a-199"></span><h4 class="subsubheading">Description:</h4>

<p><code>define-condition</code> defines a new condition type called <var>name</var>, 
which is a <i>subtype</i> of 
the <i>type</i> or <i>types</i> named by
<var>parent-type</var>.  
Each <var>parent-type</var> argument specifies a direct <i>supertype</i>
of the new <i>condition</i>. The new <i>condition</i>
inherits <i>slots</i> and <i>methods</i> from each of its direct
<i>supertypes</i>, and so on.
</p>
<p>If a slot name/slot form pair is supplied,
the slot form is a <i>form</i> that 
can be evaluated by <code>make-condition</code> to
produce a default value when an explicit value is not provided.  If no 
slot form
is supplied, the contents of the <var>slot</var> 
is initialized in an 
<i>implementation-dependent</i> way.  
</p>
<p>If the <i>type</i> being defined and some other 
<i>type</i> from which it inherits
have a slot by the same name, only one slot is allocated in the
<i>condition</i>, 
but the supplied slot form overrides any slot form
that might otherwise have been inherited from a <var>parent-type</var>.  If no 
slot form is supplied, the inherited slot form (if any) is still visible.
</p>
<p>Accessors are created according to the same rules as used by 
<code>defclass</code>.
</p>
<p>A description of <var>slot-options</var> follows:
</p>


<dl compact="compact">
<dt><tt>:reader</tt></dt>
<dd>

<p>The <tt>:reader</tt> slot option specifies that an <i>unqualified method</i> is
to be defined on the <i>generic function</i> named by the argument
to <tt>:reader</tt> to read the value of the given <i>slot</i>.
</p>

</dd>
<dt>&bull;</dt>
<dd><p>The <tt>:initform</tt> slot option is used to provide a default
initial value form to be used in the initialization of the <i>slot</i>.  This
<i>form</i> is evaluated every time it is used to initialize the 
<i>slot</i>.  The
<i>lexical environment</i> 
in which this <i>form</i> is evaluated is the lexical
<i>environment</i> in which the <code>define-condition</code> 
form was evaluated.
Note that the <i>lexical environment</i> refers both to variables and to
<i>functions</i>.  
For <i>local slots</i>, the <i>dynamic environment</i> is the dynamic
<i>environment</i> 
in which <code>make-condition</code> was called; for 
<i>shared slots</i>, the <i>dynamic environment</i> 
is the <i>dynamic environment</i> in which the
<code>define-condition</code> form was evaluated.  
</p>

<p>No implementation is permitted to extend the syntax of <code>define-condition</code>
to allow <code>(<var>slot-name</var> <var>form</var>)</code> as an abbreviation for
<code>(<var>slot-name</var> :initform <var>form</var>)</code>.
</p>
</dd>
<dt><tt>:initarg</tt></dt>
<dd>

<p>The <tt>:initarg</tt> slot option declares an initialization
argument named by its <i>symbol</i> argument
and specifies that this
initialization argument initializes the given <i>slot</i>.  If the
initialization argument has a value in the call to 
<code>initialize-instance</code>, the value is stored into the given <i>slot</i>,
and the slot&rsquo;s <tt>:initform</tt> slot option, if any, is not
evaluated.  If none of the initialization arguments specified for a
given <i>slot</i> has a value, the <i>slot</i> is initialized according to the
<tt>:initform</tt> slot option, if specified.  
</p>
</dd>
<dt><tt>:type</tt></dt>
<dd>

<p>The <tt>:type</tt> slot option specifies that the contents of the
<i>slot</i> is always of the specified <i>type</i>.  It effectively
declares the result type of the reader generic function when applied
to an <i>object</i> of this <i>condition</i> type.  
The consequences of attempting to store in a
<i>slot</i> a value that 
does not satisfy the type of the <i>slot</i> is undefined.
</p>
</dd>
<dt><tt>:default-initargs</tt></dt>
<dd>



<p>This option is treated the same as it would be <code>defclass</code>.
</p>
</dd>
<dt><tt>:documentation</tt></dt>
<dd>



<p>The <tt>:documentation</tt> slot option provides a <i>documentation string</i>
for the <i>slot</i>.
</p>
</dd>
<dt><tt>:report</tt></dt>
<dd>



<p><i>Condition</i> reporting is mediated through the <code>print-object</code>
method for the <i>condition</i> type in question, with <code>*print-escape*</code>
always being <code>nil</code>. Specifying <code>(:report <var>report-name</var>)</code> 
in the definition of a condition type <code>C</code> is equivalent to:
</p>
<div class="lisp">
<pre class="lisp"> (defmethod print-object ((x c) stream)
   (if *print-escape* (call-next-method) (<var>report-name</var> x stream)))
</pre></div>


<p>If the value supplied by the argument to <tt>:report</tt> (<var>report-name</var>)
is a <i>symbol</i> or a <i>lambda expression</i>, 
it must be acceptable to 
<code>function</code>. <code>(function <var>report-name</var>)</code> 
is evaluated
in the current <i>lexical environment</i>.  
It should return a <i>function</i> 
of two
arguments, a <i>condition</i> and a <i>stream</i>, 
that prints on the <i>stream</i> a
description of the <i>condition</i>. 
This <i>function</i> is called whenever the
<i>condition</i> is printed while <code>*print-escape*</code> is <code>nil</code>.
</p>
<p>If <var>report-name</var> is a <i>string</i>, it is a shorthand for 
</p>
<div class="lisp">
<pre class="lisp"> (lambda (condition stream)
   (declare (ignore condition))
   (write-string <var>report-name</var> stream))
</pre></div>


<p>This option is processed after the new <i>condition</i> type has been defined,
so use of the <var>slot</var> accessors within the <tt>:report</tt> function is permitted.
If this option is not supplied, information about how to report this
type of <i>condition</i> is inherited from the <var>parent-type</var>.
</p></dd>
</dl>


<p>The consequences are unspecifed if an attempt is made to <i>read</i> a 
<var>slot</var> that has not been explicitly initialized and that has not 
been given a default value.
</p>
<p>The consequences are unspecified if an attempt is made to assign the
<var>slots</var> by using <code>setf</code>.
</p>
<p>If a <code>define-condition</code> <i>form</i> appears as a <i>top level form</i>,
the <i>compiler</i> must make <var>name</var> recognizable as a valid <i>type</i> name,
and it must be possible to reference the <i>condition</i> <i>type</i> as the
<var>parent-type</var> of another <i>condition</i> <i>type</i> in a subsequent
<code>define-condition</code> <i>form</i> in the <i>file</i> being compiled.
</p>
<span id="Examples_003a-128"></span><h4 class="subsubheading">Examples:</h4>

<p>The following form defines a condition of <i>type</i> 
<code>peg/hole-mismatch</code> which inherits from a condition type
called <code>blocks-world-error</code>:
</p>
<div class="lisp">
<pre class="lisp">(define-condition peg/hole-mismatch 
                  (blocks-world-error)
                  ((peg-shape  :initarg :peg-shape
                               :reader peg/hole-mismatch-peg-shape)
                   (hole-shape :initarg :hole-shape
                               :reader peg/hole-mismatch-hole-shape))
  (:report (lambda (condition stream)
             (format stream &quot;A ~A peg cannot go in a ~A hole.&quot;
                     (peg/hole-mismatch-peg-shape  condition)
                     (peg/hole-mismatch-hole-shape condition)))))
</pre></div>


<p>The new type has slots <code>peg-shape</code> and <code>hole-shape</code>, 
so <code>make-condition</code> accepts <code>:peg-shape</code> and <code>:hole-shape</code> keywords.  
The <i>readers</i> <code>peg/hole-mismatch-peg-shape</code> and <code>peg/hole-mismatch-hole-shape</code> 
apply to objects of this type, as illustrated in the <tt>:report</tt> information.
</p>
<p>The following form defines a <i>condition</i> <i>type</i> named <code>machine-error</code>
which inherits from <code>error</code>: 
</p>
<div class="lisp">
<pre class="lisp">(define-condition machine-error 
                  (error)
                  ((machine-name :initarg :machine-name
                                 :reader machine-error-machine-name))
  (:report (lambda (condition stream)
             (format stream &quot;There is a problem with ~A.&quot;
                     (machine-error-machine-name condition)))))
</pre></div>


<p>Building on this definition, a new error condition can be defined which
is a subtype of <code>machine-error</code> for use when machines are not available: 
</p>
<div class="lisp">
<pre class="lisp">(define-condition machine-not-available-error (machine-error) ()
  (:report (lambda (condition stream)
             (format stream &quot;The machine ~A is not available.&quot;
                     (machine-error-machine-name condition)))))
</pre></div>


<p>This defines a still more specific condition, built upon 
<code>machine-not-available-error</code>, which provides a slot initialization form
for <code>machine-name</code> but which does not provide any new slots or report
information.  It just gives the <code>machine-name</code> slot a default initialization:
</p>
<div class="lisp">
<pre class="lisp">(define-condition my-favorite-machine-not-available-error
                  (machine-not-available-error)
  ((machine-name :initform &quot;mc.lcs.mit.edu&quot;)))
</pre></div>


<p>Note that since no <tt>:report</tt> clause was given, the information 
inherited from <code>machine-not-available-error</code> is used to
report this type of condition.
</p>
<div class="lisp">
<pre class="lisp"> (define-condition ate-too-much (error) 
     ((person :initarg :person :reader ate-too-much-person)
      (weight :initarg :weight :reader ate-too-much-weight)
      (kind-of-food :initarg :kind-of-food
                    :reader :ate-too-much-kind-of-food)))
<span class="roman">→</span> ATE-TOO-MUCH
 (define-condition ate-too-much-ice-cream (ate-too-much)
   ((kind-of-food :initform 'ice-cream)
    (flavor       :initarg :flavor
                  :reader ate-too-much-ice-cream-flavor
                  :initform 'vanilla ))
   (:report (lambda (condition stream)
              (format stream &quot;~A ate too much ~A ice-cream&quot;
                      (ate-too-much-person condition)
                      (ate-too-much-ice-cream-flavor condition)))))
<span class="roman">→</span> ATE-TOO-MUCH-ICE-CREAM
 (make-condition 'ate-too-much-ice-cream
                 :person 'fred
                 :weight 300
                 :flavor 'chocolate)
<span class="roman">→</span> #&lt;ATE-TOO-MUCH-ICE-CREAM 32236101&gt;
 (format t &quot;~A&quot; *)
▷ FRED ate too much CHOCOLATE ice-cream
<span class="roman">→</span> NIL
</pre></div>


<span id="See-Also_003a-174"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dcondition">make-condition</a>, <a href="Objects.html#defclass">defclass</a>, <a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>


<hr>
<span id="make_002dcondition"></span><div class="header">
<p>
Next: <a href="#restart" accesskey="n" rel="next">restart</a>, Previous: <a href="#define_002dcondition" accesskey="p" rel="prev">define-condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-condition</h4>
<span id="make_002dcondition-_0028Function_0029"></span><h3 class="heading">make-condition (Function)</h3>
<span id="index-make_002dcondition-2"></span>
<span id="index-make_002dcondition"></span>


<span id="Syntax_003a-158"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dcondition-1">Function: <strong>make-condition</strong> <em>type <tt>&amp;rest</tt> slot-initializations <span class="roman">→</span> condition</em></dt>
</dl>

<span id="Arguments-and-Values_003a-147"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>type</var>&mdash;a <i>type specifier</i> (for a <i>subtype</i> of <code>condition</code>).
</p>
<p><var>slot-initializations</var>&mdash;an <i>initialization argument list</i>.
</p>
<p><var>condition</var>&mdash;a <i>condition</i>.
</p>
<span id="Description_003a-200"></span><h4 class="subsubheading">Description:</h4>

<p>Constructs and returns a <i>condition</i> of type <var>type</var> 
using <var>slot-initializations</var> for the initial values of the slots.  
The newly created <i>condition</i> is returned.
</p>
<span id="Examples_003a-129"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (defvar *oops-count* 0)

 (setq a (make-condition 'simple-error
                         :format-control &quot;This is your ~:R error.&quot;
                         :format-arguments (list (incf *oops-count*))))
<span class="roman">→</span> #&lt;SIMPLE-ERROR 32245104&gt;
 
 (format t &quot;~&amp;~A~%&quot; a)
▷ This is your first error.
<span class="roman">→</span> NIL
 
 (error a)
▷ Error: This is your first error.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return to Lisp Toplevel.
▷ Debug&gt; 
</pre></div>


<span id="Affected-By_003a-29"></span><h4 class="subsubheading">Affected By:</h4>

<p>The set of defined <i>condition</i> <i>types</i>.
</p>
<span id="See-Also_003a-175"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#define_002dcondition">define-condition</a>, <a href="#Condition-System-Concepts">Section 9.1 (Condition System Concepts)</a>
</p>

<hr>
<span id="restart"></span><div class="header">
<p>
Next: <a href="#compute_002drestarts" accesskey="n" rel="next">compute-restarts</a>, Previous: <a href="#make_002dcondition" accesskey="p" rel="prev">make-condition</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">restart</h4>
<span id="restart-_0028System-Class_0029"></span><h3 class="heading">restart (System Class)</h3>
<span id="index-restart-1"></span>
<span id="index-restart"></span>


<span id="Class-Precedence-List_003a-30"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>restart</code>,
<code>t</code>
</p>
<span id="Description_003a-201"></span><h4 class="subsubheading">Description:</h4>

<p>An <i>object</i> of <i>type</i> <code>restart</code> represents a <i>function</i> that can be
called to perform some form of recovery action, usually a transfer of control 
to an outer point in the running program.
</p>
<p>An <i>implementation</i> is free to implement a <i>restart</i> in whatever 
manner is most convenient; a <i>restart</i> has only <i>dynamic extent</i>
relative to the scope of the binding <i>form</i> which <i>establishes</i> it.
</p>

<hr>
<span id="compute_002drestarts"></span><div class="header">
<p>
Next: <a href="#find_002drestart" accesskey="n" rel="next">find-restart</a>, Previous: <a href="#restart" accesskey="p" rel="prev">restart</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">compute-restarts</h4>
<span id="compute_002drestarts-_0028Function_0029"></span><h3 class="heading">compute-restarts (Function)</h3>
<span id="index-compute_002drestarts-2"></span>
<span id="index-compute_002drestarts"></span>


<span id="Syntax_003a-159"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-compute_002drestarts-1">Function: <strong>compute-restarts</strong> <em><tt>&amp;optional</tt> condition <span class="roman">→</span> restarts</em></dt>
</dl>

<span id="Arguments-and-Values_003a-148"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition</var>&mdash;a <i>condition</i> <i>object</i>, or <code>nil</code>.
</p>
<p><var>restarts</var>&mdash;a <i>list</i> of <i>restarts</i>.
</p>
<span id="Description_003a-202"></span><h4 class="subsubheading">Description:</h4>

<p><code>compute-restarts</code> uses the dynamic state of the program to compute 
a <i>list</i> of the <i>restarts</i> which are currently active.
</p>
<p>The resulting <i>list</i> is ordered so that the innermost
(more-recently established) restarts are nearer the head of the <i>list</i>.
</p>
<p>When <var>condition</var> is <i>non-nil</i>, only those <i>restarts</i>
are considered that are either explicitly associated with that <var>condition</var>,
or not associated with any <i>condition</i>; that is, the excluded <i>restarts</i> 
are those that are associated with a non-empty set of <i>conditions</i> of 
which the given <var>condition</var> is not an <i>element</i>.
If <var>condition</var> is <code>nil</code>, all <i>restarts</i> are considered.
</p>
<p><code>compute-restarts</code> returns all 
<i>applicable restarts</i>, 
including anonymous ones, even if some of them have the same name as 
others and would therefore not be found by <code>find-restart</code> 
when given a <i>symbol</i> argument.
</p>
<p>Implementations are permitted, but not required, to return <i>distinct</i>
<i>lists</i> from repeated calls to <code>compute-restarts</code> while in
the same dynamic environment.  
The consequences are undefined if the <i>list</i> returned by
<code>compute-restarts</code> is every modified.
</p>
<span id="Examples_003a-130"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> ;; One possible way in which an interactive debugger might present
 ;; restarts to the user.
 (defun invoke-a-restart ()
   (let ((restarts (compute-restarts)))
     (do ((i 0 (+ i 1)) (r restarts (cdr r))) ((null r))
       (format t &quot;~&amp;~D: ~A~%&quot; i (car r)))
     (let ((n nil) (k (length restarts)))
       (loop (when (and (typep n 'integer) (&gt;= n 0) (&lt; n k))
               (return t))
             (format t &quot;~&amp;Option: &quot;)
             (setq n (read))
             (fresh-line))
       (invoke-restart-interactively (nth n restarts)))))

 (restart-case (invoke-a-restart)
   (one () 1)
   (two () 2)
   (nil () :report &quot;Who knows?&quot; 'anonymous)
   (one () 'I)
   (two () 'II))
▷ 0: ONE
▷ 1: TWO
▷ 2: Who knows?
▷ 3: ONE
▷ 4: TWO
▷ 5: Return to Lisp Toplevel.
▷ Option: <kbd>4</kbd>
<span class="roman">→</span> II
 
 ;; Note that in addition to user-defined restart points, COMPUTE-RESTARTS
 ;; also returns information about any system-supplied restarts, such as
 ;; the &quot;Return to Lisp Toplevel&quot; restart offered above.
 
</pre></div>



<span id="Affected-By_003a-30"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing restarts.
</p>
<span id="See-Also_003a-176"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#find_002drestart">find-restart</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#restart_002dbind">restart-bind</a>
</p>

<hr>
<span id="find_002drestart"></span><div class="header">
<p>
Next: <a href="#invoke_002drestart" accesskey="n" rel="next">invoke-restart</a>, Previous: <a href="#compute_002drestarts" accesskey="p" rel="prev">compute-restarts</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">find-restart</h4>
<span id="find_002drestart-_0028Function_0029"></span><h3 class="heading">find-restart (Function)</h3>
<span id="index-find_002drestart-2"></span>
<span id="index-find_002drestart"></span>


<span id="Syntax_003a-160"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-find_002drestart-1">Function: <strong>find-restart</strong> <em>identifier <tt>&amp;optional</tt> condition <span class="roman">→</span> restart</em></dt>
</dl>

<span id="Arguments-and-Values_003a-149"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>identifier</var>&mdash;a <i>non-nil</i> <i>symbol</i>, or a <i>restart</i>.
</p>
<p><var>condition</var>&mdash;a <i>condition</i> <i>object</i>, or <code>nil</code>.
</p>
<p><var>restart</var>&mdash;a <i>restart</i> or <code>nil</code>.
</p>
<span id="Description_003a-203"></span><h4 class="subsubheading">Description:</h4>

<p><code>find-restart</code> searches for a particular <i>restart</i> in the 
current <i>dynamic environment</i>.
</p>
<p>When <var>condition</var> is <i>non-nil</i>, only those <i>restarts</i>
are considered that are either explicitly associated with that <var>condition</var>,
or not associated with any <i>condition</i>; that is, the excluded <i>restarts</i> 
are those that are associated with a non-empty set of <i>conditions</i> of 
which the given <var>condition</var> is not an <i>element</i>.
If <var>condition</var> is <code>nil</code>, all <i>restarts</i> are considered.
</p>
<p>If <var>identifier</var> is a <i>symbol</i>, then the innermost 
(most recently established) <i>applicable restart</i> with that <i>name</i> is returned.
<code>nil</code>&nbsp;<!-- /@w -->is returned if no such restart is found.
</p>
<p>If <var>identifier</var> is a currently active restart, then it is returned.
Otherwise, <code>nil</code>&nbsp;<!-- /@w -->is returned.
</p>
<span id="Examples_003a-131"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (restart-case
     (let ((r (find-restart 'my-restart)))
       (format t &quot;~S is named ~S&quot; r (restart-name r)))
   (my-restart () nil))
▷ #&lt;RESTART 32307325&gt; is named MY-RESTART
<span class="roman">→</span> NIL
 (find-restart 'my-restart)
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-31"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing restarts.
</p>
<p><code>restart-case</code>, <code>restart-bind</code>, <code>with-condition-restarts</code>.
</p>
<span id="See-Also_003a-177"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#compute_002drestarts">compute-restarts</a>
</p>
<span id="Notes_003a-107"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (find-restart <var>identifier</var>)
 ≡ (find <var>identifier</var> (compute-restarts) :key :restart-name)
</pre></div>


<p>Although anonymous restarts have a name of <code>nil</code>,
the consequences are unspecified if <code>nil</code>&nbsp;<!-- /@w -->is given as an <var>identifier</var>.  
Occasionally, programmers lament that <code>nil</code>&nbsp;<!-- /@w -->is not permissible as an
<var>identifier</var> argument.  In most such cases, <code>compute-restarts</code>
can probably be used to simulate the desired effect.
</p>

<hr>
<span id="invoke_002drestart"></span><div class="header">
<p>
Next: <a href="#invoke_002drestart_002dinteractively" accesskey="n" rel="next">invoke-restart-interactively</a>, Previous: <a href="#find_002drestart" accesskey="p" rel="prev">find-restart</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">invoke-restart</h4>
<span id="invoke_002drestart-_0028Function_0029"></span><h3 class="heading">invoke-restart (Function)</h3>
<span id="index-invoke_002drestart-2"></span>
<span id="index-invoke_002drestart"></span>


<span id="Syntax_003a-161"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-invoke_002drestart-1">Function: <strong>invoke-restart</strong> <em>restart <tt>&amp;rest</tt> arguments <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-150"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>restart</var>&mdash;a <i>restart designator</i>.
</p>
<p><var>argument</var>&mdash;an <i>object</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <i>function</i>
associated with <var>restart</var>, if that <i>function</i> returns.
</p>
<span id="Description_003a-204"></span><h4 class="subsubheading">Description:</h4>

<p>Calls the <i>function</i> associated with <var>restart</var>,
passing <var>arguments</var> to it.  
<var>Restart</var> must be valid in the current <i>dynamic environment</i>.  
</p>
<span id="Examples_003a-132"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (defun add3 (x) (check-type x number) (+ x 3))
 
 (foo 'seven)
▷ Error: The value SEVEN was not of type NUMBER.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a different value to use.
▷  2: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>(invoke-restart 'store-value 7)</kbd>
<span class="roman">→</span> 10
</pre></div>


<span id="Side-Effects_003a-16"></span><h4 class="subsubheading">Side Effects:</h4>

<p>A non-local transfer of control might be done by the restart.
</p>
<span id="Affected-By_003a-32"></span><h4 class="subsubheading">Affected By:</h4>

<p>Existing restarts.
</p>
<span id="Exceptional-Situations_003a-47"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>restart</var> is not valid, an error of <i>type</i> <code>control-error</code> is signaled.
</p>
<span id="See-Also_003a-178"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#find_002drestart">find-restart</a>,
<a href="#restart_002dbind">restart-bind</a>,
<a href="#restart_002dcase">restart-case</a>,
<a href="#invoke_002drestart_002dinteractively">invoke-restart-interactively</a>
</p>
<span id="Notes_003a-108"></span><h4 class="subsubheading">Notes:</h4>

<p>The most common use for <code>invoke-restart</code> is in a <i>handler</i>.
It might be used explicitly, or implicitly through <code>invoke-restart-interactively</code>
or a <i>restart function</i>.
</p>
<p><i>Restart functions</i> call <code>invoke-restart</code>, not vice versa.  That is,
<i>invoke-restart</i> provides primitive functionality, and <i>restart functions</i>
are non-essential &ldquo;syntactic sugar.&rdquo;
</p>

<hr>
<span id="invoke_002drestart_002dinteractively"></span><div class="header">
<p>
Next: <a href="#restart_002dbind" accesskey="n" rel="next">restart-bind</a>, Previous: <a href="#invoke_002drestart" accesskey="p" rel="prev">invoke-restart</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">invoke-restart-interactively</h4>
<span id="invoke_002drestart_002dinteractively-_0028Function_0029"></span><h3 class="heading">invoke-restart-interactively (Function)</h3>
<span id="index-invoke_002drestart_002dinteractively-2"></span>
<span id="index-invoke_002drestart_002dinteractively"></span>


<span id="Syntax_003a-162"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-invoke_002drestart_002dinteractively-1">Function: <strong>invoke-restart-interactively</strong> <em>restart <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-151"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>restart</var>&mdash;a <i>restart designator</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <i>function</i> 
associated with <var>restart</var>, if that <i>function</i> returns.
</p>
<span id="Description_003a-205"></span><h4 class="subsubheading">Description:</h4>

<p><code>invoke-restart-interactively</code> calls the <i>function</i> associated
with <var>restart</var>, prompting for any necessary arguments. 
If <var>restart</var> is a name, it must be valid in the current <i>dynamic environment</i>.  
</p>
<p><code>invoke-restart-interactively</code> 
prompts for arguments by executing
the code provided in the <tt>:interactive</tt> keyword to 
<code>restart-case</code> or 
<tt>:interactive-function</tt> keyword to <code>restart-bind</code>.
</p>
<p>If no such options have been supplied in the corresponding
<code>restart-bind</code> or <code>restart-case</code>, 
then the consequences are undefined if the <var>restart</var> takes
required arguments.  If the arguments are optional, an argument list of
<code>nil</code>&nbsp;<!-- /@w -->is used.
</p>
<p>Once the arguments have been determined, 
<code>invoke-restart-interactively</code>
executes the following:
</p>
<div class="lisp">
<pre class="lisp"> (apply #'invoke-restart <i>restart</i> <i>arguments</i>)
</pre></div>



<span id="Examples_003a-133"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun add3 (x) (check-type x number) (+ x 3))
 
 (add3 'seven)
▷ Error: The value SEVEN was not of type NUMBER.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a different value to use.
▷  2: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>(invoke-restart-interactively 'store-value)</kbd>
▷ Type a form to evaluate and use: <kbd>7</kbd>
<span class="roman">→</span> 10
</pre></div>


<span id="Side-Effects_003a-17"></span><h4 class="subsubheading">Side Effects:</h4>

<p>If prompting for arguments is necesary,
some typeout may occur (on <i>query I/O</i>).
</p>
<p>A non-local transfer of control might be done by the restart.
</p>
<span id="Affected-By_003a-33"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*query-io*</code>, active <i>restarts</i>
</p>
<span id="Exceptional-Situations_003a-48"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>restart</var> is not valid, an error of <i>type</i> <code>control-error</code>
is signaled.
</p>
<span id="See-Also_003a-179"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#find_002drestart">find-restart</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#restart_002dcase">restart-case</a>,
<a href="#restart_002dbind">restart-bind</a>
</p>
<span id="Notes_003a-109"></span><h4 class="subsubheading">Notes:</h4>

<p><code>invoke-restart-interactively</code> is used internally by the debugger
and may also be useful in implementing other portable, interactive debugging 
tools.
</p>

<hr>
<span id="restart_002dbind"></span><div class="header">
<p>
Next: <a href="#restart_002dcase" accesskey="n" rel="next">restart-case</a>, Previous: <a href="#invoke_002drestart_002dinteractively" accesskey="p" rel="prev">invoke-restart-interactively</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">restart-bind</h4>
<span id="restart_002dbind-_0028Macro_0029"></span><h3 class="heading">restart-bind (Macro)</h3>
<span id="index-restart_002dbind-2"></span>
<span id="index-restart_002dbind"></span>


<span id="Syntax_003a-163"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-restart_002dbind-1">Macro: <strong>restart-bind</strong> <em><tt>(</tt><tt>{</tt><tt>(</tt>name function <tt>{</tt><tt>↓</tt>key-val-pair<tt>}</tt>*<tt>)</tt><tt>}</tt><tt>)</tt> <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<dl compact="compact">
<dt><var>key-val-pair</var>::=</dt>
<dd><p><tt>:interactive-function</tt> interactive-function | <br> <tt>:report-function</tt> report-function | <br> <tt>:test-function</tt> test-function
</p></dd>
</dl>

<span id="Arguments-and-Values_003a-152"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>name</var>&mdash;a <i>symbol</i>; not evaluated.
</p>
<p><var>function</var>&mdash;a <i>form</i>; evaluated.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>interactive-function</var>&mdash;a <i>form</i>; evaluated.
</p>
<p><var>report-function</var>&mdash;a <i>form</i>; evaluated.
</p>
<p><var>test-function</var>&mdash;a <i>form</i>; evaluated.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <i>forms</i>.
</p>
<span id="Description_003a-206"></span><h4 class="subsubheading">Description:</h4>

<p><code>restart-bind</code> executes the body of <var>forms</var> 
in a <i>dynamic environment</i> where <i>restarts</i> with the given <var>names</var> are in effect.
</p>
<p>If a <var>name</var> is <code>nil</code>, it indicates an anonymous restart;
if a <var>name</var> is a <i>non-nil</i> <i>symbol</i>, it indicates a named restart.
</p>
<p>The <var>function</var>, <var>interactive-function</var>, and <var>report-function</var>
are unconditionally evaluated in the current lexical and dynamic environment
prior to evaluation of the body. Each of these <i>forms</i> must evaluate to
a <i>function</i>.
</p>
<p>If <code>invoke-restart</code> is done on that restart,
the <i>function</i> which resulted from evaluating <var>function</var> 
is called, in the <i>dynamic environment</i> of the <code>invoke-restart</code>,
with the <i>arguments</i> given to <code>invoke-restart</code>. 
The <i>function</i> may either perform a non-local transfer of control or may return normally.
</p>
<p>If the restart is invoked interactively from the debugger 
(using <code>invoke-restart-interactively</code>), 
the arguments are defaulted by calling the <i>function</i> 
which resulted from evaluating <var>interactive-function</var>.
That <i>function</i> may optionally prompt interactively on <i>query I/O</i>, 
and should return a <i>list</i> of arguments to be used by
<code>invoke-restart-interactively</code> when invoking the restart. 
</p>
<p>If a restart is invoked interactively but no <var>interactive-function</var> is used,
then an argument list of <code>nil</code>&nbsp;<!-- /@w -->is used. In that case, the <i>function</i>
must be compatible with an empty argument list.
</p>
<p>If the restart is presented interactively (<i>e.g.</i>, by the debugger),
the presentation is done by calling the <i>function</i> which resulted
from evaluating <var>report-function</var>.
This <i>function</i> must be a <i>function</i> of one argument, a <i>stream</i>. 
It is expected to print a description of the action that the restart takes
to that <i>stream</i>. 
This <i>function</i> is called any time the restart is printed 
while <code>*print-escape*</code> is <code>nil</code>.
</p>
<p>In the case of interactive invocation, 
the result is dependent on the value of <tt>:interactive-function</tt>
as follows.
</p>

<dl compact="compact">
<dt><tt>:interactive-function</tt></dt>
<dd>

<p><var>Value</var> is evaluated in the current lexical environment and
should return a <i>function</i> of no arguments which constructs a 
<i>list</i> of arguments to be used by <code>invoke-restart-interactively</code> 
when invoking this restart.  The <i>function</i> may prompt interactively
using <i>query I/O</i> if necessary.
</p>
</dd>
<dt><tt>:report-function</tt></dt>
<dd>

<p><var>Value</var> is evaluated in the current lexical environment and
should return a <i>function</i> of one argument, a <i>stream</i>, which
prints on the <i>stream</i> a summary of the action that this restart
takes.  This <i>function</i> is called whenever the restart is
reported (printed while <code>*print-escape*</code> is <code>nil</code>).
If no <tt>:report-function</tt> option is provided, the manner in which the
<i>restart</i> is reported is <i>implementation-dependent</i>.
</p>
</dd>
<dt><tt>:test-function</tt></dt>
<dd>

<p><var>Value</var> is evaluated in the current lexical environment and
should return a <i>function</i> of one argument, a <i>condition</i>, which
returns <i>true</i> if the restart is to be considered visible.
</p></dd>
</dl>


<span id="Affected-By_003a-34"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*query-io*</code>.
</p>
<span id="See-Also_003a-180"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#restart_002dcase">restart-case</a>, <a href="#with_002dsimple_002drestart">with-simple-restart</a>
</p>
<span id="Notes_003a-110"></span><h4 class="subsubheading">Notes:</h4>

<p><code>restart-bind</code> is primarily intended to be used to implement
<code>restart-case</code> and  might be useful in implementing other
macros. Programmers who are uncertain about whether to use <code>restart-case</code>
or <code>restart-bind</code> should prefer <code>restart-case</code> for the cases where
it is powerful enough, using <code>restart-bind</code> only in cases where its full
generality is really needed.
</p>

<hr>
<span id="restart_002dcase"></span><div class="header">
<p>
Next: <a href="#restart_002dname" accesskey="n" rel="next">restart-name</a>, Previous: <a href="#restart_002dbind" accesskey="p" rel="prev">restart-bind</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">restart-case</h4>
<span id="restart_002dcase-_0028Macro_0029"></span><h3 class="heading">restart-case (Macro)</h3>
<span id="index-restart_002dcase-2"></span>
<span id="index-restart_002dcase"></span>



<span id="Syntax_003a-164"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-restart_002dcase-1">Macro: <strong>restart-case</strong> <em>restartable-form <tt>{</tt><tt>↓</tt>clause<tt>}</tt> <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<dl compact="compact">
<dt><var>clause</var>::=</dt>
<dd><p><tt>(</tt> case-name lambda-list <br> &nbsp;<!-- /@w -->〚<tt>:interactive</tt> interactive-expression | <tt>:report</tt> report-expression | <tt>:test</tt> test-expression〛 <br> &nbsp;<!-- /@w --><tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>*<tt>)</tt>
</p></dd>
</dl>

<span id="Arguments-and-Values_003a-153"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>restartable-form</var>&mdash;a <i>form</i>.
</p>
<p><var>case-name</var>&mdash;a <i>symbol</i> or <code>nil</code>.
</p>
<p><var>lambda-list</var>&mdash;an <i>ordinary lambda list</i>.
</p>
<p><var>interactive-expression</var>&mdash;a <i>symbol</i> or a <i>lambda expression</i>.
</p>
<p><var>report-expression</var>&mdash;a <i>string</i>,
a <i>symbol</i>,
or a <i>lambda expression</i>.                                 
</p>
<p><var>test-expression</var>&mdash;a <i>symbol</i> or a <i>lambda expression</i>.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>form</var>&mdash;a <i>form</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> resulting from the <i>evaluation</i>
of <var>restartable-form</var>, 
or the <i>values</i> returned by the last <var>form</var>
executed in a chosen <i>clause</i>,
or <code>nil</code>.
</p>
<span id="Description_003a-207"></span><h4 class="subsubheading">Description:</h4>

<p><code>restart-case</code> evaluates <var>restartable-form</var> in a <i>dynamic environment</i>
where the clauses have special meanings as points to which control may be transferred.  
If <var>restartable-form</var> finishes executing and returns any values, 
all values returned are returned by <code>restart-case</code> and 
processing has completed. While <var>restartable-form</var> is executing, any code may
transfer control to one of the clauses (see <code>invoke-restart</code>).  
If a transfer
occurs, the forms in the body of that clause is evaluated and any values
returned by the last such form are returned by 
<code>restart-case</code>.
In this case, the 
dynamic state is unwound appropriately (so that the restarts established
around the <var>restartable-form</var> are no longer active) prior to execution of the
clause.
</p>
<p>If there are no <var>forms</var> 
in a selected clause, <code>restart-case</code> returns <code>nil</code>.
</p>
<p>If <var>case-name</var> is a <i>symbol</i>, it names this restart.
</p>
<p>It is possible to have more than one clause use the same <var>case-name</var>.
In this case, the first clause with that name is found by <code>find-restart</code>.  
The other clauses are accessible using <code>compute-restarts</code>.
</p>
<p>Each <var>arglist</var> is an <i>ordinary lambda list</i> to be bound during the 
execution of its corresponding <var>forms</var>.  These parameters are used 
by the <code>restart-case</code> clause to receive any necessary data from a call
to <code>invoke-restart</code>.
</p>
<p>By default, <code>invoke-restart-interactively</code> passes no arguments and
all arguments must be optional in order to accomodate interactive
restarting.  However, the arguments need not be optional if the
<tt>:interactive</tt> 
keyword has been used to inform <code>invoke-restart-interactively</code>
about how to compute a proper argument list.
</p>
<p><var>Keyword</var> options have the following meaning.
</p>
<dl compact="compact">
<dt><tt>:interactive</tt></dt>
<dd>

<p>The <var>value</var> supplied by <code>:interactive <var>value</var></code>
must be a suitable argument to <code>function</code>. 
<code>(function <var>value</var>)</code> is evaluated in the current lexical
environment.  It should return a <i>function</i> of no arguments which 
returns arguments to be used by 
<code>invoke-restart-interactively</code> when it is invoked.
<code>invoke-restart-interactively</code> 
is called in the dynamic
environment available prior to any restart attempt, and uses 
<i>query I/O</i> for user interaction.
</p>
<p>If a restart is invoked interactively but no <tt>:interactive</tt> option
was supplied, the argument list used in the invocation is the empty
list.
</p>
</dd>
<dt><tt>:report</tt></dt>
<dd>

<p>If the <var>value</var> supplied by <code>:report <var>value</var></code>
is a <i>lambda expression</i> or a <i>symbol</i>, it 
must be acceptable to <code>function</code>.
<code>(function <var>value</var>)</code> is evaluated in the current lexical
environment.  It should return a <i>function</i> of one
argument, a <i>stream</i>, which prints on the <i>stream</i> a 
description of the restart.  This <i>function</i> is called 
whenever the restart is printed while <code>*print-escape*</code> is <code>nil</code>.
</p>
<p>If <var>value</var> is a <i>string</i>, it is a shorthand for
</p>
<div class="lisp">
<pre class="lisp"> (lambda (stream) (write-string value stream))
</pre></div>


<p>If a named restart is asked to report but no report information has been
supplied, the name of the restart is used in generating default report text.
</p>
<p>When <code>*print-escape*</code> is <code>nil</code>, the 
printer uses the report information for
a restart.  For example, a debugger might announce the action of typing
a &ldquo;continue&rdquo; command by:
</p>
<div class="lisp">
<pre class="lisp"> (format t &quot;~&amp;~S -- ~A~%&quot; ':continue some-restart)
</pre></div>

<p>which might then display as something like:
</p>
<div class="lisp">
<pre class="lisp"> :CONTINUE -- Return to command level
</pre></div>


<p>The consequences are unspecified if an unnamed restart is specified
but no <tt>:report</tt> option is provided.
</p>
</dd>
<dt><tt>:test</tt></dt>
<dd>

<p>The <var>value</var> supplied by <code>:test <var>value</var></code>
must be a suitable argument to <code>function</code>. 
<code>(function <var>value</var>)</code> is evaluated in the current lexical
environment.  It should return a <i>function</i> of one <i>argument</i>, the
<i>condition</i>, that
returns <i>true</i> if the restart is to be considered visible.
</p>
<p>The default for this option is equivalent to <code>(lambda (c) (declare (ignore c)) t)</code>.
</p></dd>
</dl>


<p>If the <var>restartable-form</var> is a <i>list</i> whose <i>car</i> is any of
the <i>symbols</i> <code>signal</code>, <code>error</code>, <code>cerror</code>,
or <code>warn</code> (or is a <i>macro form</i> which macroexpands into such a
<i>list</i>), then <code>with-condition-restarts</code> is used implicitly
to associate the indicated <i>restarts</i> with the <i>condition</i> to be
signaled.
</p>
<span id="Examples_003a-134"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (restart-case
     (handler-bind ((error #'(lambda (c)
                             (declare (ignore condition))
                             (invoke-restart 'my-restart 7))))
       (error &quot;Foo.&quot;))
   (my-restart (&amp;optional v) v))
<span class="roman">→</span> 7

 (define-condition food-error (error) ())
<span class="roman">→</span> FOOD-ERROR
 (define-condition bad-tasting-sundae (food-error) 
   ((ice-cream :initarg :ice-cream :reader bad-tasting-sundae-ice-cream)
    (sauce :initarg :sauce :reader bad-tasting-sundae-sauce)
    (topping :initarg :topping :reader bad-tasting-sundae-topping))
   (:report (lambda (condition stream)
              (format stream &quot;Bad tasting sundae with ~S, ~S, and ~S&quot;
                      (bad-tasting-sundae-ice-cream condition)
                      (bad-tasting-sundae-sauce condition)
                      (bad-tasting-sundae-topping condition)))))
<span class="roman">→</span> BAD-TASTING-SUNDAE
 (defun all-start-with-same-letter (symbol1 symbol2 symbol3)
   (let ((first-letter (char (symbol-name symbol1) 0)))
     (and (eql first-letter (char (symbol-name symbol2) 0))
          (eql first-letter (char (symbol-name symbol3) 0)))))
<span class="roman">→</span> ALL-START-WITH-SAME-LETTER
 (defun read-new-value ()
   (format t &quot;Enter a new value: &quot;)
   (multiple-value-list (eval (read))))
<span class="roman">→</span> READ-NEW-VALUE
 (defun verify-or-fix-perfect-sundae (ice-cream sauce topping)
   (do ()
      ((all-start-with-same-letter ice-cream sauce topping))
     (restart-case
       (error 'bad-tasting-sundae
              :ice-cream ice-cream
              :sauce sauce
              :topping topping)
       (use-new-ice-cream (new-ice-cream)
         :report &quot;Use a new ice cream.&quot;
         :interactive read-new-value  
         (setq ice-cream new-ice-cream))
       (use-new-sauce (new-sauce)
         :report &quot;Use a new sauce.&quot;
         :interactive read-new-value
         (setq sauce new-sauce))
       (use-new-topping (new-topping)
         :report &quot;Use a new topping.&quot;
         :interactive read-new-value
         (setq topping new-topping))))
   (values ice-cream sauce topping))
<span class="roman">→</span> VERIFY-OR-FIX-PERFECT-SUNDAE
 (verify-or-fix-perfect-sundae 'vanilla 'caramel 'cherry)
▷ Error: Bad tasting sundae with VANILLA, CARAMEL, and CHERRY.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Use a new ice cream.
▷  2: Use a new sauce.
▷  3: Use a new topping.
▷  4: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>:continue 1</kbd>
▷ Use a new ice cream.
▷ Enter a new ice cream: <kbd>'chocolate</kbd>
<span class="roman">→</span> CHOCOLATE, CARAMEL, CHERRY
</pre></div>


<span id="See-Also_003a-181"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#restart_002dbind">restart-bind</a>, <a href="#with_002dsimple_002drestart">with-simple-restart</a>.
</p>
<span id="Notes_003a-111"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (restart-case <i>expression</i>
    (<i>name1</i> <i>arglist1</i> ...<i>options1</i>... . <i>body1</i>)
    (<i>name2</i> <i>arglist2</i> ...<i>options2</i>... . <i>body2</i>))
</pre></div>

<p>is essentially equivalent to
</p>
<div class="lisp">
<pre class="lisp"> (block #1=#:g0001
   (let ((#2=#:g0002 nil))
        (tagbody
        (restart-bind ((name1 #'(lambda (&amp;rest temp)
                                (setq #2# temp)
                                (go #3=#:g0003))
                          ...<i>slightly-transformed-options1</i>...)
                       (name2 #'(lambda (&amp;rest temp)
                                (setq #2# temp)
                                (go #4=#:g0004))
                          ...<i>slightly-transformed-options2</i>...))
        (return-from #1# <i>expression</i>))
          #3# (return-from #1#
                  (apply #'(lambda <i>arglist1</i> . <i>body1</i>) #2#))
          #4# (return-from #1#
                  (apply #'(lambda <i>arglist2</i> . <i>body2</i>) #2#)))))
</pre></div>


<p>Unnamed restarts are generally only useful interactively
and an interactive option which has no description is of little value.
Implementations are encouraged to warn if 
an unnamed restart is used and no report information
is provided
at compilation    time.  
At runtime, this error might be noticed when entering
the debugger.  Since signaling an error would probably cause recursive
entry into the debugger (causing yet another recursive error, etc.) it is
suggested that the debugger print some indication of such problems when
they occur but not actually signal errors.
</p>
<div class="lisp">
<pre class="lisp"> (restart-case (signal fred)
   (a ...)
   (b ...))
 ≡
 (restart-case
     (with-condition-restarts fred 
                              (list (find-restart 'a) 
                                    (find-restart 'b))
       (signal fred))
   (a ...)
   (b ...))
</pre></div>




<hr>
<span id="restart_002dname"></span><div class="header">
<p>
Next: <a href="#with_002dcondition_002drestarts" accesskey="n" rel="next">with-condition-restarts</a>, Previous: <a href="#restart_002dcase" accesskey="p" rel="prev">restart-case</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">restart-name</h4>
<span id="restart_002dname-_0028Function_0029"></span><h3 class="heading">restart-name (Function)</h3>
<span id="index-restart_002dname-2"></span>
<span id="index-restart_002dname"></span>


<span id="Syntax_003a-165"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-restart_002dname-1">Function: <strong>restart-name</strong> <em>restart <span class="roman">→</span> name</em></dt>
</dl>

<span id="Arguments-and-Values_003a-154"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>restart</var>&mdash;a <i>restart</i>.
</p>
<p><var>name</var>&mdash;a <i>symbol</i>.
</p>
<span id="Description_003a-208"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the name of the <var>restart</var>,
or <code>nil</code>&nbsp;<!-- /@w -->if the <var>restart</var> is not named.
</p>
<span id="Examples_003a-135"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (restart-case 
     (loop for restart in (compute-restarts)
               collect (restart-name restart))
   (case1 () :report &quot;Return 1.&quot; 1)
   (nil   () :report &quot;Return 2.&quot; 2)
   (case3 () :report &quot;Return 3.&quot; 3)
   (case1 () :report &quot;Return 4.&quot; 4))
<span class="roman">→</span> (CASE1 NIL CASE3 CASE1 ABORT)
 ;; In the example above the restart named ABORT was not created
 ;; explicitly, but was implicitly supplied by the system.
</pre></div>


<span id="See-Also_003a-182"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#compute_002drestarts">compute-restarts</a>
<a href="#find_002drestart">find-restart</a>
</p>

<hr>
<span id="with_002dcondition_002drestarts"></span><div class="header">
<p>
Next: <a href="#with_002dsimple_002drestart" accesskey="n" rel="next">with-simple-restart</a>, Previous: <a href="#restart_002dname" accesskey="p" rel="prev">restart-name</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-condition-restarts</h4>
<span id="with_002dcondition_002drestarts-_0028Macro_0029"></span><h3 class="heading">with-condition-restarts (Macro)</h3>
<span id="index-with_002dcondition_002drestarts-2"></span>
<span id="index-with_002dcondition_002drestarts"></span>



<span id="Syntax_003a-166"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002dcondition_002drestarts-1">Macro: <strong>with-condition-restarts</strong> <em>condition-form restarts-form <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-155"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition-form</var>&mdash;a <i>form</i>; <i>evaluated</i> to produce a <var>condition</var>.
</p>
<p><var>condition</var>&mdash;a <i>condition</i> <i>object</i> resulting from the 
<i>evaluation</i> of <var>condition-form</var>.
</p>
<p><var>restart-form</var>&mdash;a <i>form</i>; <i>evaluated</i> to produce a <var>restart-list</var>.
</p>
<p><var>restart-list</var>&mdash;a <i>list</i> of <i>restart</i> <i>objects</i> resulting 
from the <i>evaluation</i> of <var>restart-form</var>.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>; evaluated.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by <var>forms</var>.
</p>
<span id="Description_003a-209"></span><h4 class="subsubheading">Description:</h4>

<p>First, the <var>condition-form</var> and <var>restarts-form</var> are <i>evaluated</i>
in normal left-to-right order; the <i>primary values</i> yielded by these
<i>evaluations</i> are respectively called the <var>condition</var> 
and the <var>restart-list</var>.
</p>
<p>Next, the <var>forms</var> are <i>evaluated</i> in a <i>dynamic environment</i>
in which each <i>restart</i> in <var>restart-list</var> is associated with
the <var>condition</var>.  See <a href="#AssocRestartWithCond">Section 9.1.4.2.4 (Associating a Restart with a Condition)</a>.
</p>
<span id="See-Also_003a-183"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#restart_002dcase">restart-case</a>
</p>
<span id="Notes_003a-112"></span><h4 class="subsubheading">Notes:</h4>

<p>Usually this <i>macro</i> is not used explicitly in code, 
since <code>restart-case</code> handles most of the common cases
in a way that is syntactically more concise.
</p>


<hr>
<span id="with_002dsimple_002drestart"></span><div class="header">
<p>
Next: <a href="#abort-_0028Restart_0029" accesskey="n" rel="next">abort (Restart)</a>, Previous: <a href="#with_002dcondition_002drestarts" accesskey="p" rel="prev">with-condition-restarts</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-simple-restart</h4>
<span id="with_002dsimple_002drestart-_0028Macro_0029"></span><h3 class="heading">with-simple-restart (Macro)</h3>
<span id="index-with_002dsimple_002drestart-2"></span>
<span id="index-with_002dsimple_002drestart"></span>


<span id="Syntax_003a-167"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002dsimple_002drestart-1">Macro: <strong>with-simple-restart</strong> <em><tt>(</tt>name format-control <tt>{</tt>format-argument<tt>}</tt>*<tt>)</tt> <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-156"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>name</var>&mdash;a <i>symbol</i>.
</p>
<p><var>format-control</var>&mdash;a <i>format control</i>.
</p>
<p><var>format-argument</var>&mdash;an <i>object</i> (<i>i.e.</i>, a <i>format argument</i>).
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;in the normal situation,
the <i>values</i> returned by the <var>forms</var>;
in the exceptional situation where the <i>restart</i> named <var>name</var> is invoked,
two values&mdash;<code>nil</code>&nbsp;<!-- /@w -->and <code>t</code>.
</p>
<span id="Description_003a-210"></span><h4 class="subsubheading">Description:</h4>

<p><code>with-simple-restart</code> establishes a restart.  
</p>
<p>If the restart designated by <var>name</var> is not invoked while executing <var>forms</var>,
all values returned by the last of <var>forms</var> are returned. 
If the restart designated by <var>name</var> is invoked,
control is transferred to <code>with-simple-restart</code>,
which returns two values, <code>nil</code>&nbsp;<!-- /@w -->and <code>t</code>.
</p>
<p>If <var>name</var> is <code>nil</code>, an anonymous restart is established.
</p>
<p>The <var>format-control</var> and <var>format-arguments</var> are used 
report the <i>restart</i>.
</p>
<span id="Examples_003a-136"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun read-eval-print-loop (level)
   (with-simple-restart (abort &quot;Exit command level ~D.&quot; level)
     (loop
       (with-simple-restart (abort &quot;Return to command level ~D.&quot; level)
         (let ((form (prog2 (fresh-line) (read) (fresh-line))))
           (prin1 (eval form)))))))
<span class="roman">→</span> READ-EVAL-PRINT-LOOP
 (read-eval-print-loop 1)
 (+ 'a 3)
▷ Error: The argument, A, to the function + was of the wrong type.
▷        The function expected a number.
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Specify a value to use this time.
▷  2: Return to command level 1.
▷  3: Exit command level 1.
▷  4: Return to Lisp Toplevel.
</pre></div>


<div class="lisp">
<pre class="lisp"> (defun compute-fixnum-power-of-2 (x)
   (with-simple-restart (nil &quot;Give up on computing 2^~D.&quot; x)
     (let ((result 1))
       (dotimes (i x result)
         (setq result (* 2 result))
         (unless (fixnump result)
           (error &quot;Power of 2 is too large.&quot;))))))
COMPUTE-FIXNUM-POWER-OF-2
 (defun compute-power-of-2 (x)
   (or (compute-fixnum-power-of-2 x) 'something big))
COMPUTE-POWER-OF-2
 (compute-power-of-2 10)
1024
 (compute-power-of-2 10000)
▷ Error: Power of 2 is too large.
▷ To continue, type :CONTINUE followed by an option number.
▷  1: Give up on computing 2^10000.
▷  2: Return to Lisp Toplevel
▷ Debug&gt; <kbd>:continue 1</kbd>
<span class="roman">→</span> SOMETHING-BIG
</pre></div>


<span id="See-Also_003a-184"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#restart_002dcase">restart-case</a>
</p>
<span id="Notes_003a-113"></span><h4 class="subsubheading">Notes:</h4>

<p><code>with-simple-restart</code> is shorthand for one of the most
common uses of <code>restart-case</code>.
</p>
<p><code>with-simple-restart</code> could be defined by:
</p>
<div class="lisp">
<pre class="lisp"> (defmacro with-simple-restart ((restart-name format-control
                                              &amp;rest format-arguments)
                                &amp;body forms)
   `(restart-case (progn ,@forms)
      (,restart-name ()
          :report (lambda (stream)
                    (format stream ,format-control ,@format-arguments))
         (values nil t))))
</pre></div>


<p>Because the second return value is <code>t</code>&nbsp;<!-- /@w -->in the exceptional case,
it is common (but not required) to arrange for the second return value
in the normal case to be missing or <code>nil</code>&nbsp;<!-- /@w -->so that the two situations
can be distinguished.
</p>

<hr>
<span id="abort-_0028Restart_0029"></span><div class="header">
<p>
Next: <a href="#continue-_0028Restart_0029" accesskey="n" rel="next">continue (Restart)</a>, Previous: <a href="#with_002dsimple_002drestart" accesskey="p" rel="prev">with-simple-restart</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">abort (Restart)</h4>
<span id="abort-_0028Restart_0029-1"></span><h3 class="heading">abort (Restart)</h3>
<span id="index-abort-4"></span>
<span id="index-abort"></span>


<span id="Data-Arguments-Required_003a"></span><h4 class="subsubheading">Data Arguments Required:</h4>

<p>None.
</p>
<span id="Description_003a-211"></span><h4 class="subsubheading">Description:</h4>

<p>The intent of the <tt>abort</tt> restart is to allow return to the
innermost &ldquo;command level.&rdquo;  Implementors are encouraged to make 
sure that there is always a restart named <code>abort</code> 
around any user code so that user code can call <code>abort</code> 
at any time and expect something reasonable to happen;
exactly what the reasonable thing is may vary somewhat.  Typically,
in an interactive listener, the invocation of <code>abort</code>
returns to the <i>Lisp reader</i> phase of the <i>Lisp read-eval-print loop</i>,
though in some batch or multi-processing
situations there may be situations in which having it kill the running 
process is more appropriate.
</p>
<span id="See-Also_003a-185"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#abort">abort</a> (<i>function</i>)
</p>

<hr>
<span id="continue-_0028Restart_0029"></span><div class="header">
<p>
Next: <a href="#muffle_002dwarning-_0028Restart_0029" accesskey="n" rel="next">muffle-warning (Restart)</a>, Previous: <a href="#abort-_0028Restart_0029" accesskey="p" rel="prev">abort (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">continue (Restart)</h4>
<span id="continue-_0028Restart_0029-1"></span><h3 class="heading">continue (Restart)</h3>
<span id="index-continue-4"></span>
<span id="index-continue"></span>


<span id="Data-Arguments-Required_003a-1"></span><h4 class="subsubheading">Data Arguments Required:</h4>

<p>None.
</p>
<span id="Description_003a-212"></span><h4 class="subsubheading">Description:</h4>

<p>the <code>continue</code> restart is generally part of protocols where there is
a single &ldquo;obvious&rdquo; way to continue, such as in 
<code>break</code> and <code>cerror</code>.  Some
user-defined protocols may also wish to incorporate it for similar reasons.
In general, however, it is more reliable to design a special purpose restart
with a name that more directly suits the particular application.
</p>
<span id="Examples_003a-137"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (let ((x 3))
   (handler-bind ((error #'(lambda (c)
                             (let ((r (find-restart 'continue c)))
                               (when r (invoke-restart r))))))
     (cond ((not (floatp x))
            (cerror &quot;Try floating it.&quot; &quot;~D is not a float.&quot; x)
            (float x))
           (t x)))) <span class="roman">→</span> 3.0
</pre></div>


<span id="See-Also_003a-186"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#continue">continue</a> (<i>function</i>),
<a href="#assert">assert</a>,
<a href="#cerror">cerror</a>
</p>

<hr>
<span id="muffle_002dwarning-_0028Restart_0029"></span><div class="header">
<p>
Next: <a href="#store_002dvalue-_0028Restart_0029" accesskey="n" rel="next">store-value (Restart)</a>, Previous: <a href="#continue-_0028Restart_0029" accesskey="p" rel="prev">continue (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">muffle-warning (Restart)</h4>
<span id="muffle_002dwarning-_0028Restart_0029-1"></span><h3 class="heading">muffle-warning (Restart)</h3>
<span id="index-muffle_002dwarning-4"></span>
<span id="index-muffle_002dwarning"></span>


<span id="Data-Arguments-Required_003a-2"></span><h4 class="subsubheading">Data Arguments Required:</h4>

<p>None.
</p>
<span id="Description_003a-213"></span><h4 class="subsubheading">Description:</h4>

<p>This <i>restart</i> is established by <code>warn</code> so that <i>handlers</i>
of <code>warning</code> <i>conditions</i> have a way to tell <code>warn</code> 
that a warning has already been dealt with and that no further action is warranted.
</p>
<span id="Examples_003a-138"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defvar *all-quiet* nil) <span class="roman">→</span> *ALL-QUIET*
 (defvar *saved-warnings* '()) <span class="roman">→</span> *SAVED-WARNINGS*
 (defun quiet-warning-handler (c)
   (when *all-quiet*
     (let ((r (find-restart 'muffle-warning c)))
       (when r 
         (push c *saved-warnings*)
         (invoke-restart r)))))
<span class="roman">→</span> CUSTOM-WARNING-HANDLER
 (defmacro with-quiet-warnings (&amp;body forms)
   `(let ((*all-quiet* t)
          (*saved-warnings* '()))
      (handler-bind ((warning #'quiet-warning-handler))
        ,@forms
        *saved-warnings*)))
<span class="roman">→</span> WITH-QUIET-WARNINGS
 (setq saved
   (with-quiet-warnings
     (warn &quot;Situation #1.&quot;)
     (let ((*all-quiet* nil))
       (warn &quot;Situation #2.&quot;))
     (warn &quot;Situation #3.&quot;)))
▷ Warning: Situation #2.
<span class="roman">→</span> (#&lt;SIMPLE-WARNING 42744421&gt; #&lt;SIMPLE-WARNING 42744365&gt;)
 (dolist (s saved) (format t &quot;~&amp;~A~%&quot; s))
▷ Situation #3.
▷ Situation #1.
<span class="roman">→</span> NIL
</pre></div>


<span id="See-Also_003a-187"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#muffle_002dwarning">muffle-warning</a> (<i>function</i>),
<a href="#warn">warn</a>
</p>

<hr>
<span id="store_002dvalue-_0028Restart_0029"></span><div class="header">
<p>
Next: <a href="#use_002dvalue-_0028Restart_0029" accesskey="n" rel="next">use-value (Restart)</a>, Previous: <a href="#muffle_002dwarning-_0028Restart_0029" accesskey="p" rel="prev">muffle-warning (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">store-value (Restart)</h4>
<span id="store_002dvalue-_0028Restart_0029-1"></span><h3 class="heading">store-value (Restart)</h3>
<span id="index-store_002dvalue-4"></span>
<span id="index-store_002dvalue"></span>


<span id="Data-Arguments-Required_003a-3"></span><h4 class="subsubheading">Data Arguments Required:</h4>

<p>a value to use instead (on an ongoing basis).
</p>
<span id="Description_003a-214"></span><h4 class="subsubheading">Description:</h4>

<p>the <code>store-value</code> restart is generally used by <i>handlers</i>
trying to recover from errors of <i>types</i> such as <code>cell-error</code> 
or <code>type-error</code>, which may wish to supply a replacement datum to
be stored permanently.
</p>
<span id="Examples_003a-139"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun type-error-auto-coerce (c)
   (when (typep c 'type-error)
     (let ((r (find-restart 'store-value c)))
       (handler-case (let ((v (coerce (type-error-datum c)
                                      (type-error-expected-type c))))
                       (invoke-restart r v))
         (error ()))))) <span class="roman">→</span> TYPE-ERROR-AUTO-COERCE
 (let ((x 3))
   (handler-bind ((type-error #'type-error-auto-coerce))
     (check-type x float)
     x)) <span class="roman">→</span> 3.0
</pre></div>


<span id="See-Also_003a-188"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#store_002dvalue">store-value</a> (<i>function</i>),
<a href="Data-and-Control-Flow.html#ccase">ccase</a>,
<a href="#check_002dtype">check-type</a>,
<a href="Data-and-Control-Flow.html#ctypecase">ctypecase</a>,
<a href="#use_002dvalue">use-value</a> (<i>function</i> and <i>restart</i>)
</p>

<hr>
<span id="use_002dvalue-_0028Restart_0029"></span><div class="header">
<p>
Next: <a href="#abort_003b-continue_003b-muffle_002dwarning_003b-store_002dvalue_003b-use_002dvalue" accesskey="n" rel="next">abort; continue; muffle-warning; store-value; use-value</a>, Previous: <a href="#store_002dvalue-_0028Restart_0029" accesskey="p" rel="prev">store-value (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">use-value (Restart)</h4>
<span id="use_002dvalue-_0028Restart_0029-1"></span><h3 class="heading">use-value (Restart)</h3>
<span id="index-use_002dvalue-4"></span>
<span id="index-use_002dvalue"></span>


<span id="Data-Arguments-Required_003a-4"></span><h4 class="subsubheading">Data Arguments Required:</h4>

<p>a value to use instead (once).
</p>
<span id="Description_003a-215"></span><h4 class="subsubheading">Description:</h4>

<p>the <code>use-value</code> restart is generally used by <i>handlers</i> trying 
to recover from errors of <i>types</i> such as <code>cell-error</code>, 
where the handler may wish to supply a replacement datum for one-time use.
</p>
<span id="See-Also_003a-189"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#invoke_002drestart">invoke-restart</a>,
<a href="#use_002dvalue">use-value</a> (<i>function</i>),
<a href="#store_002dvalue">store-value</a> (<i>function</i> and <i>restart</i>)
</p>

<hr>
<span id="abort_003b-continue_003b-muffle_002dwarning_003b-store_002dvalue_003b-use_002dvalue"></span><div class="header">
<p>
Previous: <a href="#use_002dvalue-_0028Restart_0029" accesskey="p" rel="prev">use-value (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">abort; continue; muffle-warning; store-value; use-value</h4>
<span id="abort_002c-continue_002c-muffle_002dwarning_002c-store_002dvalue_002c-use_002dvalue-_0028Function_0029"></span><h3 class="heading">abort, continue, muffle-warning, store-value, use-value (Function)</h3>
<span id="index-abort-5"></span>
<span id="index-abort-1"></span>
<span id="index-continue-5"></span>
<span id="index-continue-1"></span>
<span id="index-muffle_002dwarning-5"></span>
<span id="index-muffle_002dwarning-1"></span>
<span id="index-store_002dvalue-5"></span>
<span id="index-store_002dvalue-1"></span>
<span id="index-use_002dvalue-5"></span>
<span id="index-use_002dvalue-1"></span>
<span id="abort"></span><span id="continue"></span><span id="muffle_002dwarning"></span><span id="store_002dvalue"></span><span id="use_002dvalue"></span>
<span id="index-abort-2"></span>
<span id="index-continue-2"></span>
<span id="index-muffle_002dwarning-2"></span>
<span id="index-store_002dvalue-2"></span>
<span id="index-use_002dvalue-2"></span>

<span id="Syntax_003a-168"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-abort-3">Function: <strong>abort</strong> <em><tt>&amp;optional</tt> condition <span class="roman">→</span><span class="roman">|</span></em></dt>
</dl>
<dl>
<dt id="index-continue-3">Function: <strong>continue</strong> <em><tt>&amp;optional</tt> condition <span class="roman">→</span> <code>nil</code></em></dt>
</dl>
<dl>
<dt id="index-muffle_002dwarning-3">Function: <strong>muffle-warning</strong> <em><tt>&amp;optional</tt> condition <span class="roman">→</span><span class="roman">|</span></em></dt>
</dl>
<dl>
<dt id="index-store_002dvalue-3">Function: <strong>store-value</strong> <em>value <tt>&amp;optional</tt> condition <span class="roman">→</span> <code>nil</code></em></dt>
</dl>
<dl>
<dt id="index-use_002dvalue-3">Function: <strong>use-value</strong> <em>value <tt>&amp;optional</tt> condition <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-157"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>value</var>&mdash;an <i>object</i>.
</p>
<p><var>condition</var>&mdash;a <i>condition</i> <i>object</i>, or <code>nil</code>.
</p>
<span id="Description_003a-216"></span><h4 class="subsubheading">Description:</h4>

<p>Transfers control to the most recently established <i>applicable restart</i>
having the same name as the function.  That is,
the <i>function</i> <code>abort</code>    searches for an <i>applicable</i> <tt>abort</tt>    <i>restart</i>, 
the <i>function</i> <code>continue</code> searches for an <i>applicable</i> <tt>continue</tt> <i>restart</i>,
and so on.
</p>
<p>If no such <i>restart</i> exists, 
the functions
<code>continue</code>,
<code>store-value</code>, 
and <code>use-value</code>
return <code>nil</code>, and 
the functions
<code>abort</code>
and <code>muffle-warning</code>
signal an error of <i>type</i> <code>control-error</code>.
</p>
<p>When <var>condition</var> is <i>non-nil</i>,
only those <i>restarts</i> are considered that are 
either explicitly associated with that <var>condition</var>,
or not associated with any <i>condition</i>;
that is, the excluded <i>restarts</i> are 
those that are associated with a non-empty set of <i>conditions</i>
of which the given <var>condition</var> is not an <i>element</i>.
If <var>condition</var> is <code>nil</code>, all <i>restarts</i> are considered.
</p>
<span id="Examples_003a-140"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp">;;; Example of the ABORT retart

 (defmacro abort-on-error (&amp;body forms)
   `(handler-bind ((error #'abort))
      ,@forms)) <span class="roman">→</span> ABORT-ON-ERROR
 (abort-on-error (+ 3 5)) <span class="roman">→</span> 8
 (abort-on-error (error &quot;You lose.&quot;))
▷ Returned to Lisp Top Level.

;;; Example of the CONTINUE restart

 (defun real-sqrt (n)
   (when (minusp n)
     (setq n (- n))
     (cerror &quot;Return sqrt(~D) instead.&quot; &quot;Tried to take sqrt(-~D).&quot; n))
   (sqrt n))

 (real-sqrt 4) <span class="roman">→</span> 2
 (real-sqrt -9)
▷ Error: Tried to take sqrt(-9).
▷ To continue, type :CONTINUE followed by an option number:
▷  1: Return sqrt(9) instead.
▷  2: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>(continue)</kbd>
▷ Return sqrt(9) instead.
<span class="roman">→</span> 3
 
 (handler-bind ((error #'(lambda (c) (continue))))
   (real-sqrt -9)) <span class="roman">→</span> 3

;;; Example of the MUFFLE-WARNING restart

 (defun count-down (x)
   (do ((counter x (1- counter)))
       ((= counter 0) 'done)
     (when (= counter 1)
       (warn &quot;Almost done&quot;))
     (format t &quot;~&amp;~D~%&quot; counter)))
<span class="roman">→</span> COUNT-DOWN
 (count-down 3)
▷ 3
▷ 2
▷ Warning: Almost done
▷ 1
<span class="roman">→</span> DONE
 (defun ignore-warnings-while-counting (x)
   (handler-bind ((warning #'ignore-warning))
     (count-down x)))
<span class="roman">→</span> IGNORE-WARNINGS-WHILE-COUNTING
 (defun ignore-warning (condition)
   (declare (ignore condition))
   (muffle-warning))
<span class="roman">→</span> IGNORE-WARNING
 (ignore-warnings-while-counting 3)
▷ 3
▷ 2
▷ 1
<span class="roman">→</span> DONE

;;; Example of the STORE-VALUE and USE-VALUE restarts

 (defun careful-symbol-value (symbol)
   (check-type symbol symbol)
   (restart-case (if (boundp symbol)
                     (return-from careful-symbol-value 
                                  (symbol-value symbol))
                     (error 'unbound-variable
                            :name symbol))
     (use-value (value)
       :report &quot;Specify a value to use this time.&quot;
       value)
     (store-value (value)
       :report &quot;Specify a value to store and use in the future.&quot;
       (setf (symbol-value symbol) value))))
 (setq a 1234) <span class="roman">→</span> 1234
 (careful-symbol-value 'a) <span class="roman">→</span> 1234
 (makunbound 'a) <span class="roman">→</span> A
 (careful-symbol-value 'a)
▷ Error: A is not bound.
▷ To continue, type :CONTINUE followed by an option number.
▷  1: Specify a value to use this time.
▷  2: Specify a value to store and use in the future.
▷  3: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>(use-value 12)</kbd>
<span class="roman">→</span> 12
 (careful-symbol-value 'a)
▷ Error: A is not bound.
▷ To continue, type :CONTINUE followed by an option number.
▷   1: Specify a value to use this time.
▷   2: Specify a value to store and use in the future.
▷   3: Return to Lisp Toplevel.
▷ Debug&gt; <kbd>(store-value 24)</kbd>
<span class="roman">→</span> 24
 (careful-symbol-value 'a)
<span class="roman">→</span> 24

;;; Example of the USE-VALUE restart

 (defun add-symbols-with-default (default &amp;rest symbols)
   (handler-bind ((sys:unbound-symbol
                    #'(lambda (c)
                        (declare (ignore c)) 
                        (use-value default))))
     (apply #'+ (mapcar #'careful-symbol-value symbols))))
<span class="roman">→</span> ADD-SYMBOLS-WITH-DEFAULT
 (setq x 1 y 2) <span class="roman">→</span> 2
 (add-symbols-with-default 3 'x 'y 'z) <span class="roman">→</span> 6


</pre></div>


<span id="Side-Effects_003a-18"></span><h4 class="subsubheading">Side Effects:</h4>

<p>A transfer of control may occur if an appropriate <i>restart</i> is available,
or (in the case of the <i>function</i> <code>abort</code> or the <i>function</i> <code>muffle-warning</code>)
execution may be stopped.
</p>
<span id="Affected-By_003a-35"></span><h4 class="subsubheading">Affected By:</h4>

<p>Each of these functions can be affected by 
the presence of a <i>restart</i> having the same name.
</p>
<span id="Exceptional-Situations_003a-49"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If an appropriate <tt>abort</tt> <i>restart</i>
is not available for the <i>function</i> <code>abort</code>,
or an appropriate <tt>muffle-warning</tt> <i>restart</i> 
is not available for the <i>function</i> <code>muffle-warning</code>,
an error of <i>type</i> <code>control-error</code> is signaled.
</p>
<span id="See-Also_003a-190"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#invoke_002drestart">invoke-restart</a>,
<a href="#Restarts">Section 9.1.4.2 (Restarts)</a>,
<a href="#InterfacesToRestarts">Section 9.1.4.2.2 (Interfaces to Restarts)</a>,
<a href="#assert">assert</a>,
<a href="Data-and-Control-Flow.html#ccase">ccase</a>,
<a href="#cerror">cerror</a>,
<a href="#check_002dtype">check-type</a>,
<a href="Data-and-Control-Flow.html#ctypecase">ctypecase</a>,
<a href="#use_002dvalue">use-value</a>,
<a href="#warn">warn</a>
</p>
<span id="Notes_003a-114"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (abort condition) ≡ (invoke-restart 'abort)
 (muffle-warning)  ≡ (invoke-restart 'muffle-warning)
 (continue)        ≡ (let ((r (find-restart 'continue))) (if r (invoke-restart r)))
 (use-value <var>x</var>) ≡ (let ((r (find-restart 'use-value))) (if r (invoke-restart r <var>x</var>)))
 (store-value x) ≡ (let ((r (find-restart 'store-value))) (if r (invoke-restart r <var>x</var>)))
</pre></div>


<p>No functions defined in this specification are required to provide
a <tt>use-value</tt> <i>restart</i>.
</p>



<hr>
<div class="header">
<p>
Previous: <a href="#use_002dvalue-_0028Restart_0029" accesskey="p" rel="prev">use-value (Restart)</a>, Up: <a href="#Conditions" accesskey="u" rel="up">Conditions</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
