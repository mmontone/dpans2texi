<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Streams (ANSI Common Lisp)</title>

<meta name="description" content="Streams (ANSI Common Lisp)">
<meta name="keywords" content="Streams (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Printer.html#Printer" rel="next" title="Printer">
<link href="Files.html#file_002derror_002dpathname" rel="prev" title="file-error-pathname">
<style type="text/css">
<!--
/*
CSS for TexInfo/HTML files.

Copyright (C) 2015-2021 Assaf Gordon (assafgordon@gmail.com)

License:
GNU All Permissive License
https://www.gnu.org/prep/maintain/html_node/License-Notices-for-Other-Files.html

 Copying and distribution of this file, with or without modification,
 are permitted in any medium without royalty provided the copyright
 notice and this notice are preserved.  This file is offered as-is,
 without any warranty.


The used tags/classes were collected from a Texinfo-generated HTML using:

  cd coreutils
  makeinfo --html --no-split -o coreutils.html doc/coreutils.texi
  cat coreutils.html | sed 's/</\n</g' | sed 's;>.*;>;g' \
         | grep '^<' | grep 'class=' | sort -u \
         | perl -lane 'm/<(\w+) .*class="([-\w]+)"/ ; print $1, "\t", $2' \
         | sort -u

*/

a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {
  font-family: sans-serif;
  font-size: 16px;
  margin: 1em;

  overflow-x: hidden; /* Coupled with the div.header trick,
			 this will extend the header lines
			 access the entire page width without causing
			 a horizontal scroll bar to appear. */
}


a {
  text-decoration: none;
  outline-style: none;
  color: blue;
}
a:visited {
  color: rgb(16,0,112);
}
a:hover {
  text-decoration: underline;
}


/*****************************************************
   Titles / Headers
******************************************************/

/* @settitle:
   The title of the document at the top of the document/header */
h1.settitle {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* The title at the beginning of the document, before the @menu */
h1.top {
  color: rgb(51,70,131);
  text-shadow: rgb(153,153,153) 1px 1px 0px;
}

/* @chapter */
h2.chapter {
}

h2.appendix { }
h2.unnumbered { }

/* @section */
h3.section {
}
/* @unnumberedsec */
h3.unnumberedsec {
}
/* @heading (seems to be only used in fdl.texi) */
h3.heading {
}

/* @subsection */
h4.subsection {
}


/**************************************************
  Short Contents (if @shortcontents command is used)
***************************************************/
h2.shortcontents-heading { }
div.shortcontents { }
div.shortcontents ul { }
div.shortcontents ul li { }


/**************************************************
  Contents (if @contents command is used)
***************************************************/
h2.contents-heading { }
div.contents { }
div.contents ul { }
div.contents ul li { }


/* The @menu table */
table.menu { }
pre.menu-comment {}



/************************************
  @example   and   @verbatim
************************************/
div.example {
  margin-left: 2em;
  margin-right: 2em;
}
div.example pre.example {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}

/* Note: @verbatim is also rendered inside a 'div.example' */
div.example pre.verbatim {
  /* Round Corners */
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #c0c0c0;

  padding: 1ex;
  background-color: #f3f3f3;
}



/************************************
  @smallexample
************************************/
div.smallexample {
}
div.smallexample pre.smallexample {
}

/***********************************
  @display
***********************************/
div.display {
}
div.display pre.display {
}



/**************************************
  @footnote
**************************************/
div.footnote { }
h4.footnotes-heading { }

/**************************************
The header at the top of each page / section
(the next/previous/top/up links)
**************************************/
div.header {
   padding-top: 0.5ex;
   padding-bottom: 0.5ex;
   background-color: #ddddff;

   /* This will extend the background color of the header
      bar to the entire width of the page (and beyond),
      requires 'overflow-x: hidden' in the 'body'. */
   padding-left: 3000px;
   margin-left: -3000px;
   padding-right: 3000px;
   margin-right: -3000px;
}

/* Disable any additional margins */
div.header p {
    margin: 0;
}
div.header p a {
    color: blue;
}


/**************************************
   @table is rendered as <dl> (defnition list),
   @item  is rendered as <dt> (definition term),
   text is rendered as <dd> (definition description)
**************************************/
dl {
   margin: 0 1em;
}
dl dt {
   margin: 1em 0;
}
dl dd {
   margin-left: 2em;
}

/*******************************************************
  Text Styles
*******************************************************/

/* @var{} */
var {
  color: #CC0000;
}

/* @samp{} */
samp {
  color: #6600CC;
}

/* @env{} will result in <p><code>X</code></p> */
p code {
	border-radius: 5px;
	padding-left: 3px;
	padding-right: 3px;
	background-color: rgba(175,184,193,0.2);
}

/* p code { */
/*   color: #532c14; */
/* } */

/* @option{} */
span.nocodebreak {
  color: #5D4C46;
}

-->
</style>


</head>

<body lang="en">
<span id="Streams"></span><div class="header">
<p>
Next: <a href="Printer.html#Printer" accesskey="n" rel="next">Printer</a>, Previous: <a href="Files.html#Files" accesskey="p" rel="prev">Files</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Streams-1"></span><h2 class="chapter">21 Streams</h2>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Stream-Concepts" accesskey="1">Stream Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

Dictionary

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#stream" accesskey="2">stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#broadcast_002dstream" accesskey="3">broadcast-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#concatenated_002dstream" accesskey="4">concatenated-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#echo_002dstream" accesskey="5">echo-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#file_002dstream" accesskey="6">file-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#string_002dstream" accesskey="7">string-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#synonym_002dstream" accesskey="8">synonym-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#two_002dway_002dstream" accesskey="9">two-way-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#input_002dstream_002dp_003b-output_002dstream_002dp">input-stream-p; output-stream-p</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#interactive_002dstream_002dp">interactive-stream-p</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#open_002dstream_002dp">open-stream-p</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#stream_002delement_002dtype">stream-element-type</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#streamp">streamp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#read_002dbyte">read-byte</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#write_002dbyte">write-byte</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#peek_002dchar">peek-char</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#read_002dchar">read-char</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#read_002dchar_002dno_002dhang">read-char-no-hang</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#terpri_003b-fresh_002dline">terpri; fresh-line</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#unread_002dchar">unread-char</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#write_002dchar">write-char</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#read_002dline">read-line</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#write_002dstring_003b-write_002dline">write-string; write-line</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#read_002dsequence">read-sequence</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#write_002dsequence">write-sequence</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#file_002dlength">file-length</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#file_002dposition">file-position</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#file_002dstring_002dlength">file-string-length</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#open">open</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#stream_002dexternal_002dformat">stream-external-format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002dopen_002dfile">with-open-file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#close">close</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002dopen_002dstream">with-open-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#listen">listen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#clear_002dinput">clear-input</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#finish_002doutput_003b-force_002doutput_003b-clear_002doutput">finish-output; force-output; clear-output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#y_002dor_002dn_002dp_003b-yes_002dor_002dno_002dp">y-or-n-p; yes-or-no-p</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dsynonym_002dstream">make-synonym-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#synonym_002dstream_002dsymbol">synonym-stream-symbol</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#broadcast_002dstream_002dstreams">broadcast-stream-streams</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dbroadcast_002dstream">make-broadcast-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dtwo_002dway_002dstream">make-two-way-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#two_002dway_002dstream_002dinput_002dstream_003b-two_002dway_002dstream_002doutput_002dstream">two-way-stream-input-stream; two-way-stream-output-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#echo_002dstream_002dinput_002dstream_003b-echo_002dstream_002doutput_002dstream">echo-stream-input-stream; echo-stream-output-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002decho_002dstream">make-echo-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#concatenated_002dstream_002dstreams">concatenated-stream-streams</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dconcatenated_002dstream">make-concatenated-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#get_002doutput_002dstream_002dstring">get-output-stream-string</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dstring_002dinput_002dstream">make-string-input-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_002dstring_002doutput_002dstream">make-string-output-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002dinput_002dfrom_002dstring">with-input-from-string</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#with_002doutput_002dto_002dstring">with-output-to-string</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_002adebug_002dio_002a_003b-_002aerror_002doutput_002a_003b-_002aquery_002dio_002a_003b-_002astandard_002dinput_002a_003b-_002astandard_002dout_002b">*debug-io*; *error-output*; *query-io*; *standard-input*; *standard-out+</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#g_t_002aterminal_002dio_002a">*terminal-io*</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#stream_002derror">stream-error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#stream_002derror_002dstream">stream-error-stream</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#end_002dof_002dfile">end-of-file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Stream-Concepts"></span><div class="header">
<p>
Next: <a href="#stream" accesskey="n" rel="next">stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Stream-Concepts-1"></span><h3 class="section">21.1 Stream Concepts</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction-to-Streams" accesskey="1">Introduction to Streams</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Stream-Variables" accesskey="2">Stream Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Stream-Arguments-to-Standardized-Functions" accesskey="3">Stream Arguments to Standardized Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Restrictions-on-Composite-Streams" accesskey="4">Restrictions on Composite Streams</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>
<hr>
<span id="Introduction-to-Streams"></span><div class="header">
<p>
Next: <a href="#Stream-Variables" accesskey="n" rel="next">Stream Variables</a>, Up: <a href="#Stream-Concepts" accesskey="u" rel="up">Stream Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Introduction-to-Streams-1"></span><h4 class="subsection">21.1.1 Introduction to Streams</h4>

<p>A <span id="index-stream-1"></span>
<em>stream</em> is an <i>object</i> that can be used with an input or output
function to identify an appropriate source or sink of <i>characters</i> or 
<i>bytes</i> for that operation.
A <span id="index-character-4"></span>
<em>character</em> <span id="index-stream-2"></span>
<em>stream</em> is a source or sink of <i>characters</i>.
A <span id="index-binary"></span>
<em>binary</em> <span id="index-stream-3"></span>
<em>stream</em> is a source or sink of <i>bytes</i>.
</p>
<p>Some operations may be performed on any kind of <i>stream</i>;
the next figure&nbsp;<!-- /@w -->provides a list of <i>standardized</i> operations
that are potentially useful with any kind of <i>stream</i>.
</p>

<div class="float"><span id="fig21_002e1"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>close</td><td>stream-element-type</td></tr>
<tr><td>input-stream-p</td><td>streamp</td></tr>
<tr><td>interactive-stream-p</td><td>with-open-stream</td></tr>
<tr><td>output-stream-p</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.1: </strong>Some General-Purpose Stream Operations</p></div></div>

<p>Other operations are only meaningful on certain <i>stream</i> <i>types</i>.
For example, <code>read-char</code> is only defined for <i>character</i> <i>streams</i>
and <code>read-byte</code> is only defined for <i>binary</i> <i>streams</i>.
</p>
<span id="Abstract-Classifications-of-Streams"></span><h4 class="subsubsection">21.1.1.1 Abstract Classifications of Streams</h4>

<span id="g_t21_002e1_002e1_002e1_002e1-Input_002c-Output_002c-and-Bidirectional-Streams"></span><h4 class="unnumberedsubsubsec">21.1.1.1.1 Input, Output, and Bidirectional Streams</h4>


<p>A <i>stream</i>, whether a <i>character</i> <i>stream</i> or a <i>binary</i> <i>stream</i>,
can be an <span id="index-input"></span>
<em>input</em> <span id="index-stream-4"></span>
<em>stream</em> (source of data),
an <span id="index-output"></span>
<em>output</em> <span id="index-stream-5"></span>
<em>stream</em> (sink for data),
both, 
or (<i>e.g.</i>, when &ldquo;<code>:direction :probe</code>&rdquo; is given to <code>open</code>) neither.
</p>
<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to
<i>input</i> <i>streams</i>.
</p>


<div class="float"><span id="InputStreamOps"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>clear-input</td><td>read-byte</td><td>read-from-string</td></tr>
<tr><td>listen</td><td>read-char</td><td>read-line</td></tr>
<tr><td>peek-char</td><td>read-char-no-hang</td><td>read-preserving-whitespace</td></tr>
<tr><td>read</td><td>read-delimited-list</td><td>unread-char</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.2: </strong>Operators relating to Input Streams.</p></div></div>

<p>The next figure&nbsp;<!-- /@w -->shows <i>operators</i> relating to
<i>output</i> <i>streams</i>.
</p>


<div class="float"><span id="OutputStreamOps"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>clear-output</td><td>prin1</td><td>write</td></tr>
<tr><td>finish-output</td><td>prin1-to-string</td><td>write-byte</td></tr>
<tr><td>force-output</td><td>princ</td><td>write-char</td></tr>
<tr><td>format</td><td>princ-to-string</td><td>write-line</td></tr>
<tr><td>fresh-line</td><td>print</td><td>write-string</td></tr>
<tr><td>pprint</td><td>terpri</td><td>write-to-string</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.3: </strong>Operators relating to Output Streams.</p></div></div>

<p>A <i>stream</i> that is both an <i>input</i> <i>stream</i> and an <i>output</i> <i>stream</i>
is called a <span id="index-bidirectional"></span>
<em>bidirectional</em> <span id="index-stream-6"></span>
<em>stream</em>.
See the <i>functions</i> <a href="#input_002dstream_002dp">input-stream-p</a> and <code>output-stream-p</code>.
</p>
<p>Any of the <i>operators</i> listed in <a href="#InputStreamOps">Figure 21.2</a>&nbsp;<!-- /@w -->or <a href="#OutputStreamOps">Figure 21.3</a>
can be used with <i>bidirectional</i> <i>streams</i>.  In addition, the next figure
shows a list of <i>operators</i> that relate specificaly to 
<i>bidirectional</i> <i>streams</i>.
</p>

<div class="float"><span id="fig21_002e4"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>y-or-n-p</td><td>yes-or-no-p</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.4: </strong>Operators relating to Bidirectional Streams.</p></div></div>


<span id="g_t21_002e1_002e1_002e1_002e2-Open-and-Closed-Streams"></span><h4 class="unnumberedsubsubsec">21.1.1.1.2 Open and Closed Streams</h4>


<p><i>Streams</i> are either <span id="index-open"></span>
<em>open</em> or <span id="index-closed"></span>
<em>closed</em>.  
</p>
<p>Except as explicitly specified otherwise,
operations that create and return <i>streams</i> return <i>open</i> <i>streams</i>.
</p>
<p>The action of <i>closing</i> a <i>stream</i> marks the end of its use as a source
or sink of data, permitting the <i>implementation</i> to reclaim its internal data
structures, and to free any external resources which might have been locked by the
<i>stream</i> when it was opened.
</p>
<p>Except as explicitly specified otherwise,
the consequences are undefined when a <i>closed</i> <i>stream</i> 
is used where a <i>stream</i> is called for.
</p>
<p>Coercion of <i>streams</i> to <i>pathnames</i> 
is permissible for <i>closed</i> <i>streams</i>;
in some situations, such as for a <i>truename</i> computation, 
the result might be different for an <i>open</i> <i>stream</i>
and for that same <i>stream</i> once it has been <i>closed</i>.
</p>

<span id="g_t21_002e1_002e1_002e1_002e3-Interactive-Streams"></span><h4 class="unnumberedsubsubsec">21.1.1.1.3 Interactive Streams</h4>

<span id="InteractiveStreams"></span>
<p>An <span id="index-interactive-stream"></span>
<em>interactive stream</em> is one on which it makes sense to perform
interactive querying.
</p>
<p>The precise meaning of an <i>interactive stream</i> is
<i>implementation-defined</i>, and may depend on the underlying
operating system.  Some examples of the things that an
<i>implementation</i> might choose to use as identifying characteristics
of an <i>interactive stream</i> include:
</p>

<ul>
<li> The <i>stream</i> is connected to a person (or equivalent) in such a way
that the program can prompt for information and expect to receive different
input depending on the prompt.

</li><li> The program is expected to prompt for input and support &ldquo;normal input editing&rdquo;.

</li><li> <code>read-char</code> might wait for the user to type something before returning
instead of immediately returning a character or end-of-file. 
</li></ul>


<p>The general intent of having some <i>streams</i> be classified as
<i>interactive streams</i> is to allow them to be distinguished from
streams containing batch (or background or command-file) input.
Output to batch streams is typically discarded or saved for later viewing, 
so interactive queries to such streams might not have the expected effect.
</p>
<p><i>Terminal I/O</i> might or might not be an <i>interactive stream</i>.
</p>

<span id="Abstract-Classifications-of-Streams-1"></span><h4 class="subsubsection">21.1.1.2 Abstract Classifications of Streams</h4>

<span id="g_t21_002e1_002e1_002e2_002e4-File-Streams"></span><h4 class="unnumberedsubsubsec">21.1.1.2.4 File Streams</h4>


<p>Some <i>streams</i>, called 
<span id="index-file-stream"></span>
<em>file streams</em>, provide access to <i>files</i>.
An <i>object</i> of <i>class</i> <code>file-stream</code> is used to represent a <i>file stream</i>.
</p>
<p>The basic operation for opening a <i>file</i> is <code>open</code>,
which typically returns a <i>file stream</i> 
(see its dictionary entry for details).
The basic operation for closing a <i>stream</i> is <code>close</code>.
The macro <code>with-open-file</code> is useful 
to express the common idiom of opening a <i>file</i> 
for the duration of a given body of <i>code</i>, 
and assuring that the resulting <i>stream</i> is closed upon exit from that body.
</p>

<span id="Other-Subclasses-of-Stream"></span><h4 class="subsubsection">21.1.1.3 Other Subclasses of Stream</h4>

<p>The <i>class</i> <code>stream</code> has a number of <i>subclasses</i> defined 
by this specification.  The next figure&nbsp;<!-- /@w -->shows some information 
about these subclasses.
</p>

<div class="float"><span id="fig21_002e5"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<thead><tr><th>Class</th><th>Related Operators</th></tr></thead>
<tr><td><code>broadcast-stream</code></td><td><code>make-broadcast-stream</code></td></tr>
<tr><td></td><td><code>broadcast-stream-streams</code></td></tr>
<tr><td><code>concatenated-stream</code></td><td><code>make-concatenated-stream</code></td></tr>
<tr><td></td><td><code>concatenated-stream-streams</code></td></tr>
<tr><td><code>echo-stream</code></td><td><code>make-echo-stream</code></td></tr>
<tr><td></td><td><code>echo-stream-input-stream</code></td></tr>
<tr><td></td><td><code>echo-stream-output-stream</code></td></tr>
<tr><td><code>string-stream</code></td><td><code>make-string-input-stream</code></td></tr>
<tr><td></td><td><code>with-input-from-string</code></td></tr>
<tr><td></td><td><code>make-string-output-stream</code></td></tr>
<tr><td></td><td><code>with-output-to-string</code></td></tr>
<tr><td></td><td><code>get-output-stream-string</code></td></tr>
<tr><td><code>synonym-stream</code></td><td><code>make-synonym-stream</code></td></tr>
<tr><td></td><td><code>synonym-stream-symbol</code></td></tr>
<tr><td><code>two-way-stream</code></td><td><code>make-two-way-stream</code></td></tr>
<tr><td></td><td><code>two-way-stream-input-stream</code></td></tr>
<tr><td></td><td><code>two-way-stream-output-stream</code></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.5: </strong>Defined Names related to Specialized Streams</p></div></div>



<hr>
<span id="Stream-Variables"></span><div class="header">
<p>
Next: <a href="#Stream-Arguments-to-Standardized-Functions" accesskey="n" rel="next">Stream Arguments to Standardized Functions</a>, Previous: <a href="#Introduction-to-Streams" accesskey="p" rel="prev">Introduction to Streams</a>, Up: <a href="#Stream-Concepts" accesskey="u" rel="up">Stream Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Stream-Variables-1"></span><h4 class="subsection">21.1.2 Stream Variables</h4>

<p><i>Variables</i> whose <i>values</i> must be <i>streams</i> are sometimes called 
<span id="index-stream-variable"></span>
<em>stream variables</em>.
</p>
<p>Certain <i>stream variables</i> are defined by this specification 
to be the proper source of input or output in various <i>situations</i> 
where no specific <i>stream</i> has been specified instead.
A complete list of such <i>standardized</i> <i>stream variables</i>
appears in the next figure.  
The consequences are undefined if at any time
the <i>value</i> of any of these <i>variables</i> is not an <i>open</i> <i>stream</i>.
</p>


<div class="float"><span id="StandardizedStreamVars"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<thead><tr><th>Glossary Term</th><th>Variable Name</th></tr></thead>
<tr><td><i>debug I/O</i></td><td><code>*debug-io*</code></td></tr>
<tr><td><i>error output</i></td><td><code>*error-output*</code></td></tr>
<tr><td><i>query I/O</i></td><td><code>*query-io*</code></td></tr>
<tr><td><i>standard input</i></td><td><code>*standard-input*</code></td></tr>
<tr><td><i>standard output</i></td><td><code>*standard-output*</code></td></tr>
<tr><td><i>terminal I/O</i></td><td><code>*terminal-io*</code></td></tr>
<tr><td><i>trace output</i></td><td><code>*trace-output*</code></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.6: </strong>Standardized Stream Variables</p></div></div>

<p>Note that, by convention, <i>standardized</i> <i>stream variables</i> have names 
ending in &ldquo;<code>-input*</code>&rdquo;  if they must be <i>input</i> <i>streams</i>,
ending in &ldquo;<code>-output*</code>&rdquo; if they must be <i>output</i> <i>streams</i>,
or ending in &ldquo;<code>-io*</code>&rdquo;     if they must be <i>bidirectional</i> <i>streams</i>.
</p>
<p>User programs may <i>assign</i> or <i>bind</i> any <i>standardized</i> <i>stream variable</i>
except <code>*terminal-io*</code>.
</p>

<hr>
<span id="Stream-Arguments-to-Standardized-Functions"></span><div class="header">
<p>
Next: <a href="#Restrictions-on-Composite-Streams" accesskey="n" rel="next">Restrictions on Composite Streams</a>, Previous: <a href="#Stream-Variables" accesskey="p" rel="prev">Stream Variables</a>, Up: <a href="#Stream-Concepts" accesskey="u" rel="up">Stream Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Stream-Arguments-to-Standardized-Functions-1"></span><h4 class="subsection">21.1.3 Stream Arguments to Standardized Functions</h4>

<p>The <i>operators</i> in the next figure&nbsp;<!-- /@w -->accept <i>stream</i> <i>arguments</i> that
might be either <i>open</i> or <i>closed</i> <i>streams</i>.
</p>


<div class="float"><span id="OpenOrClosedStreamOps"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>broadcast-stream-streams</td><td>file-author</td><td>pathnamep</td></tr>
<tr><td>close</td><td>file-namestring</td><td>probe-file</td></tr>
<tr><td>compile-file</td><td>file-write-date</td><td>rename-file</td></tr>
<tr><td>compile-file-pathname</td><td>host-namestring</td><td>streamp</td></tr>
<tr><td>concatenated-stream-streams</td><td>load</td><td>synonym-stream-symbol</td></tr>
<tr><td>delete-file</td><td>logical-pathname</td><td>translate-logical-pathname</td></tr>
<tr><td>directory</td><td>merge-pathnames</td><td>translate-pathname</td></tr>
<tr><td>directory-namestring</td><td>namestring</td><td>truename</td></tr>
<tr><td>dribble</td><td>open</td><td>two-way-stream-input-stream</td></tr>
<tr><td>echo-stream-input-stream</td><td>open-stream-p</td><td>two-way-stream-output-stream</td></tr>
<tr><td>echo-stream-ouput-stream</td><td>parse-namestring</td><td>wild-pathname-p</td></tr>
<tr><td>ed</td><td>pathname</td><td>with-open-file</td></tr>
<tr><td>enough-namestring</td><td>pathname-match-p</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.7: </strong>Operators that accept either Open or Closed Streams</p></div></div>

<p>The <i>operators</i> in the next figure&nbsp;<!-- /@w -->accept <i>stream</i> <i>arguments</i> that
must be <i>open</i> <i>streams</i>.
</p>

<div class="float"><span id="fig21_002e8"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td>clear-input</td><td>output-stream-p</td><td>read-char-no-hang</td></tr>
<tr><td>clear-output</td><td>peek-char</td><td>read-delimited-list</td></tr>
<tr><td>file-length</td><td>pprint</td><td>read-line</td></tr>
<tr><td>file-position</td><td>pprint-fill</td><td>read-preserving-whitespace</td></tr>
<tr><td>file-string-length</td><td>pprint-indent</td><td>stream-element-type</td></tr>
<tr><td>finish-output</td><td>pprint-linear</td><td>stream-external-format</td></tr>
<tr><td>force-output</td><td>pprint-logical-block</td><td>terpri</td></tr>
<tr><td>format</td><td>pprint-newline</td><td>unread-char</td></tr>
<tr><td>fresh-line</td><td>pprint-tab</td><td>with-open-stream</td></tr>
<tr><td>get-output-stream-string</td><td>pprint-tabular</td><td>write</td></tr>
<tr><td>input-stream-p</td><td>prin1</td><td>write-byte</td></tr>
<tr><td>interactive-stream-p</td><td>princ</td><td>write-char</td></tr>
<tr><td>listen</td><td>print</td><td>write-line</td></tr>
<tr><td>make-broadcast-stream</td><td>print-object</td><td>write-string</td></tr>
<tr><td>make-concatenated-stream</td><td>print-unreadable-object</td><td>y-or-n-p</td></tr>
<tr><td>make-echo-stream</td><td>read</td><td>yes-or-no-p</td></tr>
<tr><td>make-synonym-stream</td><td>read-byte</td><td></td></tr>
<tr><td>make-two-way-stream</td><td>read-char</td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 21.8: </strong>Operators that accept Open Streams only</p></div></div>


<hr>
<span id="Restrictions-on-Composite-Streams"></span><div class="header">
<p>
Previous: <a href="#Stream-Arguments-to-Standardized-Functions" accesskey="p" rel="prev">Stream Arguments to Standardized Functions</a>, Up: <a href="#Stream-Concepts" accesskey="u" rel="up">Stream Concepts</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Restrictions-on-Composite-Streams-1"></span><h4 class="subsection">21.1.4 Restrictions on Composite Streams</h4>

<p>The consequences are undefined if any <i>component</i> of a <i>composite stream</i>
is <i>closed</i> before the <i>composite stream</i> is <i>closed</i>.
</p>
<p>The consequences are undefined if the <i>synonym stream symbol</i> is not <i>bound</i>
to an <i>open</i> <i>stream</i> from the time of the <i>synonym stream</i>&rsquo;s creation
until the time it is <i>closed</i>.
</p>

<hr>
<span id="stream"></span><div class="header">
<p>
Next: <a href="#broadcast_002dstream" accesskey="n" rel="next">broadcast-stream</a>, Previous: <a href="#Stream-Concepts" accesskey="p" rel="prev">Stream Concepts</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">stream</h4>
<span id="stream-_0028System-Class_0029"></span><h3 class="heading">stream (System Class)</h3>
<span id="index-stream-8"></span>
<span id="index-stream-7"></span>


<span id="Class-Precedence-List_003a-62"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-532"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>stream</i> is an <i>object</i> that can be used with an input or output
function to identify an appropriate source or sink of <i>characters</i> or 
<i>bytes</i> for that operation.
</p>
<p>For more complete information, see <a href="#Stream-Concepts">Section 21.1 (Stream Concepts)</a>.
</p>

<span id="See-Also_003a-435"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Stream-Concepts">Section 21.1 (Stream Concepts)</a>,
<a href="Printer.html#PrintingOtherObjects">Section 22.1.3.13 (Printing Other Objects)</a>,
<a href="Printer.html#Printer">Chapter 22 (Printer)</a>,
<a href="Reader.html#Reader">Chapter 23 (Reader)</a>
</p>
<hr>
<span id="broadcast_002dstream"></span><div class="header">
<p>
Next: <a href="#concatenated_002dstream" accesskey="n" rel="next">concatenated-stream</a>, Previous: <a href="#stream" accesskey="p" rel="prev">stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">broadcast-stream</h4>
<span id="broadcast_002dstream-_0028System-Class_0029"></span><h3 class="heading">broadcast-stream (System Class)</h3>
<span id="index-broadcast_002dstream-1"></span>
<span id="index-broadcast_002dstream"></span>



<span id="Class-Precedence-List_003a-63"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>broadcast-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-533"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>broadcast stream</i> is an <i>output</i> <i>stream</i> which 
has associated with it a set of zero or more <i>output</i> <i>streams</i> 
such that any output sent to the <i>broadcast stream</i> gets passed on
as output to each of the associated <i>output</i> <i>streams</i>.
(If a <i>broadcast stream</i> has no <i>component streams</i>,
then all output to the <i>broadcast stream</i> is discarded.)
</p>
<p>The set of operations that may be performed on a <i>broadcast stream</i> 
is the intersection of those for its associated <i>output</i> <i>streams</i>.
</p>
<p>Some output operations (<i>e.g.</i>, <code>fresh-line</code>) return <i>values</i> based on the
state of the <i>stream</i> at the time of the operation.
Since these <i>values</i> might differ for each of the <i>component streams</i>,
it is necessary to describe their return value specifically:
</p>

<ul>
<li> <code>stream-element-type</code> returns
the value from the last component stream, 
or <code>t</code> if there are no component streams.

</li><li> <code>fresh-line</code> returns
the value from the last component stream, 
or <code>nil</code>&nbsp;<!-- /@w -->if there are no component streams.

</li><li> The functions
<code>file-length</code>,
<code>file-position</code>,
<code>file-string-length</code>,
and <code>stream-external-format</code>
return the value from the last component stream;
if there are no component streams,
<code>file-length</code> and <code>file-position</code> return <code>0</code>,
<code>file-string-length</code> returns <code>1</code>,
and <code>stream-external-format</code> returns <tt>:default</tt>.

</li><li> The functions <code>streamp</code> and <code>output-stream-p</code> 
always return <i>true</i> for <i>broadcast streams</i>.

</li><li> The functions <code>open-stream-p</code> tests whether the <i>broadcast stream</i>
is <i>open</i><sub>2</sub>

</li><li> The functions <code>input-stream-p</code> and <i>interactive-stream-p</i> 
return an <i>implementation-defined</i>, <i>generalized boolean</i> value.

</li><li> For the input operations
<code>clear-input</code>
<code>listen</code>,
<code>peek-char</code>,
<code>read-byte</code>,
<code>read-char-no-hang</code>,
<code>read-char</code>,
<code>read-line</code>,
and <code>unread-char</code>,
the consequences are undefined if the indicated operation is performed.
However, an <i>implementation</i> is permitted 
to define such a behavior as an <i>implementation-dependent</i> extension.
</li></ul>


<p>For any output operations not having their return values explicitly specified above
or elsewhere in this document, it is defined that
the <i>values</i> returned by such an operation are 
the <i>values</i> resulting from performing the operation 
on the last of its <i>component streams</i>;
the <i>values</i> resulting from performing the operation
on all preceding <i>streams</i> are discarded.                    
If there are no <i>component streams</i>, 
the value is <i>implementation-dependent</i>.
</p>
<span id="See-Also_003a-436"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#broadcast_002dstream_002dstreams">broadcast-stream-streams</a>,
<a href="#make_002dbroadcast_002dstream">make-broadcast-stream</a>
</p>

<hr>
<span id="concatenated_002dstream"></span><div class="header">
<p>
Next: <a href="#echo_002dstream" accesskey="n" rel="next">echo-stream</a>, Previous: <a href="#broadcast_002dstream" accesskey="p" rel="prev">broadcast-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">concatenated-stream</h4>
<span id="concatenated_002dstream-_0028System-Class_0029"></span><h3 class="heading">concatenated-stream (System Class)</h3>
<span id="index-concatenated_002dstream-1"></span>
<span id="index-concatenated_002dstream"></span>



<span id="Class-Precedence-List_003a-64"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>concatenated-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-534"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>concatenated stream</i> is an <i>input</i> <i>stream</i> which 
is a <i>composite stream</i> of zero or more other <i>input</i> <i>streams</i>, 
such that the sequence of data which can be read from the
<i>concatenated stream</i> is the same as the concatenation of the 
sequences of data which could be read from each of the 
constituent <i>streams</i>.
</p>
<p>Input from a <i>concatenated stream</i> is taken from the first
of the associated <i>input streams</i> until it reaches <i>end of file</i><sub>1</sub>
then that <i>stream</i> is discarded, and subsequent input is taken
from the next <i>input stream</i>, and so on.
An <i>end of file</i> on the associated <i>input streams</i> is always managed
invisibly by the <i>concatenated stream</i>&mdash;the only time a client of
a <i>concatenated stream</i> sees an <i>end of file</i> is when an attempt is
made to obtain data from the <i>concatenated stream</i> but it has no
remaining <i>input streams</i> from which to obtain such data.
</p>

<span id="See-Also_003a-437"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#concatenated_002dstream_002dstreams">concatenated-stream-streams</a>,
<a href="#make_002dconcatenated_002dstream">make-concatenated-stream</a>
</p>
<hr>
<span id="echo_002dstream"></span><div class="header">
<p>
Next: <a href="#file_002dstream" accesskey="n" rel="next">file-stream</a>, Previous: <a href="#concatenated_002dstream" accesskey="p" rel="prev">concatenated-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">echo-stream</h4>
<span id="echo_002dstream-_0028System-Class_0029"></span><h3 class="heading">echo-stream (System Class)</h3>
<span id="index-echo_002dstream-1"></span>
<span id="index-echo_002dstream"></span>



<span id="Class-Precedence-List_003a-65"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>echo-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-535"></span><h4 class="subsubheading">Description:</h4>

<p>An <i>echo stream</i> is a <i>bidirectional</i> <i>stream</i>
that gets  its input  from an associated <i>input</i>  <i>stream</i>
and  sends its output to   an associated <i>output</i> <i>stream</i>.
</p>
<p>All input taken from the <i>input</i> <i>stream</i> 
is echoed to the <i>output</i> <i>stream</i>.
Whether the input is echoed immediately after it is encountered,
or after it has been read from the <i>input stream</i>
is <i>implementation-dependent</i>.
</p>

<span id="See-Also_003a-438"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#echo_002dstream_002dinput_002dstream">echo-stream-input-stream</a>,
<a href="#echo_002dstream_002doutput_002dstream">echo-stream-output-stream</a>,
<a href="#make_002decho_002dstream">make-echo-stream</a>
</p>
<hr>
<span id="file_002dstream"></span><div class="header">
<p>
Next: <a href="#string_002dstream" accesskey="n" rel="next">string-stream</a>, Previous: <a href="#echo_002dstream" accesskey="p" rel="prev">echo-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">file-stream</h4>
<span id="file_002dstream-_0028System-Class_0029"></span><h3 class="heading">file-stream (System Class)</h3>
<span id="index-file_002dstream-1"></span>
<span id="index-file_002dstream"></span>



<span id="Class-Precedence-List_003a-66"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>file-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-536"></span><h4 class="subsubheading">Description:</h4>

<p>An <i>object</i> of <i>type</i> <code>file-stream</code> is a <i>stream</i> the direct
source or sink of which is a <i>file</i>.  Such a <i>stream</i> is
created explicitly by <code>open</code> and <code>with-open-file</code>, and
implicitly by <i>functions</i> such as <code>load</code> that process <i>files</i>.
</p>

<span id="See-Also_003a-439"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="System-Construction.html#load">load</a>,
<a href="#open">open</a>,
<a href="#with_002dopen_002dfile">with-open-file</a>
</p>
<hr>
<span id="string_002dstream"></span><div class="header">
<p>
Next: <a href="#synonym_002dstream" accesskey="n" rel="next">synonym-stream</a>, Previous: <a href="#file_002dstream" accesskey="p" rel="prev">file-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">string-stream</h4>
<span id="string_002dstream-_0028System-Class_0029"></span><h3 class="heading">string-stream (System Class)</h3>
<span id="index-string_002dstream-1"></span>
<span id="index-string_002dstream"></span>



<span id="Class-Precedence-List_003a-67"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>string-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-537"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>string stream</i> is a <i>stream</i> 
which reads input from or writes output to an associated <i>string</i>.
</p>
<p>The <i>stream element type</i> of a <i>string stream</i> is always
a subtype of <i>type</i> <code>character</code>.
</p>
<span id="See-Also_003a-440"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dstring_002dinput_002dstream">make-string-input-stream</a>,
<a href="#make_002dstring_002doutput_002dstream">make-string-output-stream</a>,
<a href="#with_002dinput_002dfrom_002dstring">with-input-from-string</a>,
<a href="#with_002doutput_002dto_002dstring">with-output-to-string</a>
</p>

<hr>
<span id="synonym_002dstream"></span><div class="header">
<p>
Next: <a href="#two_002dway_002dstream" accesskey="n" rel="next">two-way-stream</a>, Previous: <a href="#string_002dstream" accesskey="p" rel="prev">string-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">synonym-stream</h4>
<span id="synonym_002dstream-_0028System-Class_0029"></span><h3 class="heading">synonym-stream (System Class)</h3>
<span id="index-synonym_002dstream-1"></span>
<span id="index-synonym_002dstream"></span>



<span id="Class-Precedence-List_003a-68"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>synonym-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-538"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>stream</i> that is an alias for another <i>stream</i>,
which is the <i>value</i> of a <i>dynamic variable</i>
whose <i>name</i> is the <i>synonym stream symbol</i> of the <i>synonym stream</i>.
</p>
<p>Any operations on a <i>synonym stream</i> will be performed 
on the <i>stream</i> that is then the <i>value</i> of the
<i>dynamic variable</i> named by the <i>synonym stream symbol</i>.
If the <i>value</i> of the <i>variable</i> should change,
or if the <i>variable</i> should be <i>bound</i>,
then the <i>stream</i> will operate on the new <i>value</i> of the <i>variable</i>.
</p>
<span id="See-Also_003a-441"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dsynonym_002dstream">make-synonym-stream</a>,
<a href="#synonym_002dstream_002dsymbol">synonym-stream-symbol</a>
</p>

<hr>
<span id="two_002dway_002dstream"></span><div class="header">
<p>
Next: <a href="#input_002dstream_002dp_003b-output_002dstream_002dp" accesskey="n" rel="next">input-stream-p; output-stream-p</a>, Previous: <a href="#synonym_002dstream" accesskey="p" rel="prev">synonym-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">two-way-stream</h4>
<span id="two_002dway_002dstream-_0028System-Class_0029"></span><h3 class="heading">two-way-stream (System Class)</h3>
<span id="index-two_002dway_002dstream-1"></span>
<span id="index-two_002dway_002dstream"></span>



<span id="Class-Precedence-List_003a-69"></span><h4 class="subsubheading">Class Precedence List:</h4>

<p><code>two-way-stream</code>,
<code>stream</code>,
<code>t</code>
</p>
<span id="Description_003a-539"></span><h4 class="subsubheading">Description:</h4>

<p>A <i>bidirectional</i> <i>composite stream</i> that 
receives its input  from an associated <i>input</i>  <i>stream</i> 
and sends    its output to   an associated <i>output</i> <i>stream</i>.
</p>
<span id="See-Also_003a-442"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dtwo_002dway_002dstream">make-two-way-stream</a>,
<a href="#two_002dway_002dstream_002dinput_002dstream">two-way-stream-input-stream</a>,
<a href="#two_002dway_002dstream_002doutput_002dstream">two-way-stream-output-stream</a>
</p>



<hr>
<span id="input_002dstream_002dp_003b-output_002dstream_002dp"></span><div class="header">
<p>
Next: <a href="#interactive_002dstream_002dp" accesskey="n" rel="next">interactive-stream-p</a>, Previous: <a href="#two_002dway_002dstream" accesskey="p" rel="prev">two-way-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">input-stream-p; output-stream-p</h4>
<span id="input_002dstream_002dp_002c-output_002dstream_002dp-_0028Function_0029"></span><h3 class="heading">input-stream-p, output-stream-p (Function)</h3>
<span id="index-input_002dstream_002dp-2"></span>
<span id="index-input_002dstream_002dp"></span>
<span id="index-output_002dstream_002dp-2"></span>
<span id="index-output_002dstream_002dp"></span>
<span id="input_002dstream_002dp"></span><span id="output_002dstream_002dp"></span>

<span id="Syntax_003a-423"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-input_002dstream_002dp-1">Function: <strong>input-stream-p</strong> <em>stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>
<dl>
<dt id="index-output_002dstream_002dp-1">Function: <strong>output-stream-p</strong> <em>stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-412"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-540"></span><h4 class="subsubheading">Description:</h4>

<p><code>input-stream-p</code> returns <i>true</i> if <var>stream</var> is an <i>input</i> <i>stream</i>;
otherwise, returns <i>false</i>.
</p>
<p><code>output-stream-p</code> returns <i>true</i> if <var>stream</var> is an <i>output</i> <i>stream</i>;
otherwise, returns <i>false</i>.
</p>
<span id="Examples_003a-387"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (input-stream-p *standard-input*) <span class="roman">→</span> <i>true</i>
 (input-stream-p *terminal-io*) <span class="roman">→</span> <i>true</i>
 (input-stream-p (make-string-output-stream)) <span class="roman">→</span> <i>false</i>

 (output-stream-p *standard-output*) <span class="roman">→</span> <i>true</i>
 (output-stream-p *terminal-io*) <span class="roman">→</span> <i>true</i>
 (output-stream-p (make-string-input-stream &quot;jr&quot;)) <span class="roman">→</span> <i>false</i>
</pre></div>


<span id="Exceptional-Situations_003a-192"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
</p>

<hr>
<span id="interactive_002dstream_002dp"></span><div class="header">
<p>
Next: <a href="#open_002dstream_002dp" accesskey="n" rel="next">open-stream-p</a>, Previous: <a href="#input_002dstream_002dp_003b-output_002dstream_002dp" accesskey="p" rel="prev">input-stream-p; output-stream-p</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">interactive-stream-p</h4>
<span id="interactive_002dstream_002dp-_0028Function_0029"></span><h3 class="heading">interactive-stream-p (Function)</h3>
<span id="index-interactive_002dstream_002dp-2"></span>
<span id="index-interactive_002dstream_002dp"></span>



<span id="Syntax_003a-424"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-interactive_002dstream_002dp-1">Function: <strong>interactive-stream-p</strong> <em>stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-413"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-541"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>stream</var> is an <i>interactive stream</i>; otherwise, returns <i>false</i>.
</p>
<span id="Examples_003a-388"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (when (&gt; measured limit)
   (let ((error (round (* (- measured limit) 100)
                       limit)))
     (unless (if (interactive-stream-p *query-io*)
                 (yes-or-no-p &quot;The frammis is out of tolerance by ~D%.~@
                               Is it safe to proceed? &quot; error)
                 (&lt; error 15))  ;15% is acceptable
       (error &quot;The frammis is out of tolerance by ~D%.&quot; error))))
</pre></div>


<span id="Exceptional-Situations_003a-193"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
</p>
<span id="See-Also_003a-443"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Stream-Concepts">Section 21.1 (Stream Concepts)</a>
</p>


<hr>
<span id="open_002dstream_002dp"></span><div class="header">
<p>
Next: <a href="#stream_002delement_002dtype" accesskey="n" rel="next">stream-element-type</a>, Previous: <a href="#interactive_002dstream_002dp" accesskey="p" rel="prev">interactive-stream-p</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">open-stream-p</h4>
<span id="open_002dstream_002dp-_0028Function_0029"></span><h3 class="heading">open-stream-p (Function)</h3>
<span id="index-open_002dstream_002dp-2"></span>
<span id="index-open_002dstream_002dp"></span>



<span id="Syntax_003a-425"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-open_002dstream_002dp-1">Function: <strong>open-stream-p</strong> <em>stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-414"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-542"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>stream</var> is an <i>open</i> <i>stream</i>; otherwise, returns <i>false</i>.
</p>
<p><i>Streams</i> are open until they have been explicitly closed with <code>close</code>,
or until they are implicitly closed due to exit from a
<code>with-output-to-string</code>, 
<code>with-open-file</code>,
<code>with-input-from-string</code>,  or 
<code>with-open-stream</code> <i>form</i>.
</p>
<span id="Examples_003a-389"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (open-stream-p *standard-input*) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Affected-By_003a-80"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>close</code>.
</p>
<span id="Exceptional-Situations_003a-194"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
</p>


<hr>
<span id="stream_002delement_002dtype"></span><div class="header">
<p>
Next: <a href="#streamp" accesskey="n" rel="next">streamp</a>, Previous: <a href="#open_002dstream_002dp" accesskey="p" rel="prev">open-stream-p</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">stream-element-type</h4>
<span id="stream_002delement_002dtype-_0028Function_0029"></span><h3 class="heading">stream-element-type (Function)</h3>
<span id="index-stream_002delement_002dtype-2"></span>
<span id="index-stream_002delement_002dtype"></span>


<span id="Syntax_003a-426"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-stream_002delement_002dtype-1">Function: <strong>stream-element-type</strong> <em>stream <span class="roman">→</span> typespec</em></dt>
</dl>

<span id="Arguments-and-Values_003a-415"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>typespec</var>&mdash;a <i>type specifier</i>.
</p>
<span id="Description_003a-543"></span><h4 class="subsubheading">Description:</h4>

<p><code>stream-element-type</code> returns a <i>type specifier</i> that
indicates the <i>types</i> of <i>objects</i> that may be read from 
or written to <var>stream</var>.
</p>
<p><i>Streams</i> created by <code>open</code> have an <i>element type</i>
restricted to <code>integer</code> or a subtype of <i>type</i> <code>character</code>.
</p>
<span id="Examples_003a-390"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp">;; Note that the stream must accomodate at least the specified type,
;; but might accomodate other types.  Further note that even if it does
;; accomodate exactly the specified type, the type might be specified in
;; any of several ways.
 (with-open-file (s &quot;test&quot; :element-type '(integer 0 1)
                           :if-exists :error
                           :direction :output)
   (stream-element-type s))
<span class="roman">→</span> INTEGER
or<span class="roman">→</span> (UNSIGNED-BYTE 16)
or<span class="roman">→</span> (UNSIGNED-BYTE 8)
or<span class="roman">→</span> BIT
or<span class="roman">→</span> (UNSIGNED-BYTE 1)
or<span class="roman">→</span> (INTEGER 0 1)
or<span class="roman">→</span> (INTEGER 0 (2))
</pre></div>


<span id="Exceptional-Situations_003a-195"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
</p>

<hr>
<span id="streamp"></span><div class="header">
<p>
Next: <a href="#read_002dbyte" accesskey="n" rel="next">read-byte</a>, Previous: <a href="#stream_002delement_002dtype" accesskey="p" rel="prev">stream-element-type</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">streamp</h4>
<span id="streamp-_0028Function_0029"></span><h3 class="heading">streamp (Function)</h3>
<span id="index-streamp-2"></span>
<span id="index-streamp"></span>


<span id="Syntax_003a-427"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-streamp-1">Function: <strong>streamp</strong> <em>object <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-416"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>object</var>&mdash;an <i>object</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-544"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if <var>object</var> is of <i>type</i> <code>stream</code>;
otherwise, returns <i>false</i>.
</p>
<p><code>streamp</code> is unaffected by whether <var>object</var>,
if it is a <i>stream</i>, is <i>open</i> or closed.
</p>
<span id="Examples_003a-391"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (streamp *terminal-io*) <span class="roman">→</span> <i>true</i>
 (streamp 1) <span class="roman">→</span> <i>false</i>
</pre></div>


<span id="Notes_003a-284"></span><h4 class="subsubheading">Notes:</h4>

<div class="lisp">
<pre class="lisp"> (streamp <var>object</var>) ≡ (typep <var>object</var> 'stream)
</pre></div>



<hr>
<span id="read_002dbyte"></span><div class="header">
<p>
Next: <a href="#write_002dbyte" accesskey="n" rel="next">write-byte</a>, Previous: <a href="#streamp" accesskey="p" rel="prev">streamp</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">read-byte</h4>
<span id="read_002dbyte-_0028Function_0029"></span><h3 class="heading">read-byte (Function)</h3>
<span id="index-read_002dbyte-2"></span>
<span id="index-read_002dbyte"></span>


<span id="Syntax_003a-428"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-read_002dbyte-1">Function: <strong>read-byte</strong> <em>stream <tt>&amp;optional</tt> eof-error-p eof-value <span class="roman">→</span> byte</em></dt>
</dl>

<span id="Arguments-and-Values_003a-417"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>binary</i> <i>input</i> <i>stream</i>.
</p>
<p><var>eof-error-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>true</i>.
</p>
<p><var>eof-value</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>byte</var>&mdash;an <i>integer</i>,
or the <var>eof-value</var>.
</p>
<span id="Description_003a-545"></span><h4 class="subsubheading">Description:</h4>

<p><code>read-byte</code> reads and returns one byte from <var>stream</var>.
</p>
<p>If an <i>end of file</i><sub>2</sub>
the <var>eof-value</var> is returned.  
</p>
<span id="Examples_003a-392"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (with-open-file (s &quot;temp-bytes&quot; 
                     :direction :output
                     :element-type 'unsigned-byte)
    (write-byte 101 s)) <span class="roman">→</span> 101
 (with-open-file (s &quot;temp-bytes&quot; :element-type 'unsigned-byte)
    (format t &quot;~S ~S&quot; (read-byte s) (read-byte s nil 'eof)))
▷ 101 EOF
<span class="roman">→</span> NIL
</pre></div>


<span id="Side-Effects_003a-60"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Modifies <var>stream</var>.
</p>
<span id="Exceptional-Situations_003a-196"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
</p>
<p>Should signal an error of <i>type</i> <code>error</code> 
if <var>stream</var> is not  a <i>binary</i> <i>input</i> <i>stream</i>.
</p>
<p>If there are no <i>bytes</i> remaining in the <var>stream</var> 
and <var>eof-error-p</var> is <i>true</i>, an error of <i>type</i> <code>end-of-file</code> is signaled.
</p>
<span id="See-Also_003a-444"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#read_002dchar">read-char</a>,
<a href="#read_002dsequence">read-sequence</a>,
<a href="#write_002dbyte">write-byte</a>
</p>

<hr>
<span id="write_002dbyte"></span><div class="header">
<p>
Next: <a href="#peek_002dchar" accesskey="n" rel="next">peek-char</a>, Previous: <a href="#read_002dbyte" accesskey="p" rel="prev">read-byte</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">write-byte</h4>
<span id="write_002dbyte-_0028Function_0029"></span><h3 class="heading">write-byte (Function)</h3>
<span id="index-write_002dbyte-2"></span>
<span id="index-write_002dbyte"></span>


<span id="Syntax_003a-429"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-write_002dbyte-1">Function: <strong>write-byte</strong> <em>byte stream <span class="roman">→</span> byte</em></dt>
</dl>

<span id="Arguments-and-Values_003a-418"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>byte</var>&mdash;an <i>integer</i> of the <i>stream element type</i>
of <i>stream</i>.
</p>
<p><var>stream</var>&mdash;a <i>binary</i> <i>output</i> <i>stream</i>.
</p>
<span id="Description_003a-546"></span><h4 class="subsubheading">Description:</h4>

<p><code>write-byte</code> writes one byte, <var>byte</var>, to <var>stream</var>.
</p>
<span id="Examples_003a-393"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-open-file (s &quot;temp-bytes&quot; 
                    :direction :output
                    :element-type 'unsigned-byte)
    (write-byte 101 s)) <span class="roman">→</span> 101
</pre></div>


<span id="Side-Effects_003a-61"></span><h4 class="subsubheading">Side Effects:</h4>

<p><var>stream</var> is modified.
</p>
<span id="Affected-By_003a-81"></span><h4 class="subsubheading">Affected By:</h4>

<p>The <i>element type</i> of the <var>stream</var>.
</p>
<span id="Exceptional-Situations_003a-197"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream</i>.
Should signal an error of <i>type</i> <code>error</code> 
if <var>stream</var> is not  a <i>binary</i> <i>output</i> <i>stream</i>.
</p>
<p>Might signal an error of <i>type</i> <code>type-error</code> if <var>byte</var> is not
an <i>integer</i> of the <i>stream element type</i> of <i>stream</i>.
</p>
<span id="See-Also_003a-445"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#read_002dbyte">read-byte</a>,
<a href="#write_002dchar">write-char</a>,
<a href="#write_002dsequence">write-sequence</a>
</p>

<hr>
<span id="peek_002dchar"></span><div class="header">
<p>
Next: <a href="#read_002dchar" accesskey="n" rel="next">read-char</a>, Previous: <a href="#write_002dbyte" accesskey="p" rel="prev">write-byte</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">peek-char</h4>
<span id="peek_002dchar-_0028Function_0029"></span><h3 class="heading">peek-char (Function)</h3>
<span id="index-peek_002dchar-2"></span>
<span id="index-peek_002dchar"></span>


<span id="Syntax_003a-430"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-peek_002dchar-1">Function: <strong>peek-char</strong> <em><tt>&amp;optional</tt> <span class="nolinebreak">peek-type</span>&nbsp;<span class="nolinebreak">input-stream</span>&nbsp;<span class="nolinebreak">eof-error-p</span><!-- /@w --> <span class="nolinebreak">eof-value</span>&nbsp;<span class="nolinebreak">recursive-p</span><!-- /@w --> <span class="roman">→</span> char</em></dt>
</dl>

<span id="Arguments-and-Values_003a-419"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>peek-type</var>&mdash;a <i>character</i> or <code>t</code>&nbsp;<!-- /@w -->or <code>nil</code>.
</p>
<p><var>input-stream</var>&mdash;<i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<p><var>eof-error-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>true</i>.
</p>
<p><var>eof-value</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>recursive-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>false</i>.
</p>
<p><var>char</var>&mdash;a <i>character</i> or the <var>eof-value</var>.
</p>
<span id="Description_003a-547"></span><h4 class="subsubheading">Description:</h4>

<p><code>peek-char</code> obtains the next character in <var>input-stream</var>
without actually reading it, thus leaving the character
to be read at a later time.  It can
also be used to skip over and discard intervening
characters in the <var>input-stream</var> 
until a particular character is found.
</p>
<p>If <var>peek-type</var> is not supplied or <code>nil</code>,
<code>peek-char</code> returns the next character to be read from 
<var>input-stream</var>, without actually removing it from 
<var>input-stream</var>.
The next time input is done from <var>input-stream</var>, the character will still
be there.  
If <var>peek-type</var> is <code>t</code>,
then <code>peek-char</code> skips over <i>whitespace</i><sub>2</sub>
but not comments,
and then performs the peeking operation on the next
character.
The last character examined, the one that starts an <i>object</i>,
is not removed from <var>input-stream</var>.
If <var>peek-type</var> is a <i>character</i>,
then <code>peek-char</code> skips
over input characters until a character that
is <code>char=</code> to that <i>character</i> is found;          
that character is left in <var>input-stream</var>.
</p>
<p>If an <i>end of file</i><sub>2</sub>
<var>eof-value</var> is returned.  
</p>
<p>If <var>recursive-p</var> is <i>true</i>, this call is expected to be
embedded in a higher-level call to <code>read</code> or a similar
<i>function</i> used by the <i>Lisp reader</i>.
</p>
<p>When <var>input-stream</var> is an <i>echo stream</i>,
characters that are only peeked at are not echoed. In the
case that <var>peek-type</var> is not <code>nil</code>,
the characters that are passed by <code>peek-char</code> 
are treated as if by <code>read-char</code>,
and so are echoed unless they have been marked otherwise by <code>unread-char</code>.
</p>
<span id="Examples_003a-394"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (with-input-from-string (input-stream &quot;    1 2 3 4 5&quot;)
    (format t &quot;~S ~S ~S&quot; 
            (peek-char t input-stream)
            (peek-char #\4 input-stream)
            (peek-char nil input-stream)))
▷ #\1 #\4 #\4
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-82"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*readtable*</code>,
<code>*standard-input*</code>,
<code>*terminal-io*</code>.
</p>
<span id="Exceptional-Situations_003a-198"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>eof-error-p</var> is <i>true</i> and an <i>end of file</i><sub>2</sub>
an error of <i>type</i> <code>end-of-file</code> is signaled.
</p>
<p>If     <var>peek-type</var> is a <i>character</i>,
an <i>end of file</i><sub>2</sub>
and <var>eof-error-p</var> is <i>true</i>,
an error of <i>type</i> <code>end-of-file</code> is signaled.
</p>
<p>If <var>recursive-p</var> is <i>true</i>
and an <i>end of file</i><sub>2</sub>
an error of <i>type</i> <code>end-of-file</code> is signaled.
</p>

<hr>
<span id="read_002dchar"></span><div class="header">
<p>
Next: <a href="#read_002dchar_002dno_002dhang" accesskey="n" rel="next">read-char-no-hang</a>, Previous: <a href="#peek_002dchar" accesskey="p" rel="prev">peek-char</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">read-char</h4>
<span id="read_002dchar-_0028Function_0029"></span><h3 class="heading">read-char (Function)</h3>
<span id="index-read_002dchar-2"></span>
<span id="index-read_002dchar"></span>


<span id="Syntax_003a-431"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-read_002dchar-1">Function: <strong>read-char</strong> <em><tt>&amp;optional</tt> input-stream eof-error-p eof-value recursive-p <span class="roman">→</span> char</em></dt>
</dl>

<span id="Arguments-and-Values_003a-420"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<p><var>eof-error-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>true</i>.
</p>
<p><var>eof-value</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>recursive-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>false</i>.
</p>
<p><var>char</var>&mdash;a <i>character</i> or the <var>eof-value</var>.
</p>
<span id="Description_003a-548"></span><h4 class="subsubheading">Description:</h4>

<p><code>read-char</code> returns the next <i>character</i> from <var>input-stream</var>.
</p>
<p>When <var>input-stream</var> is an <var>echo stream</var>,
the character is echoed on <var>input-stream</var> the first time the character is 
seen.
Characters that are not echoed by <code>read-char</code> 
are those that were
put there by <code>unread-char</code> 
and hence are assumed to have been echoed
already by a previous call to <code>read-char</code>.
</p>
<p>If <var>recursive-p</var> is <i>true</i>, this call is expected to be
embedded in a higher-level call to <code>read</code> or a similar
<i>function</i> used by the <i>Lisp reader</i>.
</p>
<p>If an <i>end of file</i><sub>2</sub>
<var>eof-value</var> is returned.  
</p>
<span id="Examples_003a-395"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (with-input-from-string (is &quot;0123&quot;)
    (do ((c (read-char is) (read-char is nil 'the-end)))
        ((not (characterp c)))
     (format t &quot;~S &quot; c)))
▷ #\0 #\1 #\2 #\3
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-83"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>,
<code>*terminal-io*</code>.
</p>
<span id="Exceptional-Situations_003a-199"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If an <i>end of file</i><sub>2</sub>
<var>eof-error-p</var> is <i>true</i>, 
an error of <i>type</i> <code>end-of-file</code> is signaled.
</p>
<span id="See-Also_003a-446"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#read_002dbyte">read-byte</a>,
<a href="#read_002dsequence">read-sequence</a>,
<a href="#write_002dchar">write-char</a>,
<a href="Reader.html#read">read</a>
</p>
<span id="Notes_003a-285"></span><h4 class="subsubheading">Notes:</h4>
<p>The corresponding output function is <code>write-char</code>.
</p>

<hr>
<span id="read_002dchar_002dno_002dhang"></span><div class="header">
<p>
Next: <a href="#terpri_003b-fresh_002dline" accesskey="n" rel="next">terpri; fresh-line</a>, Previous: <a href="#read_002dchar" accesskey="p" rel="prev">read-char</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">read-char-no-hang</h4>
<span id="read_002dchar_002dno_002dhang-_0028Function_0029"></span><h3 class="heading">read-char-no-hang (Function)</h3>
<span id="index-read_002dchar_002dno_002dhang-2"></span>
<span id="index-read_002dchar_002dno_002dhang"></span>


<span id="Syntax_003a-432"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-read_002dchar_002dno_002dhang-1">Function: <strong>read-char-no-hang</strong> <em><tt>&amp;optional</tt> <span class="nolinebreak">input-stream</span>&nbsp;<span class="nolinebreak">eof-error-p</span><!-- /@w --> <span class="nolinebreak">eof-value</span>&nbsp;<span class="nolinebreak">recursive-p</span><!-- /@w --> <span class="roman">→</span> char</em></dt>
</dl>

<span id="Arguments-and-Values_003a-421"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<p><var>eof-error-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>true</i>.
</p>
<p><var>eof-value</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>recursive-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>false</i>.
</p>
<p><var>char</var>&mdash;a <i>character</i> or <code>nil</code>&nbsp;<!-- /@w -->or the <var>eof-value</var>.
</p>
<span id="Description_003a-549"></span><h4 class="subsubheading">Description:</h4>

<p><code>read-char-no-hang</code> returns a character
from <var>input-stream</var> if such a character is available.  If no character
is available, <code>read-char-no-hang</code> returns <code>nil</code>.
</p>
<p>If <var>recursive-p</var> is <i>true</i>, this call is expected to be
embedded in a higher-level call to <code>read</code> or a similar
<i>function</i> used by the <i>Lisp reader</i>.
</p>
<p>If an <i>end of file</i><sub>2</sub>
<var>eof-value</var> is returned.  
</p>
<span id="Examples_003a-396"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp">;; This code assumes an implementation in which a newline is not
;; required to terminate input from the console.
 (defun test-it ()
   (unread-char (read-char))
   (list (read-char-no-hang) 
         (read-char-no-hang) 
         (read-char-no-hang)))
<span class="roman">→</span> TEST-IT
;; Implementation A, where a Newline is not required to terminate
;; interactive input on the console.
 (test-it)
▷ <kbd>a</kbd>
<span class="roman">→</span> (#\a NIL NIL)
;; Implementation B, where a Newline is required to terminate
;; interactive input on the console, and where that Newline remains
;; on the input stream.
 (test-it)
▷ <kbd>a↩</kbd>
<span class="roman">→</span> (#\a #\Newline NIL)
</pre></div>


<span id="Affected-By_003a-84"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>,
<code>*terminal-io*</code>.
</p>
<span id="Exceptional-Situations_003a-200"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If an <i>end of file</i><sub>2</sub>
when <var>eof-error-p</var> is <i>true</i>,
an error of <i>type</i> <code>end-of-file</code> is signaled .
</p>
<span id="See-Also_003a-447"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#listen">listen</a>
</p>
<span id="Notes_003a-286"></span><h4 class="subsubheading">Notes:</h4>

<p><code>read-char-no-hang</code> is exactly like <code>read-char</code>, except
that if it would be necessary to wait in order to get a character (as
from a keyboard), <code>nil</code>&nbsp;<!-- /@w -->is immediately returned without waiting.  
</p>

<hr>
<span id="terpri_003b-fresh_002dline"></span><div class="header">
<p>
Next: <a href="#unread_002dchar" accesskey="n" rel="next">unread-char</a>, Previous: <a href="#read_002dchar_002dno_002dhang" accesskey="p" rel="prev">read-char-no-hang</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">terpri; fresh-line</h4>
<span id="terpri_002c-fresh_002dline-_0028Function_0029"></span><h3 class="heading">terpri, fresh-line (Function)</h3>
<span id="index-terpri-2"></span>
<span id="index-terpri"></span>
<span id="index-fresh_002dline-2"></span>
<span id="index-fresh_002dline"></span>


<span id="Syntax_003a-433"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-terpri-1">Function: <strong>terpri</strong> <em><tt>&amp;optional</tt> output-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>
<dl>
<dt id="index-fresh_002dline-1">Function: <strong>fresh-line</strong> <em><tt>&amp;optional</tt> output-stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-422"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream designator</i>.
The default is <i>standard output</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-550"></span><h4 class="subsubheading">Description:</h4>

<p><code>terpri</code> outputs a <i>newline</i> to <var>output-stream</var>.
</p>
<p><code>fresh-line</code> is similar to <code>terpri</code> but outputs a <i>newline</i>
only if the <var>output-stream</var> is not already at the start of a line.
If for some reason this cannot be determined, then a <i>newline</i> is output anyway.
<code>fresh-line</code> returns <i>true</i> if it outputs a <i>newline</i>;
otherwise it returns <i>false</i>.
</p>
<span id="Examples_003a-397"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-output-to-string (s)
    (write-string &quot;some text&quot; s)
    (terpri s)
    (terpri s)
    (write-string &quot;more text&quot; s))
<span class="roman">→</span> &quot;some text

more text&quot;
 (with-output-to-string (s)
    (write-string &quot;some text&quot; s)
    (fresh-line s)
    (fresh-line s)
    (write-string &quot;more text&quot; s))
<span class="roman">→</span> &quot;some text
more text&quot;
</pre></div>


<span id="Side-Effects_003a-62"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>output-stream</var> is modified.
</p>
<span id="Affected-By_003a-85"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-output*</code>,
<code>*terminal-io*</code>.
</p>
<span id="Exceptional-Situations_003a-201"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>None.
</p>

<span id="Notes_003a-287"></span><h4 class="subsubheading">Notes:</h4>

<p><code>terpri</code> is identical in effect to
</p>
<div class="lisp">
<pre class="lisp"> (write-char #\Newline output-stream)
</pre></div>



<hr>
<span id="unread_002dchar"></span><div class="header">
<p>
Next: <a href="#write_002dchar" accesskey="n" rel="next">write-char</a>, Previous: <a href="#terpri_003b-fresh_002dline" accesskey="p" rel="prev">terpri; fresh-line</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">unread-char</h4>
<span id="unread_002dchar-_0028Function_0029"></span><h3 class="heading">unread-char (Function)</h3>
<span id="index-unread_002dchar-2"></span>
<span id="index-unread_002dchar"></span>


<span id="Syntax_003a-434"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-unread_002dchar-1">Function: <strong>unread-char</strong> <em>character <tt>&amp;optional</tt> input-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-423"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>character</var>&mdash;a <i>character</i>;
must be the last <i>character</i> that was read from <var>input-stream</var>.
</p>
<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<span id="Description_003a-551"></span><h4 class="subsubheading">Description:</h4>

<p><code>unread-char</code> places <var>character</var> back onto the front of
<var>input-stream</var> so that it will again be the next character
in <var>input-stream</var>.
</p>
<p>When <var>input-stream</var> is an <i>echo stream</i>,
no attempt is made to undo any echoing of the character that might already
have been done on <var>input-stream</var>. However, characters placed on 
<var>input-stream</var> by <code>unread-char</code> are marked in such a way 
as to inhibit later re-echo by <code>read-char</code>.
</p>
<p>It is an error to invoke <code>unread-char</code> 
twice consecutively on the same <i>stream</i>
without an intervening call to <code>read-char</code> 
(or some other input operation which implicitly reads characters)
on that <i>stream</i>.
</p>
<p>Invoking <code>peek-char</code> or <code>read-char</code> commits all previous characters.
The consequences of invoking <code>unread-char</code>
on any character preceding that which is returned by 
<code>peek-char</code> (including those passed over by 
<code>peek-char</code> that has a <i>non-nil</i> <var>peek-type</var>)
are unspecified.
In particular, the consequences of 
invoking <code>unread-char</code> after <code>peek-char</code>
are unspecified.
</p>
<span id="Examples_003a-398"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-input-from-string (is &quot;0123&quot;)
    (dotimes (i 6)
      (let ((c (read-char is)))
        (if (evenp i) (format t &quot;~&amp;~S ~S~%&quot; i c) (unread-char c is)))))
▷ 0 #\0
▷ 2 #\1
▷ 4 #\2
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-86"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>,
<code>*terminal-io*</code>.
</p>
<span id="See-Also_003a-448"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#peek_002dchar">peek-char</a>,
<a href="#read_002dchar">read-char</a>,
<a href="#Stream-Concepts">Section 21.1 (Stream Concepts)</a>
</p>
<span id="Notes_003a-288"></span><h4 class="subsubheading">Notes:</h4>

<p><code>unread-char</code> is intended to be an efficient mechanism for allowing
the <i>Lisp reader</i> and other parsers to perform one-character lookahead
in <var>input-stream</var>.
</p>

<hr>
<span id="write_002dchar"></span><div class="header">
<p>
Next: <a href="#read_002dline" accesskey="n" rel="next">read-line</a>, Previous: <a href="#unread_002dchar" accesskey="p" rel="prev">unread-char</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">write-char</h4>
<span id="write_002dchar-_0028Function_0029"></span><h3 class="heading">write-char (Function)</h3>
<span id="index-write_002dchar-2"></span>
<span id="index-write_002dchar"></span>


<span id="Syntax_003a-435"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-write_002dchar-1">Function: <strong>write-char</strong> <em>character <tt>&amp;optional</tt> output-stream <span class="roman">→</span> character</em></dt>
</dl>

<span id="Arguments-and-Values_003a-424"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>character</var>&mdash;a <i>character</i>.
</p>
<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream designator</i>.
The default is <i>standard output</i>.
</p>
<span id="Description_003a-552"></span><h4 class="subsubheading">Description:</h4>

<p><code>write-char</code> outputs <var>character</var> to <var>output-stream</var>.
</p>
<span id="Examples_003a-399"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (write-char #\a)
▷ a
<span class="roman">→</span> #\a
 (with-output-to-string (s) 
   (write-char #\a s)
   (write-char #\Space s)
   (write-char #\b s))
<span class="roman">→</span> &quot;a b&quot;
</pre></div>


<span id="Side-Effects_003a-63"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>output-stream</var> is modified.
</p>
<span id="Affected-By_003a-87"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-output*</code>,
<code>*terminal-io*</code>.
</p>
<span id="See-Also_003a-449"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#read_002dchar">read-char</a>,
<a href="#write_002dbyte">write-byte</a>,
<a href="#write_002dsequence">write-sequence</a>
</p>

<hr>
<span id="read_002dline"></span><div class="header">
<p>
Next: <a href="#write_002dstring_003b-write_002dline" accesskey="n" rel="next">write-string; write-line</a>, Previous: <a href="#write_002dchar" accesskey="p" rel="prev">write-char</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">read-line</h4>
<span id="read_002dline-_0028Function_0029"></span><h3 class="heading">read-line (Function)</h3>
<span id="index-read_002dline-2"></span>
<span id="index-read_002dline"></span>


<span id="Syntax_003a-436"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-read_002dline-1">Function: <strong>read-line</strong> <em><tt>&amp;optional</tt> input-stream eof-error-p eof-value recursive-p <span class="roman">→</span> line, missing-newline-p</em></dt>
</dl>

<span id="Arguments-and-Values_003a-425"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<p><var>eof-error-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>true</i>.
</p>
<p><var>eof-value</var>&mdash;an <i>object</i>.
The default is <code>nil</code>.
</p>
<p><var>recursive-p</var>&mdash;a <i>generalized boolean</i>.
The default is <i>false</i>.
</p>
<p><var>line</var>&mdash;a <i>string</i> or the <var>eof-value</var>.
</p>
<p><var>missing-newline-p</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-553"></span><h4 class="subsubheading">Description:</h4>

<p>Reads from <var>input-stream</var> a line of text
that is terminated by a <i>newline</i> or <i>end of file</i>.
</p>
<p>If <var>recursive-p</var> is <i>true</i>, this call is expected to be
embedded in a higher-level call to <code>read</code> or a similar
<i>function</i> used by the <i>Lisp reader</i>.
</p>
<p>The <i>primary value</i>, <var>line</var>, is the line that is read,
represented as a <i>string</i> (without the trailing <i>newline</i>, if any).
If  <var>eof-error-p</var> is <i>false</i> 
and the <i>end of file</i> for <var>input-stream</var> is reached
before any <i>characters</i> are read,
<var>eof-value</var> is returned as the <var>line</var>.
</p>
<p>The <i>secondary value</i>, <var>missing-newline-p</var>, 
is a <i>generalized boolean</i> that is
<i>false</i> if the <var>line</var> was terminated by a <i>newline</i>,
or <i>true</i>  if the <var>line</var> was terminated by 
the <i>end of file</i> for <var>input-stream</var>
(or if the <var>line</var> is the <var>eof-value</var>).
</p>
<span id="Examples_003a-400"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq a &quot;line 1
 line2&quot;)
<span class="roman">→</span> &quot;line 1
 line2&quot;
 (read-line (setq input-stream (make-string-input-stream a)))
<span class="roman">→</span> &quot;line 1&quot;, <i>false</i>
 (read-line input-stream)
<span class="roman">→</span> &quot;line2&quot;, <i>true</i>
 (read-line input-stream nil nil)
<span class="roman">→</span> NIL, <i>true</i>
</pre></div>


<span id="Affected-By_003a-88"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>,
<code>*terminal-io*</code>.
</p>
<span id="Exceptional-Situations_003a-202"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If an <i>end of file</i><sub>2</sub>
an error is signaled if <var>eof-error-p</var> is <i>true</i>.  
</p>
<span id="See-Also_003a-450"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Reader.html#read">read</a>
</p>
<span id="Notes_003a-289"></span><h4 class="subsubheading">Notes:</h4>

<p>The corresponding output function is <code>write-line</code>.
</p>

<hr>
<span id="write_002dstring_003b-write_002dline"></span><div class="header">
<p>
Next: <a href="#read_002dsequence" accesskey="n" rel="next">read-sequence</a>, Previous: <a href="#read_002dline" accesskey="p" rel="prev">read-line</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">write-string; write-line</h4>
<span id="write_002dstring_002c-write_002dline-_0028Function_0029"></span><h3 class="heading">write-string, write-line (Function)</h3>
<span id="index-write_002dstring-2"></span>
<span id="index-write_002dstring"></span>
<span id="index-write_002dline-2"></span>
<span id="index-write_002dline"></span>
<span id="write_002dstring"></span><span id="write_002dline"></span>

<span id="Syntax_003a-437"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-write_002dstring-1">Function: <strong>write-string</strong> <em>string <tt>&amp;optional</tt> output-stream <tt>&amp;key</tt> start end <span class="roman">→</span> string</em></dt>
</dl>
<dl>
<dt id="index-write_002dline-1">Function: <strong>write-line</strong> <em>string <tt>&amp;optional</tt> output-stream <tt>&amp;key</tt> start end <span class="roman">→</span> string</em></dt>
</dl>

<span id="Arguments-and-Values_003a-426"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>string</var>&mdash;a <i>string</i>.
</p>
<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream designator</i>.
The default is <i>standard output</i>.
</p>
<p><var>start</var>, <var>end</var>&mdash;<i>bounding index designators</i> of <var>string</var>.
The defaults for <var>start</var> and <var>end</var> are <code>0</code> and <code>nil</code>, respectively.
</p>
<span id="Description_003a-554"></span><h4 class="subsubheading">Description:</h4>

<p><code>write-string</code> writes the <i>characters</i> of 
the subsequence of <var>string</var> <i>bounded</i> by <var>start</var> and <var>end</var>
to <var>output-stream</var>.
<code>write-line</code> does the same thing, 
but then outputs a newline afterwards.  
</p>
<span id="Examples_003a-401"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (prog1 (write-string &quot;books&quot; nil :end 4) (write-string &quot;worms&quot;))
▷ bookworms
<span class="roman">→</span> &quot;books&quot;
 (progn (write-char #\*)
        (write-line &quot;test12&quot; *standard-output* :end 5) 
        (write-line &quot;*test2&quot;)
        (write-char #\*)
        nil)
▷ *test1
▷ *test2
▷ *
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-89"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-output*</code>,
<code>*terminal-io*</code>.
</p>
<span id="See-Also_003a-451"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#read_002dline">read-line</a>, <a href="#write_002dchar">write-char</a>
</p>
<span id="Notes_003a-290"></span><h4 class="subsubheading">Notes:</h4>

<p><code>write-line</code> and <code>write-string</code> return <var>string</var>,
not the substring <i>bounded</i> by <var>start</var> and <var>end</var>.
</p>
<div class="lisp">
<pre class="lisp"> (write-string string)
≡ (dotimes (i (length string)
      (write-char (char string i)))

 (write-line string)
≡ (prog1 (write-string string) (terpri))
</pre></div>




<hr>
<span id="read_002dsequence"></span><div class="header">
<p>
Next: <a href="#write_002dsequence" accesskey="n" rel="next">write-sequence</a>, Previous: <a href="#write_002dstring_003b-write_002dline" accesskey="p" rel="prev">write-string; write-line</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">read-sequence</h4>
<span id="read_002dsequence-_0028Function_0029"></span><h3 class="heading">read-sequence (Function)</h3>
<span id="index-read_002dsequence-2"></span>
<span id="index-read_002dsequence"></span>


<span id="Syntax_003a-438"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-read_002dsequence-1">Function: <strong>read-sequence</strong> <em>sequence stream <tt>&amp;key</tt> start end <span class="roman">→</span> position</em></dt>
</dl>

<p><var>sequence</var>&mdash;a <i>sequence</i>.
</p>
<p><var>stream</var>&mdash;an <i>input</i> <i>stream</i>.
</p>
<p><var>start</var>, <var>end</var>&mdash;<i>bounding index designators</i> of
<var>sequence</var>.  The defaults for <var>start</var> and <var>end</var> are <code>0</code> and <code>nil</code>, respectively.
</p>
<p><var>position</var>&mdash;an <i>integer</i> greater than or equal to zero, and
less than or equal to the <i>length</i> of the <var>sequence</var>.
</p>
<span id="Description_003a-555"></span><h4 class="subsubheading">Description:</h4>

<p>Destructively modifies <var>sequence</var> by replacing the <i>elements</i>
of <var>sequence</var> <i>bounded</i> by <var>start</var> and <var>end</var> with
<i>elements</i> read from <var>stream</var>.
</p>
<p><var>Sequence</var> is destructively modified by copying successive
<i>elements</i> into it from <var>stream</var>.  If the <i>end of file</i> for
<var>stream</var> is reached before copying all <i>elements</i> of the
subsequence, then the extra <i>elements</i> near the end of <var>sequence</var>
are not updated.
</p>
<p><var>Position</var> is the index of the first <i>element</i> of <var>sequence</var>
that was not updated, which might be less than <var>end</var> because the
<i>end of file</i> was reached.
</p>
<span id="Examples_003a-402"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defvar *data* (make-array 15 :initial-element nil))
 (values (read-sequence *data* (make-string-input-stream &quot;test string&quot;)) *data*)
 <span class="roman">→</span> 11, #(#\t #\e #\s #\t #\Space #\s #\t #\r #\i #\n #\g NIL NIL NIL NIL)
</pre></div>


<span id="Side-Effects_003a-64"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Modifies <var>stream</var> and <var>sequence</var>.
</p>
<span id="Exceptional-Situations_003a-203"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>sequence</var> is not a <i>proper sequence</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>start</var> is not a non-negative <i>integer</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>end</var> is not a non-negative <i>integer</i> or <code>nil</code>.
</p>
<p>Might signal an error of <i>type</i> <code>type-error</code> if an <i>element</i> read from
the <var>stream</var> is not a member of the <i>element type</i> of the
<var>sequence</var>.
</p>
<span id="See-Also_003a-452"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="#write_002dsequence">write-sequence</a>,
<a href="#read_002dline">read-line</a>
</p>
<span id="Notes_003a-291"></span><h4 class="subsubheading">Notes:</h4>

<p><code>read-sequence</code> is identical in effect to iterating over the indicated
subsequence and reading one <i>element</i> at a time from <var>stream</var> and
storing it into <var>sequence</var>, but may be more efficient than the
equivalent loop.  An efficient implementation is more likely to exist
for the case where the <var>sequence</var> is a <i>vector</i> with the same
<i>element type</i> as the <var>stream</var>.
</p>

<hr>
<span id="write_002dsequence"></span><div class="header">
<p>
Next: <a href="#file_002dlength" accesskey="n" rel="next">file-length</a>, Previous: <a href="#read_002dsequence" accesskey="p" rel="prev">read-sequence</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">write-sequence</h4>
<span id="write_002dsequence-_0028Function_0029"></span><h3 class="heading">write-sequence (Function)</h3>
<span id="index-write_002dsequence-2"></span>
<span id="index-write_002dsequence"></span>


<span id="Syntax_003a-439"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-write_002dsequence-1">Function: <strong>write-sequence</strong> <em>sequence stream <tt>&amp;key</tt> start end <span class="roman">→</span> sequence</em></dt>
</dl>

<p><var>sequence</var>&mdash;a <i>sequence</i>.
</p>
<p><var>stream</var>&mdash;an <i>output</i> <i>stream</i>.
</p>
<p><var>start</var>, <var>end</var>&mdash;<i>bounding index designators</i> of
<var>sequence</var>.  The defaults for <var>start</var> and <var>end</var> are <code>0</code> and <code>nil</code>, respectively.
</p>
<span id="Description_003a-556"></span><h4 class="subsubheading">Description:</h4>

<p><code>write-sequence</code> writes the <i>elements</i> of the subsequence
of <var>sequence</var> <i>bounded</i> by <var>start</var> and <var>end</var> to
<var>stream</var>.
</p>
<span id="Examples_003a-403"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (write-sequence &quot;bookworms&quot; *standard-output* :end 4)
 ▷ book
 <span class="roman">→</span> &quot;bookworms&quot;
</pre></div>


<span id="Side-Effects_003a-65"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Modifies <var>stream</var>.
</p>
<span id="Exceptional-Situations_003a-204"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should be prepared to signal an error of <i>type</i> <code>type-error</code> if
<var>sequence</var> is not a <i>proper sequence</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>start</var> is not a non-negative <i>integer</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>end</var> is not a non-negative <i>integer</i> or <code>nil</code>.
</p>
<p>Might signal an error of <i>type</i> <code>type-error</code> if an <i>element</i> of the
<i>bounded</i> <i>sequence</i> is not a member of the
<i>stream element type</i> of the <var>stream</var>.
</p>
<span id="See-Also_003a-453"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Evaluation-and-Compilation.html#Compiler-Terminology">Section 3.2.1 (Compiler Terminology)</a>,
<a href="#read_002dsequence">read-sequence</a>,
<a href="#write_002dstring">write-string</a>,
<a href="#write_002dline">write-line</a>
</p>
<span id="Notes_003a-292"></span><h4 class="subsubheading">Notes:</h4>

<p><code>write-sequence</code> is identical in effect to iterating over the indicated
subsequence and writing one <i>element</i> at a time to <var>stream</var>, but
may be more efficient than the equivalent loop.  An efficient implementation
is more likely to exist for the case where the <var>sequence</var> is a
<i>vector</i> with the same <i>element type</i> as the <var>stream</var>.
</p>


<hr>
<span id="file_002dlength"></span><div class="header">
<p>
Next: <a href="#file_002dposition" accesskey="n" rel="next">file-position</a>, Previous: <a href="#write_002dsequence" accesskey="p" rel="prev">write-sequence</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">file-length</h4>
<span id="file_002dlength-_0028Function_0029"></span><h3 class="heading">file-length (Function)</h3>
<span id="index-file_002dlength-2"></span>
<span id="index-file_002dlength"></span>


<span id="Syntax_003a-440"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-file_002dlength-1">Function: <strong>file-length</strong> <em>stream <span class="roman">→</span> length</em></dt>
</dl>

<span id="Arguments-and-Values_003a-427"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream associated with a file</i>.
</p>
<p><var>length</var>&mdash;a non-negative <i>integer</i> or <code>nil</code>.
</p>
<span id="Description_003a-557"></span><h4 class="subsubheading">Description:</h4>

<p><code>file-length</code> returns the length of <var>stream</var>,  
or <code>nil</code>&nbsp;<!-- /@w -->if the length cannot be determined.
</p>
<p>For a binary file, the length is measured in units of
the <i>element type</i> of the <var>stream</var>.
</p>
<span id="Examples_003a-404"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-open-file (s &quot;decimal-digits.text&quot; 
                    :direction :output :if-exists :error)
   (princ &quot;0123456789&quot; s)
   (truename s))
<span class="roman">→</span> #P&quot;A:&gt;Joe&gt;decimal-digits.text.1&quot;
 (with-open-file (s &quot;decimal-digits.text&quot;)
   (file-length s))
<span class="roman">→</span> 10
</pre></div>


<span id="Exceptional-Situations_003a-205"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not a <i>stream associated with a file</i>.
</p>
<span id="See-Also_003a-454"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#open">open</a>
</p>

<hr>
<span id="file_002dposition"></span><div class="header">
<p>
Next: <a href="#file_002dstring_002dlength" accesskey="n" rel="next">file-string-length</a>, Previous: <a href="#file_002dlength" accesskey="p" rel="prev">file-length</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">file-position</h4>
<span id="file_002dposition-_0028Function_0029"></span><h3 class="heading">file-position (Function)</h3>
<span id="index-file_002dposition-6"></span>
<span id="index-file_002dposition"></span>


<span id="Syntax_003a-441"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-file_002dposition-4">Function: <strong>file-position</strong> <em>stream <span class="roman">→</span> position</em></dt>
</dl>
<dl>
<dt id="index-file_002dposition-5">Function: <strong>file-position</strong> <em>stream position-spec <span class="roman">→</span> success-p</em></dt>
</dl>

<span id="Arguments-and-Values_003a-428"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>position-spec</var>&mdash;a <i>file position designator</i>.
</p>
<p><var>position</var>&mdash;a <i>file position</i> or <code>nil</code>.
</p>
<p><var>success-p</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-558"></span><h4 class="subsubheading">Description:</h4>

<p>Returns or changes the current position within a <var>stream</var>.
</p>
<p>When <var>position-spec</var> is not supplied,
<code>file-position</code> returns the current <i>file position</i> in the <var>stream</var>,
or <code>nil</code>&nbsp;<!-- /@w -->if this cannot be determined.
</p>
<p>When <var>position-spec</var> is supplied,
the <i>file position</i> in <var>stream</var> is set to that <i>file position</i> (if possible).
<code>file-position</code> returns <i>true</i> 
if the repositioning is performed successfully,
or <i>false</i> if it is not.
</p>
<p>An <i>integer</i> returned by <code>file-position</code> of one argument 
should be acceptable as <var>position-spec</var> for use with the same file.
</p>
<p>For a character file,
performing a single <code>read-char</code> or <code>write-char</code> operation
may cause the file position to be increased by more than 1 because of
character-set translations (such as translating between the <span class="roman">Common Lisp</span>
<code>#\Newline</code> character and an external ASCII
carriage-return/line-feed sequence) and other aspects of the
implementation.  For a binary file, every <code>read-byte</code> 
or <code>write-byte</code>
operation increases the file position by 1.
</p>
<span id="Examples_003a-405"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (defun tester ()
   (let ((noticed '()) file-written)
     (flet ((notice (x) (push x noticed) x))
       (with-open-file (s &quot;test.bin&quot; 
                          :element-type '(unsigned-byte 8)
                          :direction :output
                          :if-exists :error)
          (notice (file-position s)) ;1
          (write-byte 5 s) 
          (write-byte 6 s)
          (let ((p (file-position s)))
            (notice p) ;2
            (notice (when p (file-position s (1- p))))) ;3
          (write-byte 7 s)
          (notice (file-position s)) ;4
          (setq file-written (truename s)))
        (with-open-file (s file-written
                           :element-type '(unsigned-byte 8)
                           :direction :input)
          (notice (file-position s)) ;5
          (let ((length (file-length s)))
            (notice length) ;6
            (when length
              (dotimes (i length)
                (notice (read-byte s)))))) ;7,...
        (nreverse noticed))))
<span class="roman">→</span> tester
 (tester)
<span class="roman">→</span> (0 2 T 2 0 2 5 7)
or<span class="roman">→</span> (0 2 NIL 3 0 3 5 6 7)
or<span class="roman">→</span> (NIL NIL NIL NIL NIL NIL)
</pre></div>


<span id="Side-Effects_003a-66"></span><h4 class="subsubheading">Side Effects:</h4>

<p>When the <var>position-spec</var> argument is supplied,
the <i>file position</i> in the <var>stream</var> might be moved.
</p>
<span id="Affected-By_003a-90"></span><h4 class="subsubheading">Affected By:</h4>

<p>The value returned by <code>file-position</code> increases monotonically
as input or output operations are performed.  
</p>
<span id="Exceptional-Situations_003a-206"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>position-spec</var> is supplied, but is too large or otherwise inappropriate, 
an error is signaled.
</p>
<span id="See-Also_003a-455"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#file_002dlength">file-length</a>,
<a href="#file_002dstring_002dlength">file-string-length</a>,
<a href="#open">open</a>
</p>
<span id="Notes_003a-293"></span><h4 class="subsubheading">Notes:</h4>

<p>Implementations that have character files represented
as a sequence of records of bounded size might choose to encode the
file position as, for example,
«record-number»*«max-record-size»+«character-within-record».
This is a valid encoding because it increases monotonically as
each character is read or written, though not necessarily by 1 at
each step.  An <i>integer</i> might then be considered &ldquo;inappropriate&rdquo;
as <var>position-spec</var> to <code>file-position</code> if, when decoded into
record number and character number, it turned out that the
supplied record was too short for the specified character number.
</p>

<hr>
<span id="file_002dstring_002dlength"></span><div class="header">
<p>
Next: <a href="#open" accesskey="n" rel="next">open</a>, Previous: <a href="#file_002dposition" accesskey="p" rel="prev">file-position</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">file-string-length</h4>
<span id="file_002dstring_002dlength-_0028Function_0029"></span><h3 class="heading">file-string-length (Function)</h3>
<span id="index-file_002dstring_002dlength-2"></span>
<span id="index-file_002dstring_002dlength"></span>



<span id="Syntax_003a-442"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-file_002dstring_002dlength-1">Function: <strong>file-string-length</strong> <em>stream object <span class="roman">→</span> length</em></dt>
</dl>

<span id="Arguments-and-Values_003a-429"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;an <i>output</i> <i>character</i> <i>file stream</i>.
</p>
<p><var>object</var>&mdash;a <i>string</i> or a <i>character</i>.
</p>
<p><var>length</var>&mdash;a non-negative <i>integer</i>, or <code>nil</code>.
</p>
<span id="Description_003a-559"></span><h4 class="subsubheading">Description:</h4>

<p><code>file-string-length</code> returns the difference between what 
<code>(file-position <var>stream</var>)</code> would be after writing 
<var>object</var> and its current value, or <code>nil</code>&nbsp;<!-- /@w -->if this cannot be determined.  
</p>
<p>The returned value corresponds to the current state of <var>stream</var>
at the time of the call and might not be 
the same if it is called again
when the state of the <i>stream</i> has changed.
</p>


<hr>
<span id="open"></span><div class="header">
<p>
Next: <a href="#stream_002dexternal_002dformat" accesskey="n" rel="next">stream-external-format</a>, Previous: <a href="#file_002dstring_002dlength" accesskey="p" rel="prev">file-string-length</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">open</h4>
<span id="open-_0028Function_0029"></span><h3 class="heading">open (Function)</h3>
<span id="index-open-3"></span>
<span id="index-open-1"></span>


<span id="Syntax_003a-443"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-open-2">Function: <strong>open</strong> <em>filespec <tt>&amp;key</tt> direction&nbsp;<span class="nolinebreak">element-type</span><!-- /@w --> <span class="nolinebreak">if-exists</span>&nbsp;<span class="nolinebreak">if-does-not-exist</span>&nbsp;<span class="nolinebreak">external-format</span><!-- /@w --> <span class="roman">→</span> stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-430"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>filespec</var>&mdash;a <i>pathname designator</i>.
</p>
<p><var>direction</var>&mdash;one of <tt>:input</tt>, <tt>:output</tt>, <tt>:io</tt>, or <tt>:probe</tt>.
The default is <tt>:input</tt>.
</p>
<p><var>element-type</var>&mdash;a <i>type specifier</i> 
for <i>recognizable subtype</i> of <code>character</code>;
or a <i>type specifier</i> 
for a <i>finite</i> <i>recognizable subtype</i> of <i>integer</i>;
or one of the <i>symbols</i> 
<tt>signed-byte</tt>,
<tt>unsigned-byte</tt>,
or <tt>:default</tt>.
The default is <code>character</code>.
</p>
<p><var>if-exists</var>&mdash;one of <tt>:error</tt>, <tt>:new-version</tt>, <tt>:rename</tt>,
<tt>:rename-and-delete</tt>, <tt>:overwrite</tt>, <tt>:append</tt>,
<tt>:supersede</tt>, or <code>nil</code>.
The default is <tt>:new-version</tt> if the version component of <var>filespec</var> is <tt>:newest</tt>,
or <tt>:error</tt> otherwise.
</p>
<p><var>if-does-not-exist</var>&mdash;one of <tt>:error</tt>, <tt>:create</tt>, or <code>nil</code>.
The default is <tt>:error</tt> if <var>direction</var> is <tt>:input</tt> 
or <var>if-exists</var> is <tt>:overwrite</tt> or <tt>:append</tt>;
<tt>:create</tt> if <var>direction</var> is <tt>:output</tt> or <tt>:io</tt>,
and <var>if-exists</var> is neither <tt>:overwrite</tt> nor <tt>:append</tt>;
or <code>nil</code>&nbsp;<!-- /@w -->when <var>direction</var> is <tt>:probe</tt>.
</p>
<p><var>external-format</var>&mdash;an <i>external file format designator</i>.
The default is <tt>:default</tt>.
</p>
<p><var>stream</var>&mdash;a <i>file stream</i> or <code>nil</code>.
</p>
<span id="Description_003a-560"></span><h4 class="subsubheading">Description:</h4>

<p><code>open</code> creates, opens, and returns a <i>file stream</i> 
that is connected to the file specified by <var>filespec</var>.
<var>Filespec</var> is the name of the file to be opened.  
If the <var>filespec</var> <i>designator</i> is a <i>stream</i>,
that <i>stream</i> is not closed first or otherwise affected.
</p>
<p>The keyword arguments to <code>open</code> specify the characteristics 
of the <i>file stream</i> that is returned, and how to handle errors.
</p>
<p>If <var>direction</var> is <tt>:input</tt>
or <tt>:probe</tt>,
or if <var>if-exists</var> is not <tt>:new-version</tt>
and the version component of the <var>filespec</var> is <tt>:newest</tt>,
then the file opened is that file already existing in the file system
that has a version greater than that of any other file in the file system
whose other pathname components are the same as those of <var>filespec</var>.
</p>
<p>An implementation is required to recognize all of 
the <code>open</code> keyword options 
and to do something reasonable in the context of the host operating
system.  
For example, if a file system does not support distinct file
versions and does not distinguish the notions of deletion and expunging,
<tt>:new-version</tt> might be treated the same as
<tt>:rename</tt> or <tt>:supersede</tt>, and <tt>:rename-and-delete</tt> might
be treated the same as <tt>:supersede</tt>.
</p>

<dl compact="compact">
<dt><tt>:direction</tt></dt>
<dd>

<p>These are the possible values for <var>direction</var>, 
and how they affect the nature of the <i>stream</i> that is created:
</p>

<dl compact="compact">
<dt><tt>:input</tt></dt>
<dd>

<p>Causes the creation of an <i>input</i> <i>file stream</i>.
</p>
</dd>
<dt><tt>:output</tt></dt>
<dd>             

<p>Causes the creation of an <i>output</i> <i>file stream</i>.
</p>
</dd>
<dt><tt>:io</tt></dt>
<dd>

<p>Causes the creation of a <i>bidirectional</i> <i>file stream</i>.
</p>
</dd>
<dt><tt>:probe</tt></dt>
<dd>

<p>Causes the creation of a &ldquo;no-directional&rdquo; <i>file stream</i>; 
in effect, the <i>file stream</i> is created 
and then closed prior to being returned by <code>open</code>.
</p></dd>
</dl>


</dd>
<dt><tt>:element-type</tt></dt>
<dd>

<p>The <var>element-type</var> specifies the unit of transaction for the <i>file stream</i>.
If it is <tt>:default</tt>,
the unit is determined by <i>file system</i>,
possibly based on the <i>file</i>.
</p>
</dd>
<dt><tt>:if-exists</tt></dt>
<dd>

<p><var>if-exists</var> specifies the action to be taken if <var>direction</var> is
<tt>:output</tt> or <tt>:io</tt> and a file of the name <var>filespec</var> 
already exists.
If <var>direction</var> is <tt>:input</tt>, not supplied, or <tt>:probe</tt>, 
<var>if-exists</var> is ignored.
These are the results of <code>open</code> as modified by <var>if-exists</var>:
</p>

<dl compact="compact">
<dt><tt>:error</tt></dt>
<dd>

<p>An error of <i>type</i> <code>file-error</code> is signaled.
</p>
</dd>
<dt><tt>:new-version</tt></dt>
<dd>

<p>A new file is created with a larger version number.
</p>
</dd>
<dt><tt>:rename</tt></dt>
<dd> 

<p>The existing file is renamed to some other name and then a new file is created.
</p>
</dd>
<dt><tt>:rename-and-delete</tt></dt>
<dd>

<p>The existing file is renamed to some other name,
then it is deleted but not expunged, and then a new file is created.
</p>
</dd>
<dt><tt>:overwrite</tt></dt>
<dd>

<p>Output operations on the <i>stream</i> destructively modify the existing file.
If <var>direction</var> is <tt>:io</tt> the file is opened in a bidirectional mode
that allows both reading and writing.  The file pointer is initially 
positioned at the beginning of the file; however, the file is not truncated
back to length zero when it is opened.
</p>
</dd>
<dt><tt>:append</tt></dt>
<dd>

<p>Output operations on the <i>stream</i> destructively modify the existing file.
The file pointer is initially positioned at the end of the file.
</p>
<p>If <var>direction</var> is <tt>:io</tt>,
the file is opened in a bidirectional mode that allows both reading and writing.
</p>
</dd>
<dt><tt>:supersede</tt></dt>
<dd>

<p>The existing file is superseded;
that is, a new file with the same name as the old one is created.
If possible, the implementation should not destroy the old file until the new
<i>stream</i> is closed.
</p>
</dd>
<dt><code>nil</code></dt>
<dd>

<p>No file or <i>stream</i> is created;
instead, <code>nil</code>&nbsp;<!-- /@w -->is returned to indicate failure.
</p></dd>
</dl>


</dd>
<dt><tt>:if-does-not-exist</tt></dt>
<dd>

<p><var>if-does-not-exist</var>
specifies the action to be taken if
a file of name <var>filespec</var> does not already exist.
These are the results of <code>open</code> as modified by <var>if-does-not-exist</var>:
</p>

<dl compact="compact">
<dt><tt>:error</tt></dt>
<dd>

<p>An error of <i>type</i> <code>file-error</code> is signaled.
</p>
</dd>
<dt><tt>:create</tt></dt>
<dd>

<p>An empty file is created.
Processing continues  as if the file 
had already existed but no processing as 
directed by <var>if-exists</var> is performed.
</p>
</dd>
<dt><code>nil</code></dt>
<dd>

<p>No file or <i>stream</i> is created;
instead, <code>nil</code>&nbsp;<!-- /@w -->is returned to indicate failure.
</p></dd>
</dl>


</dd>
<dt><tt>:external-format</tt></dt>
<dd>

<p>This option selects an <i>external file format</i> for the <i>file</i>:
The only <i>standardized</i> value for this option is <tt>:default</tt>,
although <i>implementations</i> are permitted to define additional 
<i>external file formats</i> and <i>implementation-dependent</i> values 
returned by <code>stream-external-format</code> can also be used by <i>conforming programs</i>.
</p>
<p>The <var>external-format</var> is meaningful for
any kind of <i>file stream</i> whose <i>element type</i>
is a <i>subtype</i> of <i>character</i>.
This option is ignored for <i>streams</i> for which it is not meaningful;
however, <i>implementations</i> may define other <i>element types</i> 
for which it is meaningful.
The consequences are unspecified if a <i>character</i> is written 
that cannot be represented by the given <i>external file format</i>.
</p></dd>
</dl>


<p>When a file is opened, a <i>file stream</i> is constructed to serve
as the file system&rsquo;s ambassador to the <span class="roman">Lisp</span>&nbsp;<!-- /@w -->environment;
operations on the <i>file stream</i> are reflected by operations on the file
in the file system.  
</p>
<p>A file can be deleted, renamed, or destructively modified by <code>open</code>.
</p>
<p>For information about opening relative pathnames,
see <a href="Filenames.html#Merging-Pathnames">Section 19.2.3 (Merging Pathnames)</a>.
</p>
<span id="Examples_003a-406"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (open <i>filespec</i> :direction :probe)  <span class="roman">→</span> #&lt;Closed Probe File Stream...&gt;
 (setq q (merge-pathnames (user-homedir-pathname) &quot;test&quot;))
<span class="roman">→</span> #&lt;PATHNAME :HOST NIL :DEVICE <i>device-name</i> :DIRECTORY <i>directory-name</i>
    :NAME &quot;test&quot; :TYPE NIL :VERSION :NEWEST&gt;
 (open <i>filespec</i> :if-does-not-exist :create) <span class="roman">→</span> #&lt;Input File Stream...&gt;
 (setq s (open <i>filespec</i> :direction :probe)) <span class="roman">→</span> #&lt;Closed Probe File Stream...&gt;
 (truename s) <span class="roman">→</span> #&lt;PATHNAME :HOST NIL :DEVICE <i>device-name</i> :DIRECTORY
    <i>directory-name</i> :NAME <i>filespec</i> :TYPE <i>extension</i> :VERSION 1&gt;
 (open s :direction :output :if-exists nil) <span class="roman">→</span> NIL 
</pre></div>


<span id="Affected-By_003a-91"></span><h4 class="subsubheading">Affected By:</h4>

<p>The nature and state of the host computer&rsquo;s <i>file system</i>.
</p>
<span id="Exceptional-Situations_003a-207"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>If <var>if-exists</var> is <tt>:error</tt>, (subject to the
constraints on the meaning of <var>if-exists</var> listed above),
an error of <i>type</i> <code>file-error</code> is signaled.                        
</p>
<p>If <var>if-does-not-exist</var> is <tt>:error</tt> (subject to the
constraints on the meaning of <var>if-does-not-exist</var> listed above),
an error of <i>type</i> <code>file-error</code> is signaled.
</p>
<p>If it is impossible for an implementation to handle some option
in a manner close to what is specified here,
an error of <i>type</i> <code>error</code> might be signaled.
</p>
<p>An error of <i>type</i> <code>file-error</code> is signaled if
<code>(wild-pathname-p <var>filespec</var>)</code> returns true.
</p>
<p>An error of <i>type</i> <code>error</code> is signaled if the <var>external-format</var> 
is not understood by the <i>implementation</i>.
</p>
<p>The various <i>file systems</i> in existence today have widely differing capabilities,
and some aspects of the <i>file system</i> are beyond the scope of this specification
to define.  A given <i>implementation</i> might not be able to support all of these options 
in exactly the manner stated.  An <i>implementation</i> is required to recognize all of 
these option keywords and to try to do something &ldquo;reasonable&rdquo; in the context of the 
host <i>file system</i>.  Where necessary to accomodate the <i>file system</i>,
an <i>implementation</i> deviate slightly from the semantics specified here without 
being disqualified for consideration as a <i>conforming implementation</i>.
If it is utterly impossible for an <i>implementation</i> to handle some option
in a manner similar to what is specified here, it may simply signal an error.
</p>
<p>With regard to the <tt>:element-type</tt> option, if a <i>type</i> is
requested that is not supported by the <i>file system</i>, a substitution of types 
such as that which goes on in <i>upgrading</i> is permissible.  As a minimum 
requirement, it should be the case that opening an <i>output</i> <i>stream</i>
to a <i>file</i> in a given <i>element type</i> and later opening 
an <i>input</i> <i>stream</i> to the same <i>file</i> in the same <i>element type</i>
should work compatibly.
</p>
<span id="See-Also_003a-456"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#with_002dopen_002dfile">with-open-file</a>,
<a href="#close">close</a>,
<a href="Filenames.html#pathname-_0028System-Class_0029">pathname (System Class)</a>,
<a href="Filenames.html#logical_002dpathname-_0028System-Class_0029">logical-pathname (System Class)</a>,
<a href="Filenames.html#Merging-Pathnames">Section 19.2.3 (Merging Pathnames)</a>,
<a href="Filenames.html#Pathnames-as-Filenames">Section 19.1.2 (Pathnames as Filenames)</a>
</p>
<span id="Notes_003a-294"></span><h4 class="subsubheading">Notes:</h4>


<p><code>open</code> does not automatically close the file when an abnormal
exit occurs.
</p>
<p>When <var>element-type</var> is a <i>subtype</i> of <code>character</code>,
<code>read-char</code> and/or <code>write-char</code> can be
used on the resulting <i>file stream</i>. 
</p>
<p>When <var>element-type</var> is a <i>subtype</i> of <i>integer</i>,
<code>read-byte</code> and/or <code>write-byte</code> can be used on the resulting <i>file stream</i>.
</p>
<p>When <var>element-type</var> is <tt>:default</tt>,
the <i>type</i> can be determined by using <code>stream-element-type</code>.
</p>

<hr>
<span id="stream_002dexternal_002dformat"></span><div class="header">
<p>
Next: <a href="#with_002dopen_002dfile" accesskey="n" rel="next">with-open-file</a>, Previous: <a href="#open" accesskey="p" rel="prev">open</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">stream-external-format</h4>
<span id="stream_002dexternal_002dformat-_0028Function_0029"></span><h3 class="heading">stream-external-format (Function)</h3>
<span id="index-stream_002dexternal_002dformat-2"></span>
<span id="index-stream_002dexternal_002dformat"></span>


<span id="Syntax_003a-444"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-stream_002dexternal_002dformat-1">Function: <strong>stream-external-format</strong> <em>stream <span class="roman">→</span> format</em></dt>
</dl>

<span id="Arguments-and-Values_003a-431"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>file stream</i>.
</p>
<p><var>format</var>&mdash;an <i>external file format</i>.
</p>
<span id="Description_003a-561"></span><h4 class="subsubheading">Description:</h4>

<p>Returns an <i>external file format designator</i> for the <var>stream</var>.
</p>
<span id="Examples_003a-407"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-open-file (stream &quot;test&quot; :direction :output)
   (stream-external-format stream))
<span class="roman">→</span> :DEFAULT
or<span class="roman">→</span> :ISO8859/1-1987
or<span class="roman">→</span> (:ASCII :SAIL)
or<span class="roman">→</span> ACME::PROPRIETARY-FILE-FORMAT-17
or<span class="roman">→</span> #&lt;FILE-FORMAT :ISO646-1983 2343673&gt;
</pre></div>


<span id="See-Also_003a-457"></span><h4 class="subsubheading">See Also:</h4>

<p>the <tt>:external-format</tt> <i>argument</i> to the <i>function</i> <code>open</code> and
the <code>with-open-file</code> <i>macro</i>.
</p>
<span id="Notes_003a-295"></span><h4 class="subsubheading">Notes:</h4>

<p>The <var>format</var> returned is not necessarily meaningful 
to other <i>implementations</i>.
</p>

<hr>
<span id="with_002dopen_002dfile"></span><div class="header">
<p>
Next: <a href="#close" accesskey="n" rel="next">close</a>, Previous: <a href="#stream_002dexternal_002dformat" accesskey="p" rel="prev">stream-external-format</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-open-file</h4>
<span id="with_002dopen_002dfile-_0028macro_0029"></span><h3 class="heading">with-open-file (macro)</h3>
<span id="index-with_002dopen_002dfile-2"></span>
<span id="index-with_002dopen_002dfile"></span>



<span id="Syntax_003a-445"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002dopen_002dfile-1">Macro: <strong>with-open-file</strong> <em><tt>(</tt>stream filespec <tt>{</tt>options<tt>}</tt>*<tt>)</tt> <tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> results</em></dt>
</dl>

<span id="Arguments-and-Values_003a-432"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a variable.
</p>
<p><var>filespec</var>&mdash;a <i>pathname designator</i>.
</p>
<p><var>options</var>&mdash;<i>forms</i>; evaluated.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <var>forms</var>.
</p>
<span id="Description_003a-562"></span><h4 class="subsubheading">Description:</h4>

<p><code>with-open-file</code> uses <code>open</code> to create a <i>file stream</i>
to <i>file</i> named by <var>filespec</var>. 
<var>Filespec</var> is the name of the file to be opened.
<var>Options</var> are used as keyword arguments to <code>open</code>.
</p>
<p>The <i>stream</i> <i>object</i> to which the <var>stream</var> <i>variable</i> 
is <i>bound</i> has <i>dynamic extent</i>;
its <i>extent</i> ends when the <i>form</i> is exited.
</p>
<p><code>with-open-file</code> evaluates the <var>forms</var> as an <i>implicit progn</i> 
with <var>stream</var> bound to 
the value returned by <code>open</code>.
</p>
<p>When control leaves the body, either normally or abnormally (such as by
use of <code>throw</code>), the file is automatically closed.  If a new
output file is being written, and control leaves abnormally, the file is
aborted and the file system is left, so far as possible, as if the file
had never been opened.  
</p>
<p>It is possible by the use of <code>:if-exists nil</code> 
or <code>:if-does-not-exist nil</code> for
<var>stream</var> to be bound to <code>nil</code>.
Users of <code>:if-does-not-exist nil</code> should check for a valid <i>stream</i>.
</p>
<p>The consequences are undefined if an attempt is made to <i>assign</i> the 
<var>stream</var> <i>variable</i>.  The compiler may choose to issue a
warning if such an attempt is detected.
</p>
<span id="Examples_003a-408"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq p (merge-pathnames &quot;test&quot;))
<span class="roman">→</span> #&lt;PATHNAME :HOST NIL :DEVICE <i>device-name</i> :DIRECTORY <i>directory-name</i>
    :NAME &quot;test&quot; :TYPE NIL :VERSION :NEWEST&gt;
 (with-open-file (s p :direction :output :if-exists :supersede)
    (format s &quot;Here are a couple~%of test data lines~%&quot;)) <span class="roman">→</span> NIL
 (with-open-file (s p)
    (do ((l (read-line s) (read-line s nil 'eof)))
        ((eq l 'eof) &quot;Reached end of file.&quot;)
     (format t &quot;~&amp;*** ~A~%&quot; l)))
▷ *** Here are a couple
▷ *** of test data lines
<span class="roman">→</span> &quot;Reached end of file.&quot;
</pre></div>


<div class="lisp">
<pre class="lisp">;; Normally one would not do this intentionally because it is
;; not perspicuous, but beware when using :IF-DOES-NOT-EXIST NIL
;; that this doesn't happen to you accidentally...
 (with-open-file (foo &quot;no-such-file&quot; :if-does-not-exist nil)
   (read foo))
▷ <kbd>hello?</kbd>
<span class="roman">→</span> HELLO? ;This value was read from the terminal, not a file!

;; Here's another bug to avoid...
 (with-open-file (foo &quot;no-such-file&quot; :direction :output :if-does-not-exist nil)
   (format foo &quot;Hello&quot;))
<span class="roman">→</span> &quot;Hello&quot; ;FORMAT got an argument of NIL!
</pre></div>


<span id="Side-Effects_003a-67"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Creates a <i>stream</i> to the <i>file</i> named by <var>filename</var> (upon entry),
and closes the <i>stream</i> (upon exit).
In some <i>implementations</i>,
the <i>file</i> might be locked in some way while it is open.
If the <i>stream</i> is an <i>output</i> <i>stream</i>,
a <i>file</i> might be created.
</p>
<span id="Affected-By_003a-92"></span><h4 class="subsubheading">Affected By:</h4>

<p>The host computer&rsquo;s file system.
</p>
<span id="Exceptional-Situations_003a-208"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>See the <i>function</i> <a href="#open">open</a>.
</p>
<span id="See-Also_003a-458"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#open">open</a>,
<a href="#close">close</a>,
<a href="Filenames.html#pathname-_0028System-Class_0029">pathname (System Class)</a>,
<a href="Filenames.html#logical_002dpathname-_0028System-Class_0029">logical-pathname (System Class)</a>,
<a href="Filenames.html#Pathnames-as-Filenames">Section 19.1.2 (Pathnames as Filenames)</a>
</p>



<hr>
<span id="close"></span><div class="header">
<p>
Next: <a href="#with_002dopen_002dstream" accesskey="n" rel="next">with-open-stream</a>, Previous: <a href="#with_002dopen_002dfile" accesskey="p" rel="prev">with-open-file</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">close</h4>
<span id="close-_0028Function_0029"></span><h3 class="heading">close (Function)</h3>
<span id="index-close-2"></span>
<span id="index-close"></span>


<span id="Syntax_003a-446"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-close-1">Function: <strong>close</strong> <em>stream <tt>&amp;key</tt> abort <span class="roman">→</span> result</em></dt>
</dl>

<span id="Arguments-and-Values_003a-433"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;a <i>stream</i> (either <i>open</i> or <i>closed</i>).
</p>
<p><var>abort</var>&mdash;a <i>generalized boolean</i>.
The default is <i>false</i>.
</p>
<p><var>result</var>&mdash;<code>t</code>&nbsp;<!-- /@w -->if the <var>stream</var> was <i>open</i> at the time it was
received as an <i>argument</i>,
or <i>implementation-dependent</i> otherwise.
</p>
<span id="Description_003a-563"></span><h4 class="subsubheading">Description:</h4>

<p><code>close</code> closes <var>stream</var>. 
Closing a <i>stream</i> means
that it may no longer be used in input or output operations.
The act of <i>closing</i> a <i>file stream</i>
ends the association between the <i>stream</i> and its associated <i>file</i>; 
the transaction with the <i>file system</i> is terminated,
and input/output may no longer be performed on the <i>stream</i>. 
</p>
<p>If <var>abort</var> is <i>true</i>, an attempt is made to clean up any side
effects of having created <var>stream</var>.
If <var>stream</var> performs output to a file
that was created when the <i>stream</i> was created, the
file is deleted and any previously existing file is not superseded.
</p>
<p>It is permissible to close an already closed <i>stream</i>,
but in that case the <var>result</var> is <i>implementation-dependent</i>.
</p>
<p>After <var>stream</var> is closed, it is still possible to perform 
the following query operations upon it:
<code>streamp</code>, <code>pathname</code>, <code>truename</code>, 
<code>merge-pathnames</code>, <code>pathname-host</code>, <code>pathname-device</code>,
<code>pathname-directory</code>,<code>pathname-name</code>, 
<code>pathname-type</code>, <code>pathname-version</code>, <code>namestring</code>, 
<code>file-namestring</code>, <code>directory-namestring</code>, 
<code>host-namestring</code>, <code>enough-namestring</code>, <code>open</code>,
<code>probe-file</code>, and <code>directory</code>. 
</p>
<p>The effect of <code>close</code> on a <i>constructed stream</i> is 
to close the argument <var>stream</var> only. 
There is no effect on the <i>constituents</i> of <i>composite streams</i>.
</p>
<p>For a <i>stream</i> created with <code>make-string-output-stream</code>,
the result of <code>get-output-stream-string</code> is unspecified after <code>close</code>.
</p>
<span id="Examples_003a-409"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq s (make-broadcast-stream)) <span class="roman">→</span> #&lt;BROADCAST-STREAM&gt;
 (close s) <span class="roman">→</span> T
 (output-stream-p s) <span class="roman">→</span> <i>true</i>
</pre></div>


<span id="Side-Effects_003a-68"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>stream</var> is <i>closed</i> (if necessary).
If <var>abort</var> is <i>true</i> and the <var>stream</var> is
an <i>output</i> <i>file stream</i>, its associated <i>file</i>
might be deleted.
</p>
<span id="See-Also_003a-459"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#open">open</a>
</p>

<hr>
<span id="with_002dopen_002dstream"></span><div class="header">
<p>
Next: <a href="#listen" accesskey="n" rel="next">listen</a>, Previous: <a href="#close" accesskey="p" rel="prev">close</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-open-stream</h4>
<span id="with_002dopen_002dstream-_0028Macro_0029"></span><h3 class="heading">with-open-stream (Macro)</h3>
<span id="index-with_002dopen_002dstream-2"></span>
<span id="index-with_002dopen_002dstream"></span>



<span id="Syntax_003a-447"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002dopen_002dstream-1">Macro: <strong>with-open-stream</strong> <em><tt>(</tt>var stream<tt>)</tt> <tt>{</tt>declaration<tt>}</tt>*  <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-434"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>var</var>&mdash;a <i>variable</i> <i>name</i>.
</p>
<p><var>stream</var>&mdash;a <i>form</i>; evaluated to produce a <i>stream</i>.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;the <i>values</i> returned by the <var>forms</var>.
</p>
<span id="Description_003a-564"></span><h4 class="subsubheading">Description:</h4>

<p><code>with-open-stream</code> performs a series of operations on 
<var>stream</var>, returns a value, and then closes the <var>stream</var>.
</p>
<p><var>Var</var> is bound to the value of <var>stream</var>,
and then <var>forms</var> are executed
as an <i>implicit progn</i>. 
<var>stream</var>
is automatically closed on exit from <code>with-open-stream</code>,
no matter whether the exit is normal or abnormal.
The <var>stream</var> has <i>dynamic extent</i>;
its <i>extent</i> ends when the <i>form</i> is exited.
</p>
<p>The consequences are undefined if an attempt is made to <i>assign</i> the 
the <i>variable</i> <var>var</var> with the <var>forms</var>.
</p>
<span id="Examples_003a-410"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-open-stream (s (make-string-input-stream &quot;1 2 3 4&quot;))
    (+ (read s) (read s) (read s))) <span class="roman">→</span> 6
</pre></div>


<span id="Side-Effects_003a-69"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>stream</var> is closed (upon exit).
</p>
<span id="See-Also_003a-460"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#close">close</a>
</p>


<hr>
<span id="listen"></span><div class="header">
<p>
Next: <a href="#clear_002dinput" accesskey="n" rel="next">clear-input</a>, Previous: <a href="#with_002dopen_002dstream" accesskey="p" rel="prev">with-open-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">listen</h4>
<span id="listen-_0028Function_0029"></span><h3 class="heading">listen (Function)</h3>
<span id="index-listen-2"></span>
<span id="index-listen"></span>


<span id="Syntax_003a-448"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-listen-1">Function: <strong>listen</strong> <em><tt>&amp;optional</tt> input-stream <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-435"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-565"></span><h4 class="subsubheading">Description:</h4>

<p>Returns <i>true</i> if 
there is a character immediately available from <var>input-stream</var>;
otherwise, returns <i>false</i>.
On a non-interactive <var>input-stream</var>,
<code>listen</code> returns <i>true</i> except when at <i>end of file</i><sub>1</sub>
If an <i>end of file</i> is encountered, <code>listen</code> returns <i>false</i>.
<code>listen</code> is intended to be used 
when <var>input-stream</var> obtains characters
from an interactive device such as a keyboard.  
</p>
<span id="Examples_003a-411"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (progn (unread-char (read-char)) (list (listen) (read-char)))
▷ <kbd>1</kbd>
<span class="roman">→</span> (T #\1)
 (progn (clear-input) (listen))
<span class="roman">→</span> NIL ;Unless you're a very fast typist!
</pre></div>


<span id="Affected-By_003a-93"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>
</p>
<span id="See-Also_003a-461"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#interactive_002dstream_002dp">interactive-stream-p</a>,
<a href="#read_002dchar_002dno_002dhang">read-char-no-hang</a>
</p>

<hr>
<span id="clear_002dinput"></span><div class="header">
<p>
Next: <a href="#finish_002doutput_003b-force_002doutput_003b-clear_002doutput" accesskey="n" rel="next">finish-output; force-output; clear-output</a>, Previous: <a href="#listen" accesskey="p" rel="prev">listen</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">clear-input</h4>
<span id="clear_002dinput-_0028Function_0029"></span><h3 class="heading">clear-input (Function)</h3>
<span id="index-clear_002dinput-2"></span>
<span id="index-clear_002dinput"></span>


<span id="Syntax_003a-449"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-clear_002dinput-1">Function: <strong>clear-input</strong> <em><tt>&amp;optional</tt> input-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-436"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream designator</i>.
The default is <i>standard input</i>.
</p>
<span id="Description_003a-566"></span><h4 class="subsubheading">Description:</h4>

<p>Clears any available input from <var>input-stream</var>.
</p>
<p>If <code>clear-input</code> does not make sense for <var>input-stream</var>, 
then <code>clear-input</code> does nothing. 
</p>
<span id="Examples_003a-412"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp">;; The exact I/O behavior of this example might vary from implementation
;; to implementation depending on the kind of interactive buffering that
;; occurs.  (The call to SLEEP here is intended to help even out the 
;; differences in implementations which do not do line-at-a-time buffering.)

(defun read-sleepily (&amp;optional (clear-p nil) (zzz 0))
  (list (progn (print '&gt;) (read))
        ;; Note that input typed within the first ZZZ seconds 
        ;; will be discarded.
        (progn (print '&gt;) 
               (if zzz (sleep zzz))
               (print '&gt;&gt;)
               (if clear-p (clear-input))
               (read))))

(read-sleepily)
▷ &gt; <kbd>10</kbd>
▷ &gt;
▷ &gt;&gt; <kbd>20</kbd>
<span class="roman">→</span> (10 20)

(read-sleepily t)
▷ &gt; <kbd>10</kbd>
▷ &gt;
▷ &gt;&gt; <kbd>20</kbd>
<span class="roman">→</span> (10 20)

(read-sleepily t 10)
▷ &gt; <kbd>10</kbd>
▷ &gt; <kbd>20</kbd>  ; Some implementations won't echo typeahead here.
▷ &gt;&gt; <kbd>30</kbd>
<span class="roman">→</span> (10 30)
</pre></div>


<span id="Side-Effects_003a-70"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>input-stream</var> is modified.
</p>
<span id="Affected-By_003a-94"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-input*</code>
</p>
<span id="Exceptional-Situations_003a-209"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>input-stream</var> is not a <i>stream designator</i>.
</p>
<span id="See-Also_003a-462"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#clear_002doutput">clear-output</a>
</p>

<hr>
<span id="finish_002doutput_003b-force_002doutput_003b-clear_002doutput"></span><div class="header">
<p>
Next: <a href="#y_002dor_002dn_002dp_003b-yes_002dor_002dno_002dp" accesskey="n" rel="next">y-or-n-p; yes-or-no-p</a>, Previous: <a href="#clear_002dinput" accesskey="p" rel="prev">clear-input</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">finish-output; force-output; clear-output</h4>
<span id="finish_002doutput_002c-force_002doutput_002c-clear_002doutput-_0028Function_0029"></span><h3 class="heading">finish-output, force-output, clear-output (Function)</h3>
<span id="index-finish_002doutput-2"></span>
<span id="index-finish_002doutput"></span>
<span id="index-force_002doutput-2"></span>
<span id="index-force_002doutput"></span>
<span id="index-clear_002doutput-2"></span>
<span id="index-clear_002doutput"></span>
<span id="clear_002doutput"></span>

<span id="Syntax_003a-450"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-finish_002doutput-1">Function: <strong>finish-output</strong> <em><tt>&amp;optional</tt> output-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>
<dl>
<dt id="index-force_002doutput-1">Function: <strong>force-output</strong> <em><tt>&amp;optional</tt> output-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>
<dl>
<dt id="index-clear_002doutput-1">Function: <strong>clear-output</strong> <em><tt>&amp;optional</tt> output-stream <span class="roman">→</span> <code>nil</code></em></dt>
</dl>

<span id="Arguments-and-Values_003a-437"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream designator</i>.
The default is <i>standard output</i>.
</p>
<span id="Description_003a-567"></span><h4 class="subsubheading">Description:</h4>

<p><code>finish-output</code>, <code>force-output</code>, and <code>clear-output</code>
exercise control over the internal handling of buffered stream output.  
</p>
<p><code>finish-output</code> attempts to ensure that any buffered output
sent to <var>output-stream</var> has reached its destination, and then returns.
</p>
<p><code>force-output</code> initiates the emptying of any
internal buffers but does not wait for completion
or acknowledgment to return.
</p>
<p><code>clear-output</code> attempts to abort any
outstanding output operation in progress in order
to allow as little output as possible
to continue to the destination.  
</p>
<p>If any of these operations does not make sense for <var>output-stream</var>, 
then it does nothing. 
The precise actions of these <i>functions</i> are <i>implementation-dependent</i>.
</p>
<span id="Examples_003a-413"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp">;; Implementation A
 (progn (princ &quot;am i seen?&quot;) (clear-output))
<span class="roman">→</span> NIL

;; Implementation B
 (progn (princ &quot;am i seen?&quot;) (clear-output))
▷ am i seen?
<span class="roman">→</span> NIL
</pre></div>


<span id="Affected-By_003a-95"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*standard-output*</code>
</p>
<span id="Exceptional-Situations_003a-210"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>output-stream</var> is not a <i>stream designator</i>.
</p>
<span id="See-Also_003a-463"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#clear_002dinput">clear-input</a>
</p>

<hr>
<span id="y_002dor_002dn_002dp_003b-yes_002dor_002dno_002dp"></span><div class="header">
<p>
Next: <a href="#make_002dsynonym_002dstream" accesskey="n" rel="next">make-synonym-stream</a>, Previous: <a href="#finish_002doutput_003b-force_002doutput_003b-clear_002doutput" accesskey="p" rel="prev">finish-output; force-output; clear-output</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">y-or-n-p; yes-or-no-p</h4>
<span id="y_002dor_002dn_002dp_002c-yes_002dor_002dno_002dp-_0028Function_0029"></span><h3 class="heading">y-or-n-p, yes-or-no-p (Function)</h3>
<span id="index-y_002dor_002dn_002dp-2"></span>
<span id="index-y_002dor_002dn_002dp"></span>
<span id="index-yes_002dor_002dno_002dp-2"></span>
<span id="index-yes_002dor_002dno_002dp"></span>


<span id="Syntax_003a-451"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-y_002dor_002dn_002dp-1">Function: <strong>y-or-n-p</strong> <em><tt>&amp;optional</tt> control <tt>&amp;rest</tt> arguments <span class="roman">→</span> generalized-boolean</em></dt>
</dl>
<dl>
<dt id="index-yes_002dor_002dno_002dp-1">Function: <strong>yes-or-no-p</strong> <em><tt>&amp;optional</tt> control <tt>&amp;rest</tt> arguments <span class="roman">→</span> generalized-boolean</em></dt>
</dl>

<span id="Arguments-and-Values_003a-438"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>control</var>&mdash;a <i>format control</i>.
</p>
<p><var>arguments</var>&mdash;<i>format arguments</i> for <var>control</var>.
</p>
<p><var>generalized-boolean</var>&mdash;a <i>generalized boolean</i>.
</p>
<span id="Description_003a-568"></span><h4 class="subsubheading">Description:</h4>

<p>These functions ask a question and parse a response from the user.
They return <i>true</i> if the answer is affirmative,
or <i>false</i> if the answer is negative.
</p>
<p><code>y-or-n-p</code> is for asking the user a question whose answer is either
&ldquo;yes&rdquo; or &ldquo;no.&rdquo;  
It is intended that the reply require
the user to answer a yes-or-no question with a single
character.
<code>yes-or-no-p</code> is also for asking the user a question
whose answer is either &ldquo;Yes&rdquo; or &ldquo;No.&rdquo;  
It is intended that the reply require
the user to take more action than just a single keystroke, such as typing
the full word <code>yes</code> or <code>no</code> followed by a newline.
</p>
<p><code>y-or-n-p</code> types out a message (if supplied), reads an answer
in some <i>implementation-dependent</i> manner (intended to be short and simple,
such as reading a single character such as <code>Y</code> or <code>N</code>).
<code>yes-or-no-p</code> types out a message (if supplied), 
attracts the user&rsquo;s attention (for example, by ringing
the terminal&rsquo;s bell),
and reads an answer
in some <i>implementation-dependent</i> manner (intended to be multiple characters,
such as <code>YES</code> or <code>NO</code>).
</p>
<p>If <var>format-control</var> is supplied and not <code>nil</code>,
then a <code>fresh-line</code> operation is performed; then
a message is printed as if <var>format-control</var> and <var>arguments</var>
were given to <code>format</code>.
In any case, <code>yes-or-no-p</code> and <code>y-or-n-p</code> will provide 
a prompt such as &ldquo;<code>(Y or N)</code>&rdquo; or &ldquo;<code>(Yes or No)</code>&rdquo; if appropriate.
</p>
<p>All input and output are performed using <i>query I/O</i>.
</p>
<span id="Examples_003a-414"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (y-or-n-p &quot;(t or nil) given by&quot;)
▷ (t or nil) given by (Y or N) <kbd>Y</kbd>
<span class="roman">→</span> <i>true</i>
 (yes-or-no-p &quot;a ~S message&quot; 'frightening) 
▷ a FRIGHTENING message (Yes or No) <kbd>no</kbd>
<span class="roman">→</span> <i>false</i>
 (y-or-n-p &quot;Produce listing file?&quot;) 
▷ Produce listing file?
▷ Please respond with Y or N. <kbd>n</kbd>
<span class="roman">→</span> <i>false</i>
</pre></div>


<span id="Side-Effects_003a-71"></span><h4 class="subsubheading">Side Effects:</h4>

<p>Output to and input from <i>query I/O</i> will occur.
</p>
<span id="Affected-By_003a-96"></span><h4 class="subsubheading">Affected By:</h4>

<p><code>*query-io*</code>.
</p>
<span id="See-Also_003a-464"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="Printer.html#format">format</a>
</p>
<span id="Notes_003a-296"></span><h4 class="subsubheading">Notes:</h4>

<p><code>yes-or-no-p</code> and <code>yes-or-no-p</code> do not add question marks
to the end of the prompt string, so any desired question mark or other
punctuation should be explicitly included in the text query.
</p>

<hr>
<span id="make_002dsynonym_002dstream"></span><div class="header">
<p>
Next: <a href="#synonym_002dstream_002dsymbol" accesskey="n" rel="next">synonym-stream-symbol</a>, Previous: <a href="#y_002dor_002dn_002dp_003b-yes_002dor_002dno_002dp" accesskey="p" rel="prev">y-or-n-p; yes-or-no-p</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-synonym-stream</h4>
<span id="make_002dsynonym_002dstream-_0028Function_0029"></span><h3 class="heading">make-synonym-stream (Function)</h3>
<span id="index-make_002dsynonym_002dstream-2"></span>
<span id="index-make_002dsynonym_002dstream"></span>


<span id="Syntax_003a-452"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dsynonym_002dstream-1">Function: <strong>make-synonym-stream</strong> <em>symbol <span class="roman">→</span> synonym-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-439"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>symbol</var>&mdash;a <i>symbol</i> that names a <i>dynamic variable</i>.
</p>
<p><var>synonym-stream</var>&mdash;a <i>synonym stream</i>.
</p>
<span id="Description_003a-569"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>synonym stream</i> whose <i>synonym stream symbol</i> is <var>symbol</var>.
</p>
<span id="Examples_003a-415"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq a-stream (make-string-input-stream &quot;a-stream&quot;)
        b-stream (make-string-input-stream &quot;b-stream&quot;))
<span class="roman">→</span> #&lt;String Input Stream&gt; 
 (setq s-stream (make-synonym-stream 'c-stream))
<span class="roman">→</span> #&lt;SYNONYM-STREAM for C-STREAM&gt; 
 (setq c-stream a-stream)
<span class="roman">→</span> #&lt;String Input Stream&gt; 
 (read s-stream) <span class="roman">→</span> A-STREAM
 (setq c-stream b-stream)
<span class="roman">→</span> #&lt;String Input Stream&gt; 
 (read s-stream) <span class="roman">→</span> B-STREAM
</pre></div>


<span id="Exceptional-Situations_003a-211"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal <code>type-error</code> if its argument is not a <i>symbol</i>.
</p>
<span id="See-Also_003a-465"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#Stream-Concepts">Section 21.1 (Stream Concepts)</a>
</p>

<hr>
<span id="synonym_002dstream_002dsymbol"></span><div class="header">
<p>
Next: <a href="#broadcast_002dstream_002dstreams" accesskey="n" rel="next">broadcast-stream-streams</a>, Previous: <a href="#make_002dsynonym_002dstream" accesskey="p" rel="prev">make-synonym-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">synonym-stream-symbol</h4>
<span id="synonym_002dstream_002dsymbol-_0028Function_0029"></span><h3 class="heading">synonym-stream-symbol (Function)</h3>
<span id="index-synonym_002dstream_002dsymbol-2"></span>
<span id="index-synonym_002dstream_002dsymbol"></span>



<span id="Syntax_003a-453"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-synonym_002dstream_002dsymbol-1">Function: <strong>synonym-stream-symbol</strong> <em>synonym-stream <span class="roman">→</span> symbol</em></dt>
</dl>

<span id="Arguments-and-Values_003a-440"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>synonym-stream</var>&mdash;a <i>synonym stream</i>.
</p>
<p><var>symbol</var>&mdash;a <i>symbol</i>.
</p>
<span id="Description_003a-570"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the <i>symbol</i> whose <code>symbol-value</code> the <var>synonym-stream</var> is using.  
</p>
<span id="See-Also_003a-466"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dsynonym_002dstream">make-synonym-stream</a>
</p>


<hr>
<span id="broadcast_002dstream_002dstreams"></span><div class="header">
<p>
Next: <a href="#make_002dbroadcast_002dstream" accesskey="n" rel="next">make-broadcast-stream</a>, Previous: <a href="#synonym_002dstream_002dsymbol" accesskey="p" rel="prev">synonym-stream-symbol</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">broadcast-stream-streams</h4>
<span id="broadcast_002dstream_002dstreams-_0028Function_0029"></span><h3 class="heading">broadcast-stream-streams (Function)</h3>
<span id="index-broadcast_002dstream_002dstreams-2"></span>
<span id="index-broadcast_002dstream_002dstreams"></span>



<span id="Syntax_003a-454"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-broadcast_002dstream_002dstreams-1">Function: <strong>broadcast-stream-streams</strong> <em>broadcast-stream <span class="roman">→</span> streams</em></dt>
</dl>

<span id="Arguments-and-Values_003a-441"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>broadcast-stream</var>&mdash;a <i>broadcast stream</i>.
</p>
<p><var>streams</var>&mdash;a <i>list</i> of <i>streams</i>.
</p>
<span id="Description_003a-571"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>list</i> of output <i>streams</i> that constitute
all the <i>streams</i> to which the <var>broadcast-stream</var> is broadcasting.  
</p>


<hr>
<span id="make_002dbroadcast_002dstream"></span><div class="header">
<p>
Next: <a href="#make_002dtwo_002dway_002dstream" accesskey="n" rel="next">make-two-way-stream</a>, Previous: <a href="#broadcast_002dstream_002dstreams" accesskey="p" rel="prev">broadcast-stream-streams</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-broadcast-stream</h4>
<span id="make_002dbroadcast_002dstream-_0028Function_0029"></span><h3 class="heading">make-broadcast-stream (Function)</h3>
<span id="index-make_002dbroadcast_002dstream-2"></span>
<span id="index-make_002dbroadcast_002dstream"></span>


<span id="Syntax_003a-455"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dbroadcast_002dstream-1">Function: <strong>make-broadcast-stream</strong> <em><tt>&amp;rest</tt> streams <span class="roman">→</span> broadcast-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-442"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>stream</var>&mdash;an <i>output</i> <i>stream</i>.
</p>

<p><var>broadcast-stream</var>&mdash;a <i>broadcast stream</i>.
</p>
<span id="Description_003a-572"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>broadcast stream</i>.
</p>
<span id="Examples_003a-416"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (setq a-stream (make-string-output-stream)
        b-stream (make-string-output-stream)) <span class="roman">→</span> #&lt;String Output Stream&gt;
 (format (make-broadcast-stream a-stream b-stream)
          &quot;this will go to both streams&quot;) <span class="roman">→</span> NIL
 (get-output-stream-string a-stream) <span class="roman">→</span> &quot;this will go to both streams&quot;
 (get-output-stream-string b-stream) <span class="roman">→</span> &quot;this will go to both streams&quot;
</pre></div>


<span id="Exceptional-Situations_003a-212"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>stream</var> is not
an <i>output</i> <i>stream</i>.
</p>
<span id="See-Also_003a-467"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#broadcast_002dstream_002dstreams">broadcast-stream-streams</a>
</p>

<hr>
<span id="make_002dtwo_002dway_002dstream"></span><div class="header">
<p>
Next: <a href="#two_002dway_002dstream_002dinput_002dstream_003b-two_002dway_002dstream_002doutput_002dstream" accesskey="n" rel="next">two-way-stream-input-stream; two-way-stream-output-stream</a>, Previous: <a href="#make_002dbroadcast_002dstream" accesskey="p" rel="prev">make-broadcast-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-two-way-stream</h4>
<span id="make_002dtwo_002dway_002dstream-_0028Function_0029"></span><h3 class="heading">make-two-way-stream (Function)</h3>
<span id="index-make_002dtwo_002dway_002dstream-2"></span>
<span id="index-make_002dtwo_002dway_002dstream"></span>


<span id="Syntax_003a-456"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dtwo_002dway_002dstream-1">Function: <strong>make-two-way-stream</strong> <em>input-stream output-stream <span class="roman">→</span> two-way-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-443"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>output-stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>two-way-stream</var>&mdash;a <i>two-way stream</i>.
</p>
<span id="Description_003a-573"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>two-way stream</i> 
that gets  its input  from <var>input-stream</var>
and  sends its output to   <var>output-stream</var>.
</p>
<span id="Examples_003a-417"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-output-to-string (out)
    (with-input-from-string (in &quot;input...&quot;)
      (let ((two (make-two-way-stream in out)))
        (format two &quot;output...&quot;)
        (setq what-is-read (read two))))) <span class="roman">→</span> &quot;output...&quot;
 what-is-read <span class="roman">→</span> INPUT... 
</pre></div>


<span id="Exceptional-Situations_003a-213"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal an error of <i>type</i> <code>type-error</code> if <var>input-stream</var> is not an <i>input</i> <i>stream</i>.
Should signal an error of <i>type</i> <code>type-error</code> if <var>output-stream</var> is not an <i>output</i> <i>stream</i>.
</p>

<hr>
<span id="two_002dway_002dstream_002dinput_002dstream_003b-two_002dway_002dstream_002doutput_002dstream"></span><div class="header">
<p>
Next: <a href="#echo_002dstream_002dinput_002dstream_003b-echo_002dstream_002doutput_002dstream" accesskey="n" rel="next">echo-stream-input-stream; echo-stream-output-stream</a>, Previous: <a href="#make_002dtwo_002dway_002dstream" accesskey="p" rel="prev">make-two-way-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">two-way-stream-input-stream; two-way-stream-output-stream</h4>
<span id="two_002dway_002dstream_002dinput_002dstream_002c-two_002dway_002dstream_002doutput_002dstream-_0028Function_0029"></span><h3 class="heading">two-way-stream-input-stream, two-way-stream-output-stream (Function)</h3>
<span id="index-two_002dway_002dstream_002dinput_002dstream-2"></span>
<span id="index-two_002dway_002dstream_002dinput_002dstream"></span>
<span id="index-two_002dway_002dstream_002doutput_002dstream-2"></span>
<span id="index-two_002dway_002dstream_002doutput_002dstream"></span>
<span id="two_002dway_002dstream_002dinput_002dstream"></span><span id="two_002dway_002dstream_002doutput_002dstream"></span>


<span id="Syntax_003a-457"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-two_002dway_002dstream_002dinput_002dstream-1">Function: <strong>two-way-stream-input-stream</strong> <em>two-way-stream <span class="roman">→</span> input-stream</em></dt>
</dl>
<dl>
<dt id="index-two_002dway_002dstream_002doutput_002dstream-1">Function: <strong>two-way-stream-output-stream</strong> <em>two-way-stream <span class="roman">→</span> output-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-444"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>two-way-stream</var>&mdash;a <i>two-way stream</i>.
</p>
<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream</i>.
</p>
<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream</i>.
</p>
<span id="Description_003a-574"></span><h4 class="subsubheading">Description:</h4>

<p><code>two-way-stream-input-stream</code> returns the <i>stream</i>
from which <var>two-way-stream</var> receives input.
</p>
<p><code>two-way-stream-output-stream</code> returns the <i>stream</i> 
to which <var>two-way-stream</var> sends output.
</p>


<hr>
<span id="echo_002dstream_002dinput_002dstream_003b-echo_002dstream_002doutput_002dstream"></span><div class="header">
<p>
Next: <a href="#make_002decho_002dstream" accesskey="n" rel="next">make-echo-stream</a>, Previous: <a href="#two_002dway_002dstream_002dinput_002dstream_003b-two_002dway_002dstream_002doutput_002dstream" accesskey="p" rel="prev">two-way-stream-input-stream; two-way-stream-output-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">echo-stream-input-stream; echo-stream-output-stream</h4>
<span id="echo_002dstream_002dinput_002dstream_002c-echo_002dstream_002doutput_002dstream-_0028Function_0029"></span><h3 class="heading">echo-stream-input-stream, echo-stream-output-stream (Function)</h3>
<span id="index-echo_002dstream_002dinput_002dstream-2"></span>
<span id="index-echo_002dstream_002dinput_002dstream"></span>
<span id="index-echo_002dstream_002doutput_002dstream-2"></span>
<span id="index-echo_002dstream_002doutput_002dstream"></span>
<span id="echo_002dstream_002dinput_002dstream"></span><span id="echo_002dstream_002doutput_002dstream"></span>


<span id="Syntax_003a-458"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-echo_002dstream_002dinput_002dstream-1">Function: <strong>echo-stream-input-stream</strong> <em>echo-stream <span class="roman">→</span> input-stream</em></dt>
</dl>
<dl>
<dt id="index-echo_002dstream_002doutput_002dstream-1">Function: <strong>echo-stream-output-stream</strong> <em>echo-stream <span class="roman">→</span> output-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-445"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>echo-stream</var>&mdash;an <i>echo stream</i>.
</p>
<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream</i>.
</p>
<p><code>output-stream</code>&mdash;an <i>output</i> <i>stream</i>.
</p>
<span id="Description_003a-575"></span><h4 class="subsubheading">Description:</h4>

<p><code>echo-stream-input-stream</code> returns the <i>input</i> <i>stream</i> 
from which <var>echo-stream</var> receives input.
</p>
<p><code>echo-stream-output-stream</code> returns the <i>output</i> <i>stream</i>
to which <var>echo-stream</var> sends output.
</p>


<hr>
<span id="make_002decho_002dstream"></span><div class="header">
<p>
Next: <a href="#concatenated_002dstream_002dstreams" accesskey="n" rel="next">concatenated-stream-streams</a>, Previous: <a href="#echo_002dstream_002dinput_002dstream_003b-echo_002dstream_002doutput_002dstream" accesskey="p" rel="prev">echo-stream-input-stream; echo-stream-output-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-echo-stream</h4>
<span id="make_002decho_002dstream-_0028Function_0029"></span><h3 class="heading">make-echo-stream (Function)</h3>
<span id="index-make_002decho_002dstream-2"></span>
<span id="index-make_002decho_002dstream"></span>


<span id="Syntax_003a-459"></span><h4 class="subsubheading">Syntax:</h4>


<dl>
<dt id="index-make_002decho_002dstream-1">Function: <strong>make-echo-stream</strong> <em>input-stream output-stream <span class="roman">→</span> echo-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-446"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream</i>.
</p>
<p><var>output-stream</var>&mdash;an <i>output</i> <i>stream</i>.
</p>
<p><var>echo-stream</var>&mdash;an <i>echo stream</i>.
</p>
<span id="Description_003a-576"></span><h4 class="subsubheading">Description:</h4>

<p>Creates and returns an <i>echo stream</i> 
that takes input  from <var>input-stream</var>
and  sends output to   <var>output-stream</var>.
</p>

<span id="Examples_003a-418"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (let ((out (make-string-output-stream)))
    (with-open-stream 
        (s (make-echo-stream
            (make-string-input-stream &quot;this-is-read-and-echoed&quot;)
            out))
      (read s)
      (format s &quot; * this-is-direct-output&quot;)
      (get-output-stream-string out)))
<span class="roman">→</span> &quot;this-is-read-and-echoed * this-is-direct-output&quot;
</pre></div>


<span id="See-Also_003a-468"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#echo_002dstream_002dinput_002dstream">echo-stream-input-stream</a>,
<a href="#echo_002dstream_002doutput_002dstream">echo-stream-output-stream</a>,
<a href="#make_002dtwo_002dway_002dstream">make-two-way-stream</a>
</p>

<hr>
<span id="concatenated_002dstream_002dstreams"></span><div class="header">
<p>
Next: <a href="#make_002dconcatenated_002dstream" accesskey="n" rel="next">make-concatenated-stream</a>, Previous: <a href="#make_002decho_002dstream" accesskey="p" rel="prev">make-echo-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">concatenated-stream-streams</h4>
<span id="concatenated_002dstream_002dstreams-_0028Function_0029"></span><h3 class="heading">concatenated-stream-streams (Function)</h3>
<span id="index-concatenated_002dstream_002dstreams-2"></span>
<span id="index-concatenated_002dstream_002dstreams"></span>



<span id="Syntax_003a-460"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-concatenated_002dstream_002dstreams-1">Function: <strong>concatenated-stream-streams</strong> <em>concatenated-stream <span class="roman">→</span> streams</em></dt>
</dl>

<span id="Arguments-and-Values_003a-447"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>concatenated-stream</var>&mdash;a <i>concatenated stream</i>.
</p>
<p><var>streams</var>&mdash;a <i>list</i> of <i>input</i> <i>streams</i>.
</p>
<span id="Description_003a-577"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>list</i> of <i>input</i> <i>streams</i> that constitute the
ordered set of <i>streams</i> the <var>concatenated-stream</var> still 
has to read from, starting with the current one it is reading from.
The list may be <i>empty</i> if no more <i>streams</i> remain to be read.
</p>
<p>The consequences are undefined if the <i>list structure</i> of the <var>streams</var>
is ever modified.
</p>


<hr>
<span id="make_002dconcatenated_002dstream"></span><div class="header">
<p>
Next: <a href="#get_002doutput_002dstream_002dstring" accesskey="n" rel="next">get-output-stream-string</a>, Previous: <a href="#concatenated_002dstream_002dstreams" accesskey="p" rel="prev">concatenated-stream-streams</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-concatenated-stream</h4>
<span id="make_002dconcatenated_002dstream-_0028Function_0029"></span><h3 class="heading">make-concatenated-stream (Function)</h3>
<span id="index-make_002dconcatenated_002dstream-2"></span>
<span id="index-make_002dconcatenated_002dstream"></span>


<span id="Syntax_003a-461"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dconcatenated_002dstream-1">Function: <strong>make-concatenated-stream</strong> <em><tt>&amp;rest</tt> input-streams <span class="roman">→</span> concatenated-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-448"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>input-stream</var>&mdash;an <i>input</i> <i>stream</i>.
</p>

<p><var>concatenated-stream</var>&mdash;a <i>concatenated stream</i>.
</p>
<span id="Description_003a-578"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>concatenated stream</i> that has the indicated <var>input-streams</var>
initially associated with it.
</p>

<span id="Examples_003a-419"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (read (make-concatenated-stream
         (make-string-input-stream &quot;1&quot;)
         (make-string-input-stream &quot;2&quot;))) <span class="roman">→</span> 12
</pre></div>


<span id="Exceptional-Situations_003a-214"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>Should signal <code>type-error</code> if any argument is not an <i>input</i> <i>stream</i>.
</p>
<span id="See-Also_003a-469"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#concatenated_002dstream_002dstreams">concatenated-stream-streams</a>
</p>

<hr>
<span id="get_002doutput_002dstream_002dstring"></span><div class="header">
<p>
Next: <a href="#make_002dstring_002dinput_002dstream" accesskey="n" rel="next">make-string-input-stream</a>, Previous: <a href="#make_002dconcatenated_002dstream" accesskey="p" rel="prev">make-concatenated-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">get-output-stream-string</h4>
<span id="get_002doutput_002dstream_002dstring-_0028Function_0029"></span><h3 class="heading">get-output-stream-string (Function)</h3>
<span id="index-get_002doutput_002dstream_002dstring-2"></span>
<span id="index-get_002doutput_002dstream_002dstring"></span>


<span id="Syntax_003a-462"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-get_002doutput_002dstream_002dstring-1">Function: <strong>get-output-stream-string</strong> <em>string-output-stream <span class="roman">→</span> string</em></dt>
</dl>

<span id="Arguments-and-Values_003a-449"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>string-output-stream</var>&mdash;a <i>stream</i>.
</p>
<p><var>string</var>&mdash;a <i>string</i>.
</p>
<span id="Description_003a-579"></span><h4 class="subsubheading">Description:</h4>

<p>Returns a <i>string</i> containing, in order, all the <i>characters</i> 
that have been output to <var>string-output-stream</var>.
This operation clears any <i>characters</i> on <var>string-output-stream</var>,
so the <var>string</var> contains only those <i>characters</i> which have been output
since the last call to <code>get-output-stream-string</code>
or since the creation of the <var>string-output-stream</var>,
whichever occurred most recently.
</p>
<span id="Examples_003a-420"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq a-stream (make-string-output-stream)
        a-string &quot;abcdefghijklm&quot;) <span class="roman">→</span> &quot;abcdefghijklm&quot;
 (write-string a-string a-stream) <span class="roman">→</span> &quot;abcdefghijklm&quot;
 (get-output-stream-string a-stream) <span class="roman">→</span> &quot;abcdefghijklm&quot;
 (get-output-stream-string a-stream) <span class="roman">→</span> &quot;&quot;
</pre></div>


<span id="Side-Effects_003a-72"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>string-output-stream</var> is cleared.
</p>
<span id="Exceptional-Situations_003a-215"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The consequences are undefined if <var>stream-output-string</var> is <i>closed</i>.
</p>
<p>The consequences are undefined if <var>string-output-stream</var> is a <i>stream</i> that
was not produced by <code>make-string-output-stream</code>.
The consequences are undefined if <var>string-output-stream</var> was 
created implicitly by <code>with-output-to-string</code> or <code>format</code>.
</p>

<span id="See-Also_003a-470"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dstring_002doutput_002dstream">make-string-output-stream</a>
</p>

<hr>
<span id="make_002dstring_002dinput_002dstream"></span><div class="header">
<p>
Next: <a href="#make_002dstring_002doutput_002dstream" accesskey="n" rel="next">make-string-output-stream</a>, Previous: <a href="#get_002doutput_002dstream_002dstring" accesskey="p" rel="prev">get-output-stream-string</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-string-input-stream</h4>
<span id="make_002dstring_002dinput_002dstream-_0028Function_0029"></span><h3 class="heading">make-string-input-stream (Function)</h3>
<span id="index-make_002dstring_002dinput_002dstream-2"></span>
<span id="index-make_002dstring_002dinput_002dstream"></span>


<span id="Syntax_003a-463"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dstring_002dinput_002dstream-1">Function: <strong>make-string-input-stream</strong> <em>string <tt>&amp;optional</tt> start end <span class="roman">→</span> string-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-450"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>string</var>&mdash;a <i>string</i>.
</p>
<p><var>start</var>, <var>end</var>&mdash;<i>bounding index designators</i> of <var>string</var>.
The defaults for <var>start</var> and <var>end</var> are <code>0</code> and <code>nil</code>, respectively.
</p>
<p><var>string-stream</var>&mdash;an <i>input</i> <i>string stream</i>.
</p>
<span id="Description_003a-580"></span><h4 class="subsubheading">Description:</h4>

<p>Returns an <i>input</i> <i>string stream</i>.  
This <i>stream</i> will supply, in order, the <i>characters</i> in the substring
of <var>string</var> <i>bounded</i> by <var>start</var> and <var>end</var>.
After the last <i>character</i> has been supplied, 
the <i>string stream</i> will then be at <i>end of file</i>.
</p>
<span id="Examples_003a-421"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (let ((string-stream (make-string-input-stream &quot;1 one &quot;)))
   (list (read string-stream nil nil)
         (read string-stream nil nil)
         (read string-stream nil nil)))
<span class="roman">→</span> (1 ONE NIL)

 (read (make-string-input-stream &quot;prefixtargetsuffix&quot; 6 12)) <span class="roman">→</span> TARGET
</pre></div>


<span id="See-Also_003a-471"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#with_002dinput_002dfrom_002dstring">with-input-from-string</a>
</p>

<hr>
<span id="make_002dstring_002doutput_002dstream"></span><div class="header">
<p>
Next: <a href="#with_002dinput_002dfrom_002dstring" accesskey="n" rel="next">with-input-from-string</a>, Previous: <a href="#make_002dstring_002dinput_002dstream" accesskey="p" rel="prev">make-string-input-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">make-string-output-stream</h4>
<span id="make_002dstring_002doutput_002dstream-_0028Function_0029"></span><h3 class="heading">make-string-output-stream (Function)</h3>
<span id="index-make_002dstring_002doutput_002dstream-2"></span>
<span id="index-make_002dstring_002doutput_002dstream"></span>


<span id="Syntax_003a-464"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-make_002dstring_002doutput_002dstream-1">Function: <strong>make-string-output-stream</strong> <em><tt>&amp;key</tt> element-type <span class="roman">→</span> string-stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-451"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>element-type</var>&mdash;a <i>type specifier</i>.
The default is <code>character</code>.
</p>
<p><var>string-stream</var>&mdash;an <i>output</i> <i>string stream</i>.
</p>
<span id="Description_003a-581"></span><h4 class="subsubheading">Description:</h4>

<p>Returns
an <i>output</i> <i>string stream</i> that accepts <i>characters</i>
and makes available (via <code>get-output-stream-string</code>)
a <i>string</i> that contains the <i>characters</i> that were actually output.
</p>
<p>The <var>element-type</var> names the <i>type</i> of the <i>elements</i>
of the <i>string</i>; a <i>string</i> is constructed of the most specialized
<i>type</i> that can accommodate <i>elements</i> of that <i>element-type</i>.
</p>
<span id="Examples_003a-422"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (let ((s (make-string-output-stream)))
   (write-string &quot;testing... &quot; s)
   (prin1 1234 s)
   (get-output-stream-string s))
<span class="roman">→</span> &quot;testing... 1234&quot;
</pre></div>


<p>.
</p>
<span id="See-Also_003a-472"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#get_002doutput_002dstream_002dstring">get-output-stream-string</a>, <a href="#with_002doutput_002dto_002dstring">with-output-to-string</a>
</p>

<hr>
<span id="with_002dinput_002dfrom_002dstring"></span><div class="header">
<p>
Next: <a href="#with_002doutput_002dto_002dstring" accesskey="n" rel="next">with-output-to-string</a>, Previous: <a href="#make_002dstring_002doutput_002dstream" accesskey="p" rel="prev">make-string-output-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-input-from-string</h4>
<span id="with_002dinput_002dfrom_002dstring-_0028Macro_0029"></span><h3 class="heading">with-input-from-string (Macro)</h3>
<span id="index-with_002dinput_002dfrom_002dstring-2"></span>
<span id="index-with_002dinput_002dfrom_002dstring"></span>



<span id="Syntax_003a-465"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002dinput_002dfrom_002dstring-1">Macro: <strong>with-input-from-string</strong> <em><tt>(</tt>var string <tt>&amp;key</tt> index start end<tt>)</tt> <tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-452"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>var</var>&mdash;a <i>variable</i> <i>name</i>.
</p>
<p><var>string</var>&mdash;a <i>form</i>; evaluated to produce a <i>string</i>.
</p>
<p><var>index</var>&mdash;a <i>place</i>.
</p>
<p><var>start</var>, <var>end</var>&mdash;<i>bounding index designators</i> of <var>string</var>.
The defaults for <var>start</var> and <var>end</var> are <code>0</code> and <code>nil</code>, respectively.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>result</var>&mdash;the <i>values</i> returned by the <var>forms</var>.
</p>
<span id="Description_003a-582"></span><h4 class="subsubheading">Description:</h4>

<p>Creates an
<i>input</i> <i>string stream</i>, 
provides an opportunity to perform operations on the <i>stream</i> 
(returning zero or more <i>values</i>),
and then closes the <i>string stream</i>.
</p>
<p><var>String</var> is evaluated first, and <var>var</var> is bound to
a character <i>input</i> <i>string stream</i> that supplies 
<i>characters</i> from the subsequence of the resulting <i>string</i> <i>bounded</i> by
<var>start</var> and <var>end</var>. 
The body is executed as an <i>implicit progn</i>.
</p>
<p>The <i>input</i> <i>string stream</i> is automatically closed on exit from
<code>with-input-from-string</code>, no matter whether the exit is normal or abnormal.
The <i>input</i> <i>string stream</i> to which the <i>variable</i> <var>var</var>
is <i>bound</i> has <i>dynamic extent</i>;
its <i>extent</i> ends when the <i>form</i> is exited.
</p>
<p>The <var>index</var> is a pointer within the <var>string</var> to be advanced.
If <code>with-input-from-string</code>
is exited normally, then <var>index</var> will have
as its <i>value</i>
the index into the <var>string</var> indicating the first character not read
which is <code>(length <var>string</var>)</code> if all characters were used.
The place specified by <var>index</var>
is not updated as reading progresses, but only at the
end of the operation. 
</p>
<p><var>start</var> and <var>index</var> may both specify the same variable, 
which is a pointer within the <var>string</var> to be advanced,
perhaps repeatedly by some containing loop.
</p>
<p>The consequences are undefined if an attempt is made to <i>assign</i> 
the <i>variable</i> <var>var</var>.
</p>
<span id="Examples_003a-423"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (with-input-from-string (s &quot;XXX1 2 3 4xxx&quot;
                             :index ind
                             :start 3 :end 10)
    (+ (read s) (read s) (read s))) <span class="roman">→</span> 6
 ind <span class="roman">→</span> 9
 (with-input-from-string (s &quot;Animal Crackers&quot; :index j :start 6)
   (read s)) <span class="roman">→</span> CRACKERS
</pre></div>

<p>The variable <code>j</code> is set to <code>15</code>.
</p>
<span id="Side-Effects_003a-73"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <i>value</i> of the <i>place</i> named by <var>index</var>, if any, is modified.
</p>
<span id="See-Also_003a-473"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dstring_002dinput_002dstream">make-string-input-stream</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>


<hr>
<span id="with_002doutput_002dto_002dstring"></span><div class="header">
<p>
Next: <a href="#g_t_002adebug_002dio_002a_003b-_002aerror_002doutput_002a_003b-_002aquery_002dio_002a_003b-_002astandard_002dinput_002a_003b-_002astandard_002dout_002b" accesskey="n" rel="next">*debug-io*; *error-output*; *query-io*; *standard-input*; *standard-out+</a>, Previous: <a href="#with_002dinput_002dfrom_002dstring" accesskey="p" rel="prev">with-input-from-string</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">with-output-to-string</h4>
<span id="with_002doutput_002dto_002dstring-_0028Macro_0029"></span><h3 class="heading">with-output-to-string (Macro)</h3>
<span id="index-with_002doutput_002dto_002dstring-2"></span>
<span id="index-with_002doutput_002dto_002dstring"></span>



<span id="Syntax_003a-466"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-with_002doutput_002dto_002dstring-1">Macro: <strong>with-output-to-string</strong> <em><tt>(</tt>var <tt>&amp;optional</tt> string-form <tt>&amp;key</tt> element-type<tt>)</tt> <tt>{</tt>declaration<tt>}</tt>* <tt>{</tt>form<tt>}</tt>* <span class="roman">→</span> <tt>{</tt>result<tt>}</tt>*</em></dt>
</dl>

<span id="Arguments-and-Values_003a-453"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>var</var>&mdash;a <i>variable</i> <i>name</i>.
</p>
<p><var>string-form</var>&mdash;a <i>form</i> or <code>nil</code>;
if <i>non-nil</i>, evaluated to produce <var>string</var>.
</p>
<p><var>string</var>&mdash;a <i>string</i> that has a <i>fill pointer</i>.
</p>
<p><var>element-type</var>&mdash;a <i>type specifier</i>; evaluated.
The default is <code>character</code>.
</p>
<p><var>declaration</var>&mdash;a <tt>declare</tt> <i>expression</i>; not evaluated.
</p>
<p><var>forms</var>&mdash;an <i>implicit progn</i>.
</p>
<p><var>results</var>&mdash;If a <var>string-form</var> is not supplied or <code>nil</code>,
a <i>string</i>; otherwise, 
the <i>values</i> returned by the <var>forms</var>.
</p>
<span id="Description_003a-583"></span><h4 class="subsubheading">Description:</h4>

<p><code>with-output-to-string</code> creates a
character <i>output</i> <i>stream</i>, performs a series of operations
that may send results to this <i>stream</i>, and then closes the <i>stream</i>. 
</p>
<p>The <var>element-type</var> names the <i>type</i> of the elements
of the <i>stream</i>; a <i>stream</i> is constructed of the most specialized
<i>type</i> that can accommodate elements of the given <i>type</i>.  
</p>
<p>The body is executed as an <i>implicit progn</i> with <var>var</var>
bound to an <i>output</i> <i>string stream</i>.  
All output to that <i>string stream</i> is saved in a <i>string</i>.  
</p>
<p>If <var>string</var> is supplied, <var>element-type</var> is ignored, 
and the output is incrementally appended to <var>string</var> as
if by use of <code>vector-push-extend</code>.
</p>
<p>The <i>output</i> <i>stream</i> 
is automatically closed on exit from <code>with-output-from-string</code>,
no matter whether the exit is normal or abnormal.
The <i>output</i> <i>string stream</i> to which the <i>variable</i> <var>var</var>
is <i>bound</i> has <i>dynamic extent</i>;
its <i>extent</i> ends when the <i>form</i> is exited.
</p>
<p>If no <var>string</var> is provided, then <code>with-output-from-string</code> 
produces a <i>stream</i> that accepts characters and returns a <i>string</i> 
of the indicated <var>element-type</var>.
If <var>string</var> is provided,
<code>with-output-to-string</code> returns the results of evaluating the last <var>form</var>.
</p>
<p>The consequences are undefined if an attempt is made to <i>assign</i>
the <i>variable</i> <var>var</var>.
</p>
<span id="Examples_003a-424"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (setq fstr (make-array '(0) :element-type 'base-char
                             :fill-pointer 0 :adjustable t)) <span class="roman">→</span> &quot;&quot;
 (with-output-to-string (s fstr)
    (format s &quot;here's some output&quot;)
    (input-stream-p s)) <span class="roman">→</span> <i>false</i>
 fstr <span class="roman">→</span> &quot;here's some output&quot;
</pre></div>


<span id="Side-Effects_003a-74"></span><h4 class="subsubheading">Side Effects:</h4>

<p>The <var>string</var> is modified.
</p>
<span id="Exceptional-Situations_003a-216"></span><h4 class="subsubheading">Exceptional Situations:</h4>

<p>The consequences are undefined if destructive modifications are performed
directly on the <var>string</var> during the <i>dynamic extent</i> of the call.
</p>
<span id="See-Also_003a-474"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#make_002dstring_002doutput_002dstream">make-string-output-stream</a>,
<a href="Arrays.html#vector_002dpush_002dextend">vector-push-extend</a>,
<a href="Evaluation-and-Compilation.html#Traversal-Rules-and-Side-Effects">Section 3.6 (Traversal Rules and Side Effects)</a>
</p>


<hr>
<span id="g_t_002adebug_002dio_002a_003b-_002aerror_002doutput_002a_003b-_002aquery_002dio_002a_003b-_002astandard_002dinput_002a_003b-_002astandard_002dout_002b"></span><div class="header">
<p>
Next: <a href="#g_t_002aterminal_002dio_002a" accesskey="n" rel="next">*terminal-io*</a>, Previous: <a href="#with_002doutput_002dto_002dstring" accesskey="p" rel="prev">with-output-to-string</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">*debug-io*; *error-output*; *query-io*; *standard-input*; *standard-out+</h4>
<span id="g_t_002adebug_002dio_002a_002c-_002aerror_002doutput_002a_002c-_002aquery_002dio_002a_002c-_002astandard_002dinput_002a_002c-_002astandard_002doutput_002a_002c-_002atrace_002doutput_002a-_0028Variable_0029"></span><h3 class="heading">*debug-io*, *error-output*, *query-io*, *standard-input*, *standard-output*, *trace-output* (Variable)</h3>
<span id="index-_002adebug_002dio_002a-1"></span>
<span id="index-_002adebug_002dio_002a"></span>
<span id="index-_002aerror_002doutput_002a-1"></span>
<span id="index-_002aerror_002doutput_002a"></span>
<span id="index-_002aquery_002dio_002a-1"></span>
<span id="index-_002aquery_002dio_002a"></span>
<span id="index-_002astandard_002dinput_002a-1"></span>
<span id="index-_002astandard_002dinput_002a"></span>
<span id="index-_002astandard_002doutput_002a-1"></span>
<span id="index-_002astandard_002doutput_002a"></span>
<span id="index-_002atrace_002doutput_002a-1"></span>
<span id="index-_002atrace_002doutput_002a"></span>
<span id="g_t_002adebug_002dio_002a"></span><span id="g_t_002aerror_002doutput_002a"></span><span id="g_t_002aquery_002dio_002a"></span><span id="g_t_002astandard_002dinput_002a"></span><span id="g_t_002astandard_002doutput_002a"></span><span id="g_t_002atrace_002doutput_002a"></span>

<span id="Value-Type_003a-7"></span><h4 class="subsubheading">Value Type:</h4>

<p>For <code>*standard-input*</code>:
an <i>input</i> <i>stream</i>
</p>
<p>For <code>*error-output*</code>, <code>*standard-output*</code>, and <code>*trace-output*</code>:
an <i>output</i> <i>stream</i>.
</p>
<p>For <code>*debug-io*</code>, <code>*query-io*</code>:
a <i>bidirectional</i> <i>stream</i>.
</p>
<span id="Initial-Value_003a-7"></span><h4 class="subsubheading">Initial Value:</h4>

<p><i>implementation-dependent</i>, but
it must be an <i>open</i> <i>stream</i> 
that is not a  <i>generalized synonym stream</i>
to an <i>I/O customization variables</i>
but that might be a <i>generalized synonym stream</i> to 
the value of some <i>I/O customization variable</i>.
The initial value might also be a <i>generalized synonym stream</i> 
to either the <i>symbol</i> <code>*terminal-io*</code> or to the <i>stream</i> 
that is its <i>value</i>.
</p>
<span id="Description_003a-584"></span><h4 class="subsubheading">Description:</h4>

<p>These <i>variables</i> are collectively called the
<i>standardized</i> <i>I/O customization variables</i>.
They can be <i>bound</i> or <i>assigned</i> in order to 
change the default destinations for input and/or output 
used by various <i>standardized</i> <i>operators</i> and facilities.
</p>
<p>The <i>value</i> of <code>*debug-io*</code>, called <i>debug I/O</i>,
is a <i>stream</i> to be used for interactive debugging purposes.  
</p>
<p>The <i>value</i> of <code>*error-output*</code>, called <i>error output</i>,
is a <i>stream</i> to which warnings and non-interactive error messages should be sent.
</p>
<p>The <i>value</i> of <code>*query-io*</code>, called <i>query I/O</i>,
is a <i>bidirectional</i> <i>stream</i> 
to be used when asking questions of the user.  The question should be output 
to this <i>stream</i>, and the answer read from it.
</p>
<p>The <i>value</i> of <code>*standard-input*</code>, called <i>standard input</i>,
is a <i>stream</i> that is used by many <i>operators</i> 
as a default source of input when no specific <i>input</i> <i>stream</i>
is explicitly supplied.
</p>
<p>The <i>value</i> of <code>*standard-output*</code>, called <i>standard output</i>,
is a <i>stream</i> that is used by many <i>operators</i> 
as a default destination for output when no specific <i>output</i> <i>stream</i>
is explicitly supplied.
</p>
<p>The <i>value</i> of <code>*trace-output*</code>, called <i>trace output</i>,
is the <i>stream</i> on which traced functions (see <code>trace</code>)
and the <code>time</code> <i>macro</i> print their output.
</p>
<span id="Examples_003a-425"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (with-output-to-string (*error-output*)
   (warn &quot;this string is sent to *error-output*&quot;))
 <span class="roman">→</span> &quot;Warning: this string is sent to *error-output*
&quot; ;The exact format of this string is <i>implementation-dependent</i>.
&nbsp;
&nbsp;
 (with-input-from-string (*standard-input* &quot;1001&quot;)
    (+ 990 (read))) <span class="roman">→</span> 1991                       
&nbsp;
&nbsp;
 (progn (setq out (with-output-to-string (*standard-output*)
                     (print &quot;print and format t send things to&quot;)
                     (format t &quot;*standard-output* now going to a string&quot;)))
        :done)
<span class="roman">→</span> :DONE
 out
<span class="roman">→</span> &quot;
\&quot;print and format t send things to\&quot; *standard-output* now going to a string&quot;
&nbsp;
&nbsp;
 (defun fact (n) (if (&lt; n 2) 1 (* n (fact (- n 1)))))
<span class="roman">→</span> FACT
 (trace fact)
<span class="roman">→</span> (FACT)
;; Of course, the format of traced output is implementation-dependent.
 (with-output-to-string (*trace-output*)
   (fact 3)) 
<span class="roman">→</span> &quot;
1 Enter FACT 3
| 2 Enter FACT 2
|   3 Enter FACT 1
|   3 Exit FACT 1
| 2 Exit FACT 2
1 Exit FACT 6&quot;
</pre></div>


<span id="See-Also_003a-475"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#g_t_002aterminal_002dio_002a">*terminal-io*</a>,
<a href="#synonym_002dstream">synonym-stream</a>,
<a href="Environment.html#time-_0028Macro_0029">time (Macro)</a>,
<a href="Environment.html#trace">trace</a>,
<a href="Conditions.html#Conditions">Chapter 9 (Conditions)</a>,
<a href="Reader.html#Reader">Chapter 23 (Reader)</a>,
<a href="Printer.html#Printer">Chapter 22 (Printer)</a>
</p>
<span id="Notes_003a-297"></span><h4 class="subsubheading">Notes:</h4>

<p>The intent of the constraints on the initial <i>value</i> 
of the <i>I/O customization variables</i> is to ensure that it
is always safe to <i>bind</i> or <i>assign</i> such a <i>variable</i> to 
the <i>value</i> of another <i>I/O customization variable</i>, without
unduly restricting <i>implementation</i> flexibility.
</p>
<p>It is common for an <i>implementation</i> to make
the initial <i>values</i> of <code>*debug-io*</code> and <code>*query-io*</code> 
be the <i>same</i> <i>stream</i>, 
and to make
the initial <i>values</i> of <code>*error-output*</code> and <code>*standard-output*</code> 
be the <i>same</i> <i>stream</i>.
</p>
<p>The functions <code>y-or-n-p</code> and <code>yes-or-no-p</code> use <i>query I/O</i>
for their input and output.
</p>
<p>In the normal <i>Lisp read-eval-print loop</i>,
input is read from <i>standard input</i>.
Many input functions, including <code>read</code> and <code>read-char</code>,
take a <i>stream</i> argument that defaults to <i>standard input</i>.
</p>
<p>In the normal <i>Lisp read-eval-print loop</i>, output is sent to <i>standard output</i>.
Many output functions, including <code>print</code> and <code>write-char</code>, 
take a <i>stream</i> argument that defaults to <i>standard output</i>.
</p>
<p>A program that wants, for example, to divert output to a file should do so by 
<i>binding</i> <code>*standard-output*</code>; that way error messages sent to
<code>*error-output*</code> can still get to the user by going through
<code>*terminal-io*</code> (if <code>*error-output*</code> is bound to <code>*terminal-io*</code>),
which is usually what is desired.
</p>

<hr>
<span id="g_t_002aterminal_002dio_002a"></span><div class="header">
<p>
Next: <a href="#stream_002derror" accesskey="n" rel="next">stream-error</a>, Previous: <a href="#g_t_002adebug_002dio_002a_003b-_002aerror_002doutput_002a_003b-_002aquery_002dio_002a_003b-_002astandard_002dinput_002a_003b-_002astandard_002dout_002b" accesskey="p" rel="prev">*debug-io*; *error-output*; *query-io*; *standard-input*; *standard-out+</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">*terminal-io*</h4>
<span id="g_t_002aterminal_002dio_002a-_0028Variable_0029"></span><h3 class="heading">*terminal-io* (Variable)</h3>
<span id="index-_002aterminal_002dio_002a-1"></span>
<span id="index-_002aterminal_002dio_002a"></span>


<span id="Value-Type_003a-8"></span><h4 class="subsubheading">Value Type:</h4>

<p>a <i>bidirectional</i> <i>stream</i>.
</p>
<span id="Initial-Value_003a-8"></span><h4 class="subsubheading">Initial Value:</h4>

<p><i>implementation-dependent</i>, but
it must be an <i>open</i> <i>stream</i> 
that is not a  <i>generalized synonym stream</i>
to an <i>I/O customization variables</i>
but that might be a <i>generalized synonym stream</i> to 
the <i>value</i> of some <i>I/O customization variable</i>.
</p>
<span id="Description_003a-585"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>value</i> of <code>*terminal-io*</code>, called  <i>terminal I/O</i>, is ordinarily 
a <i>bidirectional</i> <i>stream</i> that connects to the user&rsquo;s console.
Typically, writing to this <i>stream</i> 
would cause the output to appear
on a display screen, for example, and reading from the <i>stream</i> would
accept input from a keyboard.  It is intended
that standard input functions such as <code>read</code> and <code>read-char</code>,
when used with this <i>stream</i>, cause echoing of the input
into the output side of the <i>stream</i>. The means by which this is
accomplished are <i>implementation-dependent</i>.
</p>
<p>The effect of changing the <i>value</i> of <code>*terminal-io*</code>,
either by <i>binding</i> or <i>assignment</i>,
is <i>implementation-defined</i>.
</p>
<span id="Examples_003a-426"></span><h4 class="subsubheading">Examples:</h4>

<div class="lisp">
<pre class="lisp"> (progn (prin1 'foo) (prin1 'bar *terminal-io*))
▷ FOOBAR
<span class="roman">→</span> BAR
 (with-output-to-string (*standard-output*)
   (prin1 'foo) 
   (prin1 'bar *terminal-io*))
▷ BAR
<span class="roman">→</span> &quot;FOO&quot;
</pre></div>


<span id="See-Also_003a-476"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#g_t_002adebug_002dio_002a">*debug-io*</a>,
<a href="#g_t_002aerror_002doutput_002a">*error-output*</a>,
<a href="#g_t_002aquery_002dio_002a">*query-io*</a>,
<a href="#g_t_002astandard_002dinput_002a">*standard-input*</a>,
<a href="#g_t_002astandard_002doutput_002a">*standard-output*</a>,
<a href="#g_t_002atrace_002doutput_002a">*trace-output*</a>
</p>

<hr>
<span id="stream_002derror"></span><div class="header">
<p>
Next: <a href="#stream_002derror_002dstream" accesskey="n" rel="next">stream-error-stream</a>, Previous: <a href="#g_t_002aterminal_002dio_002a" accesskey="p" rel="prev">*terminal-io*</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">stream-error</h4>
<span id="stream_002derror-_0028Condition-Type_0029"></span><h3 class="heading">stream-error (Condition Type)</h3>
<span id="index-stream_002derror-1"></span>
<span id="index-stream_002derror"></span>


<span id="Class-Precedence-List_003a-70"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>stream-error</code>,
<code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-586"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>stream-error</code>
consists of error conditions that are related to receiving input from
or sending output to a <i>stream</i>.  
The &ldquo;offending stream&rdquo; is initialized by
the <tt>:stream</tt> initialization argument to <code>make-condition</code>, 
and is <i>accessed</i> by the <i>function</i> <code>stream-error-stream</code>.
</p>
<span id="See-Also_003a-477"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#stream_002derror_002dstream">stream-error-stream</a>
</p>

<hr>
<span id="stream_002derror_002dstream"></span><div class="header">
<p>
Next: <a href="#end_002dof_002dfile" accesskey="n" rel="next">end-of-file</a>, Previous: <a href="#stream_002derror" accesskey="p" rel="prev">stream-error</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">stream-error-stream</h4>
<span id="stream_002derror_002dstream-_0028Function_0029"></span><h3 class="heading">stream-error-stream (Function)</h3>
<span id="index-stream_002derror_002dstream-2"></span>
<span id="index-stream_002derror_002dstream"></span>


<span id="Syntax_003a-467"></span><h4 class="subsubheading">Syntax:</h4>

<dl>
<dt id="index-stream_002derror_002dstream-1">Function: <strong>stream-error-stream</strong> <em>condition <span class="roman">→</span> stream</em></dt>
</dl>

<span id="Arguments-and-Values_003a-454"></span><h4 class="subsubheading">Arguments and Values:</h4>

<p><var>condition</var>&mdash;a <i>condition</i> of <i>type</i> <code>stream-error</code>.
</p>
<p><var>stream</var>&mdash;a <i>stream</i>.
</p>
<span id="Description_003a-587"></span><h4 class="subsubheading">Description:</h4>

<p>Returns the offending <i>stream</i> of a <i>condition</i> of <i>type</i> <code>stream-error</code>.
</p>
<span id="Examples_003a-427"></span><h4 class="subsubheading">Examples:</h4>
<div class="lisp">
<pre class="lisp"> (with-input-from-string (s &quot;(FOO&quot;)
   (handler-case (read s)
     (end-of-file (c)
       (format nil &quot;~&amp;End of file on ~S.&quot; (stream-error-stream c)))))
&quot;End of file on #&lt;String Stream&gt;.&quot;
</pre></div>


<span id="See-Also_003a-478"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#stream_002derror">stream-error</a>,
<a href="Conditions.html#Conditions">Chapter 9 (Conditions)</a>
</p>

<hr>
<span id="end_002dof_002dfile"></span><div class="header">
<p>
Previous: <a href="#stream_002derror_002dstream" accesskey="p" rel="prev">stream-error-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="node-heading">end-of-file</h4>
<span id="end_002dof_002dfile-_0028Condition-Type_0029"></span><h3 class="heading">end-of-file (Condition Type)</h3>
<span id="index-end_002dof_002dfile-1"></span>
<span id="index-end_002dof_002dfile"></span>


<span id="Class-Precedence-List_003a-71"></span><h4 class="subsubheading">Class Precedence List:</h4>
<p><code>end-of-file</code>,
<code>stream-error</code>,
<code>error</code>,
<code>serious-condition</code>,
<code>condition</code>,
<code>t</code>
</p>
<span id="Description_003a-588"></span><h4 class="subsubheading">Description:</h4>

<p>The <i>type</i> <code>end-of-file</code> consists of
error conditions related to read operations that are done on
<i>streams</i> that have no more data.
</p>
<span id="See-Also_003a-479"></span><h4 class="subsubheading">See Also:</h4>

<p><a href="#stream_002derror_002dstream">stream-error-stream</a>
</p>



<hr>
<div class="header">
<p>
Previous: <a href="#stream_002derror_002dstream" accesskey="p" rel="prev">stream-error-stream</a>, Up: <a href="#Streams" accesskey="u" rel="up">Streams</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
