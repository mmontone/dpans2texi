<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Numbers as Tokens (ANSI Common Lisp)</title>

<meta name="description" content="Numbers as Tokens (ANSI Common Lisp)">
<meta name="keywords" content="Numbers as Tokens (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Interpretation-of-Tokens.html" rel="up" title="Interpretation of Tokens">
<link href="Constructing-Numbers-from-Tokens.html" rel="next" title="Constructing Numbers from Tokens">
<link href="Interpretation-of-Tokens.html" rel="prev" title="Interpretation of Tokens">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="Numbers-as-Tokens"></span><div class="header">
<p>
Next: <a href="Constructing-Numbers-from-Tokens.html" accesskey="n" rel="next">Constructing Numbers from Tokens</a>, Up: <a href="Interpretation-of-Tokens.html" accesskey="u" rel="up">Interpretation of Tokens</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Numbers-as-Tokens-1"></span><h4 class="subsection">2.3.1 Numbers as Tokens</h4>

<p>When a <i>token</i> is read,
it is interpreted as a <i>number</i> or <i>symbol</i>.
The <i>token</i> is interpreted as a <i>number</i> if it satisfies
the syntax for numbers specified in the next figure.
</p>


<div class="float"><span id="SyntaxForNumericTokens"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><var>numeric-token</var></td><td>::=</td><td><tt>↓</tt>integer <span class="roman">|</span> 
<tt>↓</tt>ratio   <span class="roman">|</span>
<tt>↓</tt>float</td></tr>
<tr><td><var>integer</var></td><td>::=</td><td><tt>[</tt><var>sign</var><tt>]</tt> 
<tt>{</tt><var>decimal-digit</var><tt>}</tt>+ 
<var>decimal-point</var> <span class="roman">|</span>
<tt>[</tt><var>sign</var><tt>]</tt> 
<tt>{</tt><var>digit</var><tt>}</tt>+</td></tr>
<tr><td><var>ratio</var></td><td>::=</td><td><tt>[</tt><var>sign</var><tt>]</tt>
<tt>{</tt><var>digit</var><tt>}</tt>+
<var>slash</var> 
<tt>{</tt><var>digit</var><tt>}</tt>+</td></tr>
<tr><td><var>float</var></td><td>::=</td><td><tt>[</tt><var>sign</var><tt>]</tt>
<tt>{</tt><var>decimal-digit</var><tt>}</tt>*
<var>decimal-point</var>
<tt>{</tt><var>decimal-digit</var><tt>}</tt>+
<tt>[</tt><tt>↓</tt>exponent<tt>]</tt></td></tr>
<tr><td></td><td></td><td>| <tt>[</tt><var>sign</var><tt>]</tt> <tt>{</tt><var>decimal-digit</var><tt>}</tt>+  <tt>[</tt><var>decimal-point</var>  <tt>{</tt><var>decimal-digit</var><tt>}</tt>*<tt>]</tt> <tt>↓</tt>exponent</td></tr>
<tr><td><var>exponent</var></td><td>::=</td><td><var>exponent-marker</var>
<tt>[</tt><var>sign</var><tt>]</tt>
<tt>{</tt><var>digit</var><tt>}</tt>+</td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.9: </strong>Syntax for Numeric Tokens</p></div></div>
<p><var>sign</var>&mdash;a <i>sign</i>.<br>
<var>slash</var>&mdash;a <i>slash</i><br>
<var>decimal-point</var>&mdash;a <i>dot</i>.<br>
<var>exponent-marker</var>&mdash;an <i>exponent marker</i>.<br>
<var>decimal-digit</var>&mdash;a <i>digit</i> in <i>radix</i> <code>10</code>.<br>
<var>digit</var>&mdash;a <i>digit</i> in the <i>current input radix</i>.<br>
</p>
<span id="Potential-Numbers-as-Tokens"></span><h4 class="subsubsection">2.3.1.1 Potential Numbers as Tokens</h4>
<span id="PotentialNumbersAsTokens"></span>
<p>To allow implementors and future <span class="roman">Common Lisp</span>&nbsp;<!-- /@w -->standards
to extend the syntax of numbers, a
syntax for <i>potential numbers</i> is defined that is
more general than the syntax for numbers.
A <i>token</i> is a <i>potential number</i> if it satisfies all of the following
requirements:
</p>

<ol>
<li> The <i>token</i> consists entirely of 
<i>digits</i>,
<i>signs</i>,
<i>ratio markers</i>,
decimal points (<code>.</code>),
extension characters (^&nbsp;<!-- /@w -->or <code>_</code>),
and number markers.
A number marker is a letter. 
Whether a letter may be treated as a number marker depends on context,
but no letter that is adjacent to another letter may ever be treated as a number marker.
<i>Exponent markers</i> are number markers.

</li><li> The <i>token</i> contains at least one digit.  Letters may be considered to be
digits, depending on the <i>current input base</i>, but only
in <i>tokens</i> containing no decimal points.

</li><li> The <i>token</i> begins with a <i>digit</i>, <i>sign</i>, decimal point, or extension character,

<p>but not a 
<i>package marker</i>.
The syntax involving a leading 
<i>package marker</i> followed by a <i>potential number</i> is
not well-defined. The consequences of the use 
of notation such as <code>:1</code>, <code>:1/2</code>, and <code>:2^3</code> in a
position where an expression appropriate for <code>read</code> 
is expected are unspecified.
</p>
</li><li> The <i>token</i> does not end with a sign.
</li></ol>


<p>If a <i>potential number</i> has number syntax, 
a <i>number</i> of the appropriate type is constructed and returned, 
if the <i>number</i> is representable in an implementation.
A <i>number</i> will not be representable in an implementation 
if it is outside the boundaries set by the <i>implementation-dependent</i> 
constants for <i>numbers</i>.
For example, specifying too large or too small an exponent for a <i>float</i>
may make the <i>number</i> impossible to represent in the implementation.
A <i>ratio</i> with denominator zero (such as <code>-35/000</code>)
is not represented in any implementation.
When a <i>token</i> with the syntax of a number cannot be converted to an internal
<i>number</i>, an error of <i>type</i> <code>reader-error</code> is signaled.  An error
must not be signaled for specifying too many significant digits
for a <i>float</i>; a truncated or rounded value should be produced.
</p>
<p>If there is an ambiguity as to whether
a letter should be treated as a digit or as a number marker,
the letter is treated as a digit.
</p>
<span id="g_t2_002e3_002e1_002e1_002e1-Escape-Characters-and-Potential-Numbers"></span><h4 class="unnumberedsubsubsec">2.3.1.1.1 Escape Characters and Potential Numbers</h4>

<span id="EscCharsAndPotentialNums"></span>
<p>A <i>potential number</i> cannot contain any <i>escape</i>
<i>characters</i>.  An <i>escape</i> <i>character</i> robs the following
<i>character</i> of all syntactic qualities, forcing it to be strictly
<i>alphabetic</i><sub>2</sub>
<i>potential number</i>.  For example, all of the following
representations are interpreted as <i>symbols</i>, not <i>numbers</i>:
</p>
<div class="lisp">
<pre class="lisp"> \256   25\64   1.0\E6   |100|   3\.14159   |3/4|   3\/4   5||
</pre></div>


<p>In each case, removing the <i>escape</i> <i>character</i> (or <i>characters</i>) 
would 
cause the token to be a <i>potential number</i>.
</p>

<span id="g_t2_002e3_002e1_002e1_002e2-Examples-of-Potential-Numbers"></span><h4 class="unnumberedsubsubsec">2.3.1.1.2 Examples of Potential Numbers</h4>


<p>As examples, the <i>tokens</i> in the next figure&nbsp;<!-- /@w -->are <i>potential numbers</i>,
but they are not actually numbers, and so are reserved <i>tokens</i>;
a <i>conforming implementation</i> is permitted, but not required,
to define their meaning.
</p>

<div class="float"><span id="fig2_002e10"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><code>1b5000</code></td><td><code>777777q</code></td><td><code>1.7J</code></td><td><code>-3/4+6.7J</code></td><td><code>12/25/83</code></td></tr>
<tr><td><code>27^19</code></td><td><code>3^4/5</code></td><td><code>6//7</code></td><td><code>3.1.2.6</code></td><td><code>^-43^</code></td></tr>
<tr><td><code>3.141_592_653_589_793_238_4</code></td><td><code>-3.7+2.6i-6.17j+19.6k</code></td><td></td><td></td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.10: </strong>Examples of reserved tokens</p></div></div>

<p>The <i>tokens</i> in the next figure&nbsp;<!-- /@w -->are not <i>potential numbers</i>; 
they are always treated as <i>symbols</i>:
</p>

<div class="float"><span id="fig2_002e11"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><code>/</code></td><td><code>/5</code></td><td><code>+</code></td><td><code>1+</code></td><td><code>1-</code></td></tr>
<tr><td><code>foo+</code></td><td><code>ab.cd</code></td><td><code>_</code></td><td><code>^</code></td><td><code>^/-</code></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.11: </strong>Examples of symbols</p></div></div>

<p>The <i>tokens</i> in the next figure&nbsp;<!-- /@w -->are <i>potential numbers</i>
if the <i>current input base</i> is <code>16</code>, 
but they are always treated as <i>symbols</i> if the <i>current input base</i> is <code>10</code>. 
</p>

<div class="float"><span id="fig2_002e12"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><code>bad-face</code></td><td><code>25-dec-83</code></td><td><code>a/b</code></td><td><code>fad_cafe</code></td><td><code>f^</code></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.12: </strong>Examples of symbols or potential numbers</p></div></div>




<hr>
<div class="header">
<p>
Next: <a href="Constructing-Numbers-from-Tokens.html" accesskey="n" rel="next">Constructing Numbers from Tokens</a>, Up: <a href="Interpretation-of-Tokens.html" accesskey="u" rel="up">Interpretation of Tokens</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
