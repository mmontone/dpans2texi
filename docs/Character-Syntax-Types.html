<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Character Syntax Types (ANSI Common Lisp)</title>

<meta name="description" content="Character Syntax Types (ANSI Common Lisp)">
<meta name="keywords" content="Character Syntax Types (ANSI Common Lisp)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="Table-of-Contents.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Character-Syntax.html" rel="up" title="Character Syntax">
<link href="Reader-Algorithm.html" rel="next" title="Reader Algorithm">
<link href="Standard-Characters.html" rel="prev" title="Standard Characters">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
body {font-family: century schoolbook, serif;
      line-height: 1.3;
      padding-left: 5em; padding-right: 1em;
      padding-bottom: 1em; max-width: 60em;}
table {border-collapse: collapse}
span.roman { font-family: century schoolbook, serif; font-weight: normal; }
h1, h2, h3, h4, h5, h6 {font-family:  Helvetica, sans-serif}
dfn {font-family: inherit; font-variant: italic; font-weight: bolder }
kbd {font-family: monospace; text-decoration: underline}
var {font-family: Helvetica, sans-serif; font-variant: slanted}
td  {padding-right: 1em; padding-left: 1em}
sub {font-size: smaller}
.node {padding: 0; margin: 0}

-->
</style>


</head>

<body lang="en">
<span id="Character-Syntax-Types"></span><div class="header">
<p>
Previous: <a href="Standard-Characters.html" accesskey="p" rel="prev">Standard Characters</a>, Up: <a href="Character-Syntax.html" accesskey="u" rel="up">Character Syntax</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Character-Syntax-Types-1"></span><h4 class="subsection">2.1.4 Character Syntax Types</h4>

<p>The <i>Lisp reader</i> constructs an <i>object</i> 
from the input text by interpreting each <i>character</i> 
according to its <i>syntax type</i>.
The <i>Lisp reader</i> cannot accept as input 
everything that the <i>Lisp printer</i> produces,
and the <i>Lisp reader</i> has features that are not used by the <i>Lisp printer</i>.
The <i>Lisp reader</i> can be used as a lexical analyzer 
for a more general user-written parser.
</p>
<p>When the <i>Lisp reader</i> is invoked, it reads a single character from 
the <i>input</i> <i>stream</i> and dispatches according to the
<span id="index-syntax-type"></span>
<em>syntax type</em> of that <i>character</i>.
Every <i>character</i> that can appear in the <i>input</i> <i>stream</i>
is of one of the <i>syntax types</i> shown in <a href="#PossibleSyntaxTypes">Figure 2.6</a>.
</p>


<div class="float"><span id="PossibleSyntaxTypes"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><i>constituent</i></td><td><i>macro character</i></td><td><i>single escape</i></td></tr>
<tr><td><i>invalid</i></td><td><i>multiple escape</i></td><td><i>whitespace</i><sub>2</sub></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.6: </strong>Possible Character Syntax Types</p></div></div>

<p>The <i>syntax type</i> of a <i>character</i> in a <i>readtable</i>
determines how that character is interpreted by the <i>Lisp reader</i>
while that <i>readtable</i> is the <i>current readtable</i>.
At any given time, every character has exactly one <i>syntax type</i>.
</p>
<p><a href="#CharSyntaxTypesInStdSyntax">Figure 2.7</a>&nbsp;<!-- /@w -->
lists the <i>syntax type</i> of each <i>character</i> in <i>standard syntax</i>.
</p>


<div class="float"><span id="CharSyntaxTypesInStdSyntax"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<thead><tr><th>character</th><th>syntax type</th><th>character</th><th>syntax type</th></tr></thead>
<tr><td>Backspace</td><td><i>constituent</i></td><td>0&ndash;9</td><td><i>constituent</i></td></tr>
<tr><td>Tab</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>Newline</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>Linefeed</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>Page</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>Return</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>Space</td><td><i>whitespace</i><sub>2</sub></td></tr>
<tr><td>!</td><td><i>constituent</i></td><td><code>@</code></td><td><i>constituent</i></td></tr>
<tr><td><code>&quot;</code></td><td><i>terminating</i> <i>macro char</i></td><td>A&ndash;Z</td><td><i>constituent</i></td></tr>
<tr><td>#</td><td><i>non-terminating</i> <i>macro char</i></td><td><code>[</code></td><td><i>constituent</i></td></tr>
<tr><td>$</td><td><i>constituent</i></td><td><code>\</code></td><td><i>single escape</i></td></tr>
<tr><td>%</td><td><i>constituent</i></td><td><code>]</code></td><td><i>constituent</i></td></tr>
<tr><td>&amp;</td><td><i>constituent</i></td><td>^</td><td><i>constituent</i></td></tr>
<tr><td>&rsquo;</td><td><i>terminating</i> <i>macro char</i></td><td><code>_</code></td><td><i>constituent</i></td></tr>
<tr><td>(</td><td><i>terminating</i> <i>macro char</i></td><td>&lsquo;</td><td><i>terminating</i> <i>macro char</i></td></tr>
<tr><td>)</td><td><i>terminating</i> <i>macro char</i></td><td>a&ndash;z</td><td><i>constituent</i></td></tr>
<tr><td><code>*</code></td><td><i>constituent</i></td><td><code><tt>{</tt></code></td><td><i>constituent</i></td></tr>
<tr><td>+</td><td><i>constituent</i></td><td><code>|</code></td><td><i>multiple escape</i></td></tr>
<tr><td>,</td><td><i>terminating</i> <i>macro char</i></td><td><code><tt>}</tt></code></td><td><i>constituent</i></td></tr>
<tr><td>-</td><td><i>constituent</i></td><td><code>~</code></td><td><i>constituent</i></td></tr>
<tr><td>.</td><td><i>constituent</i></td><td>Rubout</td><td><i>constituent</i></td></tr>
<tr><td>/</td><td><i>constituent</i></td><td></td><td></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.7: </strong>Character Syntax Types in Standard Syntax</p></div></div>

<p>The characters marked with an asterisk (*) are initially <i>constituents</i>,
but they are not used in any standard <span class="roman">Common Lisp</span>&nbsp;<!-- /@w -->notations.
These characters are explicitly reserved to the <i>programmer</i>.
<code>~</code> is not used in <span class="roman">Common Lisp</span>, and reserved to implementors.
<code>$</code> and <code>%</code> are <i>alphabetic</i><sub>2</sub>
but are not used in the names of any standard <span class="roman">Common Lisp</span>&nbsp;<!-- /@w --><i>defined names</i>.
</p>
<p><i>Whitespace</i><sub>2</sub>
ignored.  <i>Constituent</i> and <i>escape</i> <i>characters</i> are accumulated
to make a <i>token</i>, which is then interpreted as a <i>number</i> or <i>symbol</i>.
<i>Macro characters</i> trigger the invocation of <i>functions</i> (possibly
user-supplied) that can perform arbitrary parsing actions.
<i>Macro characters</i> are divided into two kinds,
<i>terminating</i> and <i>non-terminating</i>,
depending on whether or not they terminate a <i>token</i>.
The following are descriptions of each kind of <i>syntax type</i>.
</p>
<span id="Constituent-Characters"></span><h4 class="subsubsection">2.1.4.1 Constituent Characters</h4>
<span id="ConstituentChars"></span>
<p><i>Constituent</i> <i>characters</i> are used in <i>tokens</i>.
A <span id="index-token"></span>
<em>token</em> is a representation of a <i>number</i> or a <i>symbol</i>.  
Examples of <i>constituent</i> <i>characters</i> are letters and digits.
</p>
<p>Letters in symbol names are sometimes converted to 
letters in the opposite <i>case</i> when the name is read;
see <a href="Effect-of-Readtable-Case-on-the-Lisp-Reader.html">Section 23.1.2 (Effect of Readtable Case on the Lisp Reader)</a>.
<i>Case</i> conversion can be suppressed by the use 
of <i>single escape</i> or <i>multiple escape</i> characters.
</p>
<span id="Constituent-Traits"></span><h4 class="subsubsection">2.1.4.2 Constituent Traits</h4>
<span id="ConstituentTraits"></span>
<p>Every <i>character</i> has one or more <i>constituent traits</i>
that define how the <i>character</i> is to be interpreted by the <i>Lisp reader</i>
when the <i>character</i> is a <i>constituent</i> <i>character</i>.
These <i>constituent traits</i> are 
<i>alphabetic</i><sub>2</sub>
digit,
<i>package marker</i>,
plus sign,
minus sign, 
dot,
decimal point,
<i>ratio marker</i>,
<i>exponent marker</i>,
and <i>invalid</i>.
<a href="#ConstituentTraitsOfStdChars">Figure 2.8</a>&nbsp;<!-- /@w -->shows the <i>constituent traits</i>
of the <i>standard characters</i>
and of certain <i>semi-standard</i> <i>characters</i>;
no mechanism is provided for changing the <i>constituent trait</i> of a <i>character</i>.
Any <i>character</i> with the alphadigit <i>constituent trait</i>
in that figure is a digit if the <i>current input base</i> is greater
than that character&rsquo;s digit value,
otherwise the <i>character</i> is <i>alphabetic</i><sub>2</sub>
Any <i>character</i> quoted by a <i>single escape</i> 
is treated as an <i>alphabetic</i><sub>2</sub>
</p>


<div class="float"><span id="ConstituentTraitsOfStdChars"></span>
<table class="cartouche" border="1"><tr><td>
<table>
<tr><td><b>constituent</b></td><td><b>traits</b> <p><b>constituent</b> </p><p><b>traits</b>
</p></td></tr>
<tr><td><b>characters</b></td><td><b>characters</b></td></tr>
<tr><td>Backspace</td><td><i>invalid</i> <p><code><tt>{</tt></code> </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Tab</td><td><i>invalid</i>* <p><code><tt>}</tt></code> </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Newline</td><td><i>invalid</i>* <p>+ </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Linefeed</td><td><i>invalid</i>* <p>- </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Page</td><td><i>invalid</i>* <p>. </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Return</td><td><i>invalid</i>* <p>/ </p><p><i>alphabetic</i><sub>2</sub>
</p></td></tr>
<tr><td>Space</td><td><i>invalid</i>* <p>A, a </p><p>alphadigit
</p></td></tr>
<tr><td>!</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>&quot;</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>#</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>$</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>%</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>&amp;</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>&rsquo;</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>(</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>)</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>*</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>,</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>0-9</td><td>alphadigit <p>M, m </p><p>alphadigit
</p></td></tr>
<tr><td>:</td><td><i>package marker</i> <p>N, n </p><p>alphadigit
</p></td></tr>
<tr><td>;</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>&lt;</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>=</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>&gt;</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>?</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>@</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>[</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>\</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>]</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>^</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>_</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td>&lsquo;</td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>|</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
<tr><td><code>~</code></td><td><i>alphabetic</i><sub>2</sub></td></tr>
</table>
</td></tr></table>

<div class="float-caption"><p><strong>Figure 2.8: </strong>Constituent Traits of Standard Characters and Semi-Standard Characters</p></div></div>                   
<p>The interpretations in this table apply only to <i>characters</i>
whose <i>syntax type</i> is <i>constituent</i>.
Entries marked with an asterisk (*) are normally <i>shadowed</i><sub>2</sub>
because the indicated <i>characters</i> are of <i>syntax type</i>
<i>whitespace</i><sub>2</sub>
<i>macro character</i>,
<i>single escape</i>,
or <i>multiple escape</i>;
these <i>constituent traits</i> apply to them only if their <i>syntax types</i> 
are changed to <i>constituent</i>.
</p>


<span id="Invalid-Characters"></span><h4 class="subsubsection">2.1.4.3 Invalid Characters</h4>

<p><i>Characters</i> with the <i>constituent trait</i> <i>invalid</i> 
cannot ever appear in a <i>token</i> 
except under the control of a <i>single escape</i> <i>character</i>.
If an <i>invalid</i> <i>character</i> is encountered while an <i>object</i> is
being read, an error of <i>type</i> <code>reader-error</code> is signaled.
If an <i>invalid</i> <i>character</i> is preceded by a <i>single escape</i> <i>character</i>,
it is treated as an <i>alphabetic</i><sub>2</sub>
</p>

<span id="Macro-Characters"></span><h4 class="subsubsection">2.1.4.4 Macro Characters</h4>
<span id="MacroChars"></span>
<p>When the <i>Lisp reader</i> encounters a <i>macro character</i> 
on an <i>input</i> <i>stream</i>,
special parsing of subsequent <i>characters</i> 
on the <i>input</i> <i>stream</i> 
is performed.
</p>
<p>A <i>macro character</i> has an associated <i>function</i>
called a <span id="index-reader-macro-function"></span>
<em>reader macro function</em> that implements its specialized parsing behavior.
An association of this kind can be established or modified under control of
a <i>conforming program</i> by using 
the <i>functions</i> <code>set-macro-character</code> and <code>set-dispatch-macro-character</code>.
</p>
<p>Upon encountering a <i>macro character</i>, the <i>Lisp reader</i> calls its
<i>reader macro function</i>, which parses one specially formatted object 
from the <i>input</i> <i>stream</i>.
The <i>function</i> either returns the parsed <i>object</i>,
or else it returns no <i>values</i> 
to indicate that the characters scanned by the <i>function</i>
are being ignored (<i>e.g.</i>, in the case of a comment).
Examples of <i>macro characters</i>
are <i>backquote</i>, <i>single-quote</i>, <i>left-parenthesis</i>, and 
<i>right-parenthesis</i>.
</p>
<p>A <i>macro character</i> is either <i>terminating</i> or <i>non-terminating</i>.
The difference between <i>terminating</i> and <i>non-terminating</i> <i>macro characters</i> 
lies in what happens when such characters occur in the middle of a <i>token</i>.  
If a <span id="index-non_002dterminating"></span>
<em>non-terminating</em> <i>macro character</i> occurs in the middle of a <i>token</i>,
the <i>function</i> associated 
with the <i>non-terminating</i> <i>macro character</i> is not called,
and the
<i>non-terminating</i> <i>macro character</i> does not terminate the <i>token</i>&rsquo;s name; it
becomes part of the name as if the <i>macro character</i> were really a constituent
character.  A <span id="index-terminating"></span>
<em>terminating</em> <i>macro character</i> terminates any <i>token</i>,
and its associated <i>reader macro function</i>
is called no matter where the <i>character</i> appears.
The only <i>non-terminating</i> <i>macro character</i> in <i>standard syntax</i> 
is <i>sharpsign</i>.
</p>
<p>If a <i>character</i> is a <i>dispatching macro character</i> C<sub>1</sub>
its <i>reader macro function</i> is a <i>function</i> supplied by the <i>implementation</i>.
This <i>function</i> reads decimal <i>digit</i> <i>characters</i> until a non-<i>digit</i>
C<sub>2</sub>
If any <i>digits</i> were read,
they are converted into a corresponding <i>integer</i> infix parameter P;
otherwise, the infix parameter P is <code>nil</code>.  
The terminating non-<i>digit</i> C<sub>2</sub>
(sometimes called a &ldquo;sub-character&rdquo; to emphasize its subordinate role in the dispatching)
that is looked up in the dispatch table associated with
the <i>dispatching macro character</i> C<sub>1</sub>
The <i>reader macro function</i> associated with the sub-character C<sub>2</sub>
is invoked with three arguments:
the <i>stream</i>,
the sub-character C<sub>2</sub>
and the infix parameter P.
For more information about dispatch characters,
see the <i>function</i> <a href="set_002ddispatch_002dmacro_002dcharacter_003b-get_002ddispatch_002dmacro_002dcharacter.html#set_002ddispatch_002dmacro_002dcharacter">set-dispatch-macro-character</a>.
</p>
<p>For information about the <i>macro characters</i> 
that are available in <i>standard syntax</i>,
see <a href="Standard-Macro-Characters.html">Section 2.4 (Standard Macro Characters)</a>.
</p>

<span id="Multiple-Escape-Characters"></span><h4 class="subsubsection">2.1.4.5 Multiple Escape Characters</h4>
<span id="MultipleEscapeChar"></span>
<p>A pair of <span id="index-multiple-escape"></span>
<em>multiple escape</em> <i>characters</i>
is used to indicate that an enclosed sequence of characters,
including possible <i>macro characters</i> and <i>whitespace</i><sub>2</sub>
are to be treated as <i>alphabetic</i><sub>2</sub>
with <i>case</i> preserved.
Any <i>single escape</i> and <i>multiple escape</i> <i>characters</i> 
that are to appear in the sequence must be preceded by a <i>single escape</i> 
<i>character</i>.  
</p>
<p><i>Vertical-bar</i> is a <i>multiple escape</i> <i>character</i>
in <i>standard syntax</i>.
</p>
<span id="g_t2_002e1_002e4_002e5_002e1-Examples-of-Multiple-Escape-Characters"></span><h4 class="unnumberedsubsubsec">2.1.4.5.1 Examples of Multiple Escape Characters</h4>


<div class="lisp">
<pre class="lisp"> ;; The following examples assume the readtable case of *readtable* 
 ;; and *print-case* are both :upcase.
 (eq 'abc 'ABC) <span class="roman">→</span> <i>true</i>
 (eq 'abc '|ABC|) <span class="roman">→</span> <i>true</i>
 (eq 'abc 'a|B|c) <span class="roman">→</span> <i>true</i>
 (eq 'abc '|abc|) <span class="roman">→</span> <i>false</i>
</pre></div>




<span id="Single-Escape-Character"></span><h4 class="subsubsection">2.1.4.6 Single Escape Character</h4>
<span id="SingleEscapeChar"></span>
<p>A <span id="index-single-escape"></span>
<em>single escape</em> is used to indicate that 
the next <i>character</i> is to be treated as 
an <i>alphabetic</i><sub>2</sub>
with its <i>case</i> preserved,
no matter what the <i>character</i> is 
or which <i>constituent traits</i> it has.  
</p>
<p><i>Backslash</i> is a <i>single escape</i> <i>character</i> in <i>standard syntax</i>.
</p>
<span id="g_t2_002e1_002e4_002e6_002e1-Examples-of-Single-Escape-Characters"></span><h4 class="unnumberedsubsubsec">2.1.4.6.1 Examples of Single Escape Characters</h4>


<div class="lisp">
<pre class="lisp"> ;; The following examples assume the readtable case of *readtable* 
 ;; and *print-case* are both :upcase.
 (eq 'abc '\A\B\C) <span class="roman">→</span> <i>true</i>
 (eq 'abc 'a\Bc) <span class="roman">→</span> <i>true</i>
 (eq 'abc '\ABC) <span class="roman">→</span> <i>true</i>
 (eq 'abc '\abc) <span class="roman">→</span> <i>false</i>
</pre></div>




<span id="Whitespace-Characters"></span><h4 class="subsubsection">2.1.4.7 Whitespace Characters</h4>
<span id="WhitespaceChars"></span>
<p><i>Whitespace</i><sub>2</sub>
</p>
<p><i>Space</i> and <i>newline</i> are <i>whitespace</i><sub>2</sub>
in <i>standard syntax</i>.
</p>
<span id="g_t2_002e1_002e4_002e7_002e1-Examples-of-Whitespace-Characters"></span><h4 class="unnumberedsubsubsec">2.1.4.7.1 Examples of Whitespace Characters</h4>


<div class="lisp">
<pre class="lisp"> (length '(this-that)) <span class="roman">→</span> 1
 (length '(this - that)) <span class="roman">→</span> 3
 (length '(a
           b)) <span class="roman">→</span> 2
 (+ 34) <span class="roman">→</span> 34
 (+ 3 4) <span class="roman">→</span> 7
</pre></div>





<hr>
<div class="header">
<p>
Previous: <a href="Standard-Characters.html" accesskey="p" rel="prev">Standard Characters</a>, Up: <a href="Character-Syntax.html" accesskey="u" rel="up">Character Syntax</a> &nbsp; [<a href="Table-of-Contents.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
